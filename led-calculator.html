<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LED Current Calculator - Electronics Tools</title>
    <link rel="stylesheet" href="electronics-tools-shared.css">
    <link rel="stylesheet" href="mobile-top-nav.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* LED Visual */
        .led-visual {
            background: rgba(245, 245, 245, 0.05);
            border: 2px solid rgba(255, 152, 0, 0.2);
            border-radius: 16px;
            padding: 30px 20px;
            margin: 20px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }

        .led-circuit {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .circuit-symbol {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .led-symbol {
            width: 60px;
            height: 60px;
            position: relative;
        }

        .led-glow {
            position: absolute;
            inset: -10px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--led-color, #FF0000) 0%, transparent 70%);
            opacity: 0.6;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.4; transform: scale(0.9); }
            50% { opacity: 0.8; transform: scale(1.1); }
        }

        .led-body {
            width: 40px;
            height: 50px;
            background: linear-gradient(135deg, var(--led-color, #FF0000) 0%, color-mix(in srgb, var(--led-color, #FF0000) 70%, black) 100%);
            border-radius: 20px 20px 5px 5px;
            position: relative;
            z-index: 1;
            box-shadow: inset 0 -5px 10px rgba(0, 0, 0, 0.3),
                        0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .led-shine {
            position: absolute;
            top: 8px;
            left: 10px;
            width: 12px;
            height: 20px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.6), transparent);
            border-radius: 50%;
        }

        .led-legs {
            display: flex;
            gap: 15px;
            margin-top: -5px;
        }

        .led-leg {
            width: 3px;
            height: 20px;
            background: linear-gradient(to bottom, #c0c0c0, #808080);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .resistor-symbol {
            width: 70px;
            height: 30px;
            background: linear-gradient(to right, 
                transparent 0%, #d4c5a9 10%, #d4c5a9 90%, transparent 100%);
            position: relative;
        }

        .resistor-zigzag {
            position: absolute;
            inset: 0;
            background: repeating-linear-gradient(90deg,
                transparent, transparent 8px,
                rgba(139, 69, 19, 0.3) 8px, rgba(139, 69, 19, 0.3) 10px
            );
        }

        .wire {
            width: 40px;
            height: 3px;
            background: linear-gradient(to right, #c0c0c0, #a0a0a0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .symbol-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        /* LED Type Selector */
        .led-type-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 12px;
        }

        .led-type-btn {
            padding: 12px;
            background: rgba(255, 152, 0, 0.08);
            border: 1.5px solid rgba(255, 152, 0, 0.3);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
        }

        .led-type-btn.selected {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.15);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
        }

        .led-color-dot {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            box-shadow: 0 0 12px currentColor, inset 0 -2px 4px rgba(0, 0, 0, 0.3);
        }

        .led-type-label {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .led-type-voltage {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        /* Configuration Selector */
        .config-selector {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .config-btn {
            flex: 1;
            padding: 10px;
            background: rgba(255, 152, 0, 0.08);
            border: 1.5px solid rgba(255, 152, 0, 0.3);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .config-btn.selected {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.15);
        }

        .config-icon {
            font-size: 1.5rem;
        }

        .config-label {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Power Rating Display */
        .power-rating-display {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-top: 12px;
        }

        .power-option {
            padding: 10px 8px;
            background: rgba(255, 152, 0, 0.08);
            border: 1.5px solid rgba(255, 152, 0, 0.3);
            border-radius: 10px;
            text-align: center;
            transition: all 0.2s ease;
        }

        .power-option.recommended {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.15);
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
        }

        .power-value {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .power-status {
            font-size: 0.65rem;
            color: var(--text-secondary);
            margin-top: 4px;
        }
    </style>
</head>
<body>
    <header class="tool-header">
        <button class="tool-back-btn" onclick="window.location.href='projects.html'">
            <i class="fas fa-arrow-left"></i>
        </button>
        <h1>LED Current Calculator</h1>
    </header>

    <main class="tool-content">
        <!-- Info Box -->
        <div class="info-box">
            <i class="fas fa-info-circle"></i>
            <p><strong>Formula:</strong> R = (Vs - Vf) / I<br>Calculate current-limiting resistor for LEDs. Data averaged from Vishay, Cree, OSRAM, and Nichia datasheets.</p>
        </div>

        <!-- LED Visual -->
        <div class="led-visual">
            <div class="led-circuit">
                <div class="circuit-symbol">
                    <div class="wire"></div>
                    <div class="symbol-label">+</div>
                </div>
                
                <div class="circuit-symbol">
                    <div class="resistor-symbol">
                        <div class="resistor-zigzag"></div>
                    </div>
                    <div class="symbol-label" id="resistorLabel">? Ω</div>
                </div>
                
                <div class="circuit-symbol">
                    <div class="led-symbol">
                        <div class="led-glow" id="ledGlow"></div>
                        <div class="led-body" id="ledBody">
                            <div class="led-shine"></div>
                        </div>
                    </div>
                    <div class="led-legs">
                        <div class="led-leg" style="height: 25px;"></div>
                        <div class="led-leg"></div>
                    </div>
                    <div class="symbol-label">LED</div>
                </div>
                
                <div class="circuit-symbol">
                    <div class="wire"></div>
                    <div class="symbol-label">−</div>
                </div>
            </div>
        </div>

        <!-- LED Type Selector -->
        <div class="tool-card">
            <div class="form-label">Select LED Type</div>
            <div class="led-type-grid" id="ledTypeGrid">
                <!-- Generated by JS -->
            </div>
        </div>

        <!-- Configuration -->
        <div class="tool-card">
            <div class="form-label">Configuration</div>
            <div class="config-selector">
                <div class="config-btn selected" data-config="single" onclick="selectConfig('single')">
                    <div class="config-icon">●</div>
                    <div class="config-label">Single</div>
                </div>
                <div class="config-btn" data-config="series" onclick="selectConfig('series')">
                    <div class="config-icon">●—●</div>
                    <div class="config-label">Series</div>
                </div>
                <div class="config-btn" data-config="parallel" onclick="selectConfig('parallel')">
                    <div class="config-icon">●<br>●</div>
                    <div class="config-label">Parallel</div>
                </div>
            </div>
            
            <div id="configInputs" style="margin-top: 16px;"></div>
        </div>

        <!-- Supply Voltage -->
        <div class="tool-card">
            <div class="form-group">
                <label class="form-label">Supply Voltage (Vs)</label>
                <input type="number" id="supplyVoltage" class="form-input" placeholder="e.g., 5, 9, 12" step="0.1" min="0" value="5">
            </div>
        </div>

        <!-- LED Current -->
        <div class="tool-card">
            <div class="form-group">
                <label class="form-label">LED Current (mA)</label>
                <input type="number" id="ledCurrent" class="form-input" placeholder="e.g., 20" step="1" min="1" value="20">
                <p class="text-small text-dim" style="margin-top: 6px;">Typical: 10-20mA for indicators, up to 30mA for high-brightness</p>
            </div>
        </div>

        <!-- Calculate Button -->
        <button class="btn-primary" onclick="calculateLED()">
            <i class="fas fa-calculator"></i> Calculate Resistor
        </button>

        <!-- Result -->
        <div id="ledResult"></div>
    </main>

    <footer class="tool-footer">
        <p class="source-citation">
            <i class="fas fa-book"></i> Data Source: LED specifications averaged from Vishay, Cree, OSRAM, Nichia datasheets<br>
            Standard forward voltages and maximum ratings
        </p>
    </footer>

    <script src="led-calculator.js"></script>
</body>
</html>
