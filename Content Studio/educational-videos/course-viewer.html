<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Educational Course - Md Akhinoor Islam</title>
  <link rel="icon" href="../../images/favicon.svg" type="image/svg+xml" />
  <link rel="stylesheet" href="../../Optimization/styles.css" />
  <link rel="stylesheet" href="../../Optimization/Background/background-system.css" />
  <link rel="stylesheet" href="../written-posts/post-viewer.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <meta name="theme-color" content="#CC0000" />
  <style>
    .course-layout { max-width: 1400px; margin: 30px auto 60px; padding: 0 40px; display: grid; grid-template-columns: 1fr 350px; gap: 40px; }
    .course-main { min-width: 0; }
    .course-sidebar { position: sticky; top: 100px; height: fit-content; background: rgba(10,10,10,0.9); border: 2px solid rgba(204,0,0,0.3); border-radius: 16px; padding: 25px; }
    .video-player { position: relative; width: 100%; padding-bottom: 56.25%; background: #000; border-radius: 20px; overflow: hidden; border: 3px solid rgba(204,0,0,0.3); box-shadow: 0 15px 60px rgba(0,0,0,0.8); margin-bottom: 30px; }
    .video-player iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
    .episode-header { margin-bottom: 20px; padding-bottom: 15px; border-bottom: 2px solid rgba(204,0,0,0.3); }
    .episode-header h3 { font-size: 1.3rem; color: #fff; margin: 0 0 10px 0; font-weight: 700; }
    .episode-progress { background: rgba(0,0,0,0.5); height: 8px; border-radius: 10px; overflow: hidden; }
    .episode-progress-bar { height: 100%; background: linear-gradient(90deg, #CC0000, #FF0000); transition: width 0.3s ease; }
    .episode-list { max-height: 500px; overflow-y: auto; }
    .episode-item { display: flex; align-items: center; gap: 15px; padding: 15px; background: rgba(204,0,0,0.1); border: 2px solid rgba(204,0,0,0.2); border-radius: 12px; margin-bottom: 10px; cursor: pointer; transition: all 0.3s ease; }
    .episode-item:hover { background: rgba(204,0,0,0.2); border-color: #CC0000; }
    .episode-item.active { background: linear-gradient(135deg, rgba(204,0,0,0.3), rgba(153,0,0,0.2)); border-color: #CC0000; }
    .episode-number { width: 45px; height: 45px; background: rgba(204,0,0,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; color: #CC0000; font-size: 1.1rem; flex-shrink: 0; }
    .episode-item.active .episode-number { background: #CC0000; color: #fff; }
    .episode-info { flex: 1; min-width: 0; }
    .episode-title { font-weight: 600; color: #fff; font-size: 0.95rem; margin-bottom: 5px; }
    .episode-duration { font-size: 0.8rem; color: rgba(255,255,255,0.6); }
    .episode-check { color: #00ff00; font-size: 1.2rem; }
    .course-tabs { display: flex; gap: 10px; margin-bottom: 30px; border-bottom: 2px solid rgba(204,0,0,0.3); }
    .course-tab { padding: 12px 24px; background: transparent; border: none; color: rgba(255,255,255,0.6); font-weight: 600; cursor: pointer; border-bottom: 3px solid transparent; transition: all 0.3s ease; }
    .course-tab.active { color: #fff; border-bottom-color: #CC0000; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .course-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 30px; }
    .stat-card { background: rgba(10,10,10,0.9); border: 2px solid rgba(204,0,0,0.3); border-radius: 12px; padding: 20px; text-align: center; }
    .stat-card i { font-size: 2rem; color: #CC0000; margin-bottom: 10px; }
    .stat-value { font-size: 1.8rem; font-weight: 700; color: #fff; }
    .stat-label { font-size: 0.9rem; color: rgba(255,255,255,0.6); }
    @media (max-width: 1200px) { .course-layout { grid-template-columns: 1fr; } .course-sidebar { position: static; } }
  </style>
</head>
<body>
    <!-- CENTRALIZED BACKGROUND SYSTEM -->
    <div class="bg-system-container">
        <!-- Animated Background Elements -->
        <div class="bg-hero-bg-elements">
            <!-- Geometric Shapes -->
            <div class="bg-geometric-shapes">
                <div class="bg-shape bg-shape-1"></div>
                <div class="bg-shape bg-shape-2"></div>
                <div class="bg-shape bg-shape-3"></div>
                <div class="bg-shape bg-shape-4"></div>
                <div class="bg-shape bg-shape-5"></div>
            </div>
            
            <!-- Gradient Orbs -->
            <div class="bg-gradient-orbs">
                <div class="bg-orb bg-orb-1"></div>
                <div class="bg-orb bg-orb-2"></div>
                <div class="bg-orb bg-orb-3"></div>
            </div>
            
            <!-- Particle Canvas -->
            <canvas id="particles-canvas" class="bg-particles-canvas"></canvas>
        </div>
        
        <!-- Dark Overlay for Contrast -->
        <div class="bg-system-overlay"></div>
        
        <!-- PAGE CONTENT WRAPPER -->
        <div class="bg-system-content">
  <div class="back-to-hub"><a href="../hub.html" class="back-btn"><i class="fas fa-arrow-left"></i><span>Back to Content Studio</span></a></div>

  <div class="post-loading" id="courseLoading"><i class="fas fa-spinner fa-spin"></i><span>Loading course...</span></div>

  <div class="course-layout" id="courseContent" style="display: none;">
    <main class="course-main">
      <header class="post-header">
        <div class="post-badge"><i class="fas fa-chalkboard-teacher"></i><span>Educational Course</span></div>
        <h1 class="post-title" id="courseTitle">Loading...</h1>
        <div class="post-meta">
          <div class="meta-item"><i class="fas fa-calendar"></i><span id="courseDate">-</span></div>
          <div class="meta-item"><i class="fas fa-list"></i><span id="courseEpisodes">0 episodes</span></div>
          <div class="meta-item"><i class="fas fa-user"></i><span id="courseInstructor">-</span></div>
        </div>
        <div class="post-tags" id="courseTags"></div>
        <div class="share-buttons">
          <span class="share-label">Share:</span>
          <button class="share-btn facebook" onclick="shareCourse('facebook')"><i class="fab fa-facebook-f"></i></button>
          <button class="share-btn twitter" onclick="shareCourse('twitter')"><i class="fab fa-twitter"></i></button>
          <button class="share-btn whatsapp" onclick="shareCourse('whatsapp')"><i class="fab fa-whatsapp"></i></button>
          <button class="share-btn link" onclick="copyCourseLink()"><i class="fas fa-link"></i></button>
        </div>
      </header>

      <div class="course-stats">
        <div class="stat-card"><i class="fas fa-list"></i><div class="stat-value" id="totalEpisodes">0</div><div class="stat-label">Episodes</div></div>
        <div class="stat-card"><i class="fas fa-check-circle"></i><div class="stat-value" id="completedEpisodes">0</div><div class="stat-label">Completed</div></div>
        <div class="stat-card"><i class="fas fa-clock"></i><div class="stat-value" id="totalDuration">0h</div><div class="stat-label">Total Duration</div></div>
      </div>

      <div class="video-player" id="videoPlayer"></div>

      <div class="course-tabs">
        <button class="course-tab active" onclick="switchTab('description')">Description</button>
        <button class="course-tab" onclick="switchTab('notes')">Notes</button>
        <button class="course-tab" onclick="switchTab('resources')">Resources</button>
      </div>

      <div class="tab-content active" id="tab-description">
        <div class="post-content" id="courseDescription"></div>
      </div>
      <div class="tab-content" id="tab-notes">
        <div class="post-content"><p>Take notes while learning. (Feature coming soon)</p></div>
      </div>
      <div class="tab-content" id="tab-resources">
        <div class="post-content"><p>Course resources and downloads will appear here.</p></div>
      </div>
    </main>

    <aside class="course-sidebar">
      <div class="episode-header">
        <h3>Course Content</h3>
        <div class="episode-progress"><div class="episode-progress-bar" id="courseProgressBar" style="width: 0%"></div></div>
        <p style="font-size: 0.85rem; color: rgba(255,255,255,0.6); margin: 10px 0 0 0;"><span id="progressText">0% Complete</span></p>
      </div>
      <div class="episode-list" id="episodeList"></div>
    </aside>
  </div>

  <!-- Navigation Section -->
  <nav class="post-navigation" style="display: none;">
    <a href="#" id="prevCourse" class="nav-post prev-post">
      <span class="nav-label">← Previous Course</span>
      <h4 class="nav-post-title" id="prevCourseTitle"></h4>
      <p class="nav-post-excerpt" id="prevCourseExcerpt"></p>
    </a>
    <a href="#" id="nextCourse" class="nav-post next-post">
      <span class="nav-label">Next Course →</span>
      <h4 class="nav-post-title" id="nextCourseTitle"></h4>
      <p class="nav-post-excerpt" id="nextCourseExcerpt"></p>
    </a>
  </nav>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2025 Md Akhinoor Islam. All rights reserved.</p>
      <p style="font-size: 0.9rem; color: rgba(255,255,255,0.6); margin-top: 8px;">Portfolio presented by <strong>A3KM Studio</strong></p>
    </div>
  </footer>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const courseId = urlParams.get('id');
    let currentCourse = null;
    let allCourses = [];
    let currentEpisodeIndex = 0;

    async function loadCourse() {
      if (!courseId) return;
      try {
        const response = await fetch('courses.json');
        const data = await response.json();
        allCourses = data.courses || [];
        currentCourse = allCourses.find(c => c.id === courseId);
        if (currentCourse) {
          renderCourse();
          setupNavigation();
        }
      } catch (error) { console.error('Error:', error); }
    }

    function renderCourse() {
      document.getElementById('courseTitle').textContent = currentCourse.title;
      document.getElementById('courseDate').textContent = new Date(currentCourse.date).toLocaleDateString('en-GB', {day: 'numeric', month: 'long', year: 'numeric'});
      document.getElementById('courseEpisodes').textContent = `${currentCourse.episodes} episodes`;
      document.getElementById('courseInstructor').textContent = currentCourse.instructor || 'Md Akhinoor Islam';
      document.getElementById('courseDescription').innerHTML = `<p>${currentCourse.description || currentCourse.summary}</p>`;
      document.getElementById('totalEpisodes').textContent = currentCourse.episodes;
      document.getElementById('totalDuration').textContent = currentCourse.duration || '0h';
      document.title = `${currentCourse.title} - Md Akhinoor Islam`;

      if (currentCourse.tags) {
        document.getElementById('courseTags').innerHTML = currentCourse.tags.map(tag => `<span class="post-tag">${tag}</span>`).join('');
      }

      // Render episode list (demo)
      const episodeHTML = Array.from({length: currentCourse.episodes}, (_, i) => {
        const completed = getEpisodeProgress(i);
        return `<div class="episode-item ${i === 0 ? 'active' : ''}" onclick="playEpisode(${i})">
          <div class="episode-number">${i + 1}</div>
          <div class="episode-info">
            <div class="episode-title">Episode ${i + 1}: ${currentCourse.title} Part ${i + 1}</div>
            <div class="episode-duration">15:00</div>
          </div>
          ${completed ? '<i class="fas fa-check-circle episode-check"></i>' : ''}
        </div>`;
      }).join('');
      document.getElementById('episodeList').innerHTML = episodeHTML;

      playEpisode(0);
      updateProgress();
      document.getElementById('courseLoading').style.display = 'none';
      document.getElementById('courseContent').style.display = 'grid';
    }

    function playEpisode(index) {
      currentEpisodeIndex = index;
      document.querySelectorAll('.episode-item').forEach((item, i) => {
        item.classList.toggle('active', i === index);
      });
      document.getElementById('videoPlayer').innerHTML = `<iframe src="https://www.youtube.com/embed/${currentCourse.videoId}?start=${index * 900}" allowfullscreen allow="autoplay; encrypted-media"></iframe>`;
      markEpisodeComplete(index);
      updateProgress();
    }

    function markEpisodeComplete(index) {
      const key = `course_${courseId}_ep_${index}`;
      localStorage.setItem(key, 'true');
    }

    function getEpisodeProgress(index) {
      const key = `course_${courseId}_ep_${index}`;
      return localStorage.getItem(key) === 'true';
    }

    function updateProgress() {
      let completed = 0;
      for (let i = 0; i < currentCourse.episodes; i++) {
        if (getEpisodeProgress(i)) completed++;
      }
      const progress = (completed / currentCourse.episodes) * 100;
      document.getElementById('courseProgressBar').style.width = `${progress}%`;
      document.getElementById('progressText').textContent = `${Math.round(progress)}% Complete`;
      document.getElementById('completedEpisodes').textContent = completed;
    }

    function switchTab(tab) {
      document.querySelectorAll('.course-tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      event.target.classList.add('active');
      document.getElementById(`tab-${tab}`).classList.add('active');
    }

    function shareCourse(platform) {
      const url = encodeURIComponent(window.location.href);
      const title = encodeURIComponent(currentCourse.title);
      let shareUrl;
      if (platform === 'facebook') shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
      else if (platform === 'twitter') shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=${title}`;
      else if (platform === 'whatsapp') shareUrl = `https://wa.me/?text=${title}%20${url}`;
      window.open(shareUrl, '_blank', 'width=600,height=400');
    }

    function copyCourseLink() { navigator.clipboard.writeText(window.location.href); }

    function setupNavigation() {
      const currentIndex = allCourses.findIndex(c => c.id === courseId);
      if (currentIndex === -1) return;

      const prevCourse = currentIndex > 0 ? allCourses[currentIndex - 1] : null;
      const nextCourse = currentIndex < allCourses.length - 1 ? allCourses[currentIndex + 1] : null;

      const navSection = document.querySelector('.post-navigation');
      const prevLink = document.getElementById('prevCourse');
      const nextLink = document.getElementById('nextCourse');
      const prevTitle = document.getElementById('prevCourseTitle');
      const nextTitle = document.getElementById('nextCourseTitle');
      const prevExcerpt = document.getElementById('prevCourseExcerpt');
      const nextExcerpt = document.getElementById('nextCourseExcerpt');

      if (!navSection) return;

      if (prevCourse && prevLink) {
        prevLink.href = `course-viewer.html?id=${prevCourse.id}`;
        prevTitle.textContent = prevCourse.title;
        prevExcerpt.textContent = prevCourse.summary || prevCourse.description || `Learn ${prevCourse.title}`;
        prevLink.style.display = 'flex';
      } else if (prevLink) {
        prevLink.style.display = 'none';
      }

      if (nextCourse && nextLink) {
        nextLink.href = `course-viewer.html?id=${nextCourse.id}`;
        nextTitle.textContent = nextCourse.title;
        nextExcerpt.textContent = nextCourse.summary || nextCourse.description || `Learn ${nextCourse.title}`;
        nextLink.style.display = 'flex';
      } else if (nextLink) {
        nextLink.style.display = 'none';
      }

      if (prevCourse || nextCourse) {
        navSection.style.display = 'block';
      }
    }

    document.addEventListener('DOMContentLoaded', loadCourse);
  </script>

        </div> <!-- END bg-system-content -->
    </div> <!-- END bg-system-container -->
</body>
</html>
