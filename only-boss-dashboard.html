<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Only Boss Dashboard</title>
    <!-- Global site styles for navbar consistency -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="mobile-clean.css">
    <link rel="stylesheet" href="mobile-boss-dashboard-fix.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #0a0a0a 0%, #1a0000 100%); color: #ffffff; min-height: 100vh; }
        .header { background: linear-gradient(135deg, rgba(30, 0, 0, 0.8), rgba(10, 0, 0, 0.9)); border-bottom: 2px solid rgba(204, 0, 0, 0.3); padding: 20px 40px; display: flex; justify-content: space-between; align-items: center; }
        .header h1 { color: #cc0000; font-size: 1.8rem; }
        .header-info { display: flex; gap: 20px; align-items: center; }
        .session-info { font-size: 0.85rem; color: rgba(255, 255, 255, 0.6); }
        .logout-btn { padding: 10px 20px; background: linear-gradient(135deg, #cc0000, #990000); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; }
        .logout-btn:hover { background: linear-gradient(135deg, #dd0000, #aa0000); transform: translateY(-2px); }
        .container { padding: 40px; max-width: 1400px; margin: 0 auto; }
        .admin-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-top: 30px; }
        .admin-card { background: linear-gradient(135deg, rgba(30, 0, 0, 0.6), rgba(10, 0, 0, 0.8)); border: 2px solid rgba(204, 0, 0, 0.3); border-radius: 15px; padding: 30px; cursor: pointer; transition: all 0.3s ease; }
        .admin-card:hover { border-color: #cc0000; transform: translateY(-5px); box-shadow: 0 10px 30px rgba(204, 0, 0, 0.3); }
        .card-icon { font-size: 3rem; margin-bottom: 15px; }
        .card-title { color: #cc0000; font-size: 1.4rem; margin-bottom: 10px; }
        .card-description { color: rgba(255, 255, 255, 0.7); font-size: 0.9rem; line-height: 1.6; }
        .security-panel { background: rgba(204, 0, 0, 0.1); border: 1px solid rgba(204, 0, 0, 0.3); border-radius: 15px; padding: 25px; margin-top: 30px; }
        .security-panel h2 { color: #cc0000; margin-bottom: 15px; }
        .security-status { display: flex; flex-wrap: wrap; gap: 20px; margin-top: 15px; }
        .status-item { background: rgba(0, 0, 0, 0.3); padding: 15px 20px; border-radius: 10px; border-left: 4px solid #00cc00; }
        .status-item.warning { border-left-color: #ff9900; }
        .status-label { color: rgba(255, 255, 255, 0.6); font-size: 0.85rem; margin-bottom: 5px; }
        .status-value { color: #00cc00; font-size: 1.1rem; font-weight: 600; }
        .status-value.warning { color: #ff9900; }
        .boss-icon { font-size: 2.2rem; margin-right: 8px; vertical-align: -4px; text-shadow: 0 0 8px rgba(255, 215, 0, 0.9), 0 0 16px rgba(255, 215, 0, 0.6); }

        /* Security Settings Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 1000; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: linear-gradient(135deg, rgba(30, 0, 0, 0.95), rgba(10, 0, 0, 0.98)); border: 2px solid rgba(204, 0, 0, 0.4); border-radius: 20px; padding: 40px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .modal-title { color: #cc0000; font-size: 1.6rem; }
        .close-btn { background: none; border: none; color: rgba(255, 255, 255, 0.6); font-size: 2rem; cursor: pointer; transition: all 0.3s ease; }
        .close-btn:hover { color: #cc0000; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; color: rgba(255, 255, 255, 0.7); font-size: 0.9rem; }
        .form-group input { width: 100%; padding: 12px 18px; background: rgba(20, 0, 0, 0.4); border: 2px solid rgba(204, 0, 0, 0.3); border-radius: 10px; color: #fff; font-size: 1rem; }
        .form-group input:focus { outline: none; border-color: #cc0000; box-shadow: 0 0 15px rgba(204, 0, 0, 0.3); }
        .btn { padding: 12px 24px; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; margin-right: 10px; }
        .btn-primary { background: linear-gradient(135deg, #cc0000, #990000); color: white; }
        .btn-primary:hover { background: linear-gradient(135deg, #dd0000, #aa0000); }
        .btn-secondary { background: rgba(255, 255, 255, 0.1); color: white; }
        .success-msg, .error-msg { padding: 12px; border-radius: 8px; margin-top: 15px; display: none; }
        .success-msg { background: rgba(0, 200, 0, 0.2); border: 1px solid rgba(0, 200, 0, 0.4); color: #00ff00; }
        .error-msg { background: rgba(200, 0, 0, 0.2); border: 1px solid rgba(200, 0, 0, 0.4); color: #ff6666; }

        /* Blog Manager Specific Styles */
        .btn-secondary:hover { background: rgba(255, 255, 255, 0.2); }
        #blogPreview h1 { color: #cc0000; font-size: 2rem; margin: 20px 0 10px 0; }
        #blogPreview h2 { color: #dd3333; font-size: 1.6rem; margin: 18px 0 8px 0; }
        #blogPreview h3 { color: #ee6666; font-size: 1.3rem; margin: 15px 0 6px 0; }
        #blogPreview p { color: rgba(255, 255, 255, 0.8); line-height: 1.6; margin: 10px 0; }
        #blogPreview ul { margin: 10px 0 10px 20px; color: rgba(255, 255, 255, 0.8); }
        #blogPreview li { margin: 5px 0; }
        #blogPreview code { background: rgba(204, 0, 0, 0.2); padding: 2px 6px; border-radius: 4px; color: #ff9999; font-family: 'Courier New', monospace; }
        #blogPreview pre { background: rgba(20, 0, 0, 0.6); border: 1px solid rgba(204, 0, 0, 0.3); border-radius: 8px; padding: 15px; overflow-x: auto; margin: 15px 0; }
        #blogPreview pre code { background: none; padding: 0; }
        #blogPreview a { color: #66ccff; text-decoration: none; border-bottom: 1px dotted #66ccff; }
        #blogPreview a:hover { color: #99ddff; border-bottom-style: solid; }
        #blogPreview strong { color: #ffcc66; font-weight: 700; }
        #blogPreview em { color: #ccffcc; font-style: italic; }

        @media (max-width: 768px) { .header { flex-direction: column; gap: 15px; text-align: center; } .container { padding: 20px; } .admin-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <!-- Global Navbar added so the top bar is always visible -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <!-- ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶∏‡¶æ‡¶á‡¶ü‡ßá‡¶∞ ‡¶≤‡ßã‡¶ó‡ßã ‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø logo.svg ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá -->
                <a href="index.html">
                    <img src="images/logo.svg" alt="‡¶ì‡ßü‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü ‡¶≤‡ßã‡¶ó‡ßã" class="brand-logo" width="40" height="40" style="vertical-align:middle; margin-right:8px;" />
                    <span style="font-size:1.2rem; color:#cc0000; vertical-align:middle;">Home</span>
                </a>
            </div>
            <!-- Mobile quick icons -->
            <div class="nav-quick-icons" aria-label="Quick navigation">
                <a href="index.html" class="nav-icon" aria-label="Home" title="Home"><i class="fas fa-house"></i></a>
                <a href="about.html" class="nav-icon" aria-label="About" title="About"><i class="fas fa-user"></i></a>
                <a href="projects.html" class="nav-icon" aria-label="Projects" title="Projects"><i class="fas fa-diagram-project"></i></a>
                <a href="contact.html" class="nav-icon" aria-label="Contact" title="Contact"><i class="fas fa-envelope"></i></a>
                <a href="only-boss.html" class="nav-icon nav-crown" aria-label="Only Boss" title="Only Boss"><i class="fas fa-crown"></i></a>
            </div>
            <ul class="nav-menu">
                <li class="nav-item"><a href="about.html" class="nav-link">About</a></li>
                <li class="nav-item"><a href="projects.html" class="nav-link">Projects</a></li>
                <li class="nav-item"><a href="contact.html" class="nav-link">Contact</a></li>
                <li class="nav-item">
                    <a href="only-boss.html" class="nav-link nav-crown" title="Only Boss Portal" aria-label="Only Boss Portal">
                        <i class="fas fa-crown" aria-hidden="true"></i>
                        <span>Only Boss</span>
                    </a>
                </li>
                    <li class="nav-item">
                        <button id="dashboardLogoutBtn" class="logout-btn" style="margin-left: 10px;">üö™ Logout</button>
                    </li>
            </ul>
            <div class="hamburger"><span class="bar"></span><span class="bar"></span><span class="bar"></span></div>
        </div>
    </nav>

    <div class="header">
        <h1><span class="boss-icon" aria-hidden="true">üëë</span> Only Boss Dashboard</h1>
        <div class="header-info">
            <div class="session-info">Session Active | Last Login: <span id="lastLogin">--</span></div>
            <button class="logout-btn" id="logoutBtn" style="margin-left: 10px;">üö™ Logout</button>
        </div>
    </div>
    <div class="container">
        <h2 style="color: rgba(255, 255, 255, 0.8); margin-bottom: 10px;">Welcome, Administrator</h2>
        <p style="color: rgba(255, 255, 255, 0.5);">Manage your website content and settings from here</p>
        <div class="admin-grid">
            <div class="admin-card" onclick="openBlogManager()">
                <div class="card-icon">üìù</div>
                <h3 class="card-title">Blog Manager</h3>
                <p class="card-description">Create, edit, and manage blog posts with visual Markdown editor. Real-time preview and auto-save.</p>
            </div>
            <div class="admin-card" onclick="window.location.href='./backend-token-manager.html'">
                <div class="card-icon">üîê</div>
                <h3 class="card-title">Backend Token Manager</h3>
                <p class="card-description">Manage encrypted GitHub API tokens for backend proxy server. Configure multiple tokens for unlimited access. Admin authentication required.</p>
            </div>
            <div class="admin-card" onclick="window.location.href='./project-management-hub.html'">
                <div class="card-icon">üì¶</div>
                <h3 class="card-title">Project Management</h3>
                <p class="card-description">SOLIDWORKS CW/HW/Solo projects - Upload, Update, Delete with GitHub sync and auto README generation.</p>
            </div>
            <div class="admin-card" id="uploadModelCard">
                <div class="card-icon">üéØ</div>
                <h3 class="card-title">Upload 3D Model (GLB/GLTF)</h3>
                <p class="card-description">Upload SOLIDWORKS 3D models to CW/HW/Solo projects. Auto-detection on mobile pages with View 3D button.</p>
            </div>
            <div class="admin-card" onclick="alert('CV Manager - Coming Soon')">
                <div class="card-icon">üìÑ</div>
                <h3 class="card-title">CV Manager</h3>
                <p class="card-description">Upload and update your CV/Resume. Manage different versions.</p>
            </div>
            <div class="admin-card" onclick="alert('Projects Manager - Coming Soon')">
                <div class="card-icon">üöÄ</div>
                <h3 class="card-title">Projects</h3>
                <p class="card-description">Add, edit, or remove project entries. Manage GitHub sync.</p>
            </div>
            <div class="admin-card" onclick="alert('Content Editor - Coming Soon')">
                <div class="card-icon">‚úèÔ∏è</div>
                <h3 class="card-title">Content Editor</h3>
                <p class="card-description">Edit website text, descriptions, and about section.</p>
            </div>
            <div class="admin-card" id="securityCard">
                <div class="card-icon">üîí</div>
                <h3 class="card-title">Security Settings</h3>
                <p class="card-description">Change passwords, manage two-step authentication.</p>
            </div>
            <div class="admin-card" onclick="alert('Analytics - Coming Soon')">
                <div class="card-icon">üìä</div>
                <h3 class="card-title">Analytics</h3>
                <p class="card-description">View visitor statistics and engagement metrics.</p>
            </div>
        </div>
        <div class="security-panel">
            <h2>üõ°Ô∏è Security Status</h2>
            <div class="security-status">
                <div class="status-item"><div class="status-label">Authentication Method</div><div class="status-value">Two-Step (SHA-256)</div></div>
                <div class="status-item"><div class="status-label">Session Status</div><div class="status-value">Active</div></div>
                <div class="status-item"><div class="status-label">Last Password Change</div><div class="status-value" id="lastPwdChange">Never</div></div>
                <div class="status-item warning"><div class="status-label">Auto-Logout Timer</div><div class="status-value warning">30 minutes</div></div>
            </div>
        </div>
    </div>

    <!-- Blog Manager Modal -->
    <div class="modal" id="blogModal">
        <div class="modal-content" style="max-width: 1200px; max-height: 90vh;">
            <div class="modal-header">
                <h2 class="modal-title">üìù Blog Manager</h2>
                <button class="close-btn" onclick="closeBlogManager()">&times;</button>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                <!-- Left: Editor -->
                <div>
                    <h3 style="color: #cc0000; margin-bottom: 15px;">‚úèÔ∏è Write Your Post</h3>
                    
                    <div class="form-group">
                        <label>Post Title:</label>
                        <input type="text" id="blogTitle" placeholder="My Awesome Blog Post" style="width: 100%;">
                    </div>
                    
                    <div class="form-group">
                        <label>Slug (URL):</label>
                        <input type="text" id="blogSlug" placeholder="my-awesome-blog-post" style="width: 100%;">
                    </div>
                    
                    <div class="form-group">
                        <label>Summary:</label>
                        <input type="text" id="blogSummary" placeholder="A brief description..." style="width: 100%;">
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div class="form-group">
                            <label>Date:</label>
                            <input type="date" id="blogDate" style="width: 100%;">
                        </div>
                        <div class="form-group">
                            <label>Status:</label>
                            <select id="blogStatus" style="width: 100%; padding: 12px; background: rgba(20, 0, 0, 0.4); border: 2px solid rgba(204, 0, 0, 0.3); border-radius: 10px; color: #fff;">
                                <option value="draft">Draft</option>
                                <option value="published">Published</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Tags (comma-separated):</label>
                        <input type="text" id="blogTags" placeholder="arduino, electronics, tutorial" style="width: 100%;">
                    </div>
                    
                    <div class="form-group">
                        <label>Cover Image (path):</label>
                        <input type="text" id="blogCover" placeholder="images/blog/my-post.jpg" style="width: 100%;">
                    </div>
                    
                    <div class="form-group">
                        <label>Content (Markdown with formatting toolbar):</label>
                        <div style="background: rgba(20, 0, 0, 0.4); border: 2px solid rgba(204, 0, 0, 0.3); border-radius: 10px; padding: 10px; margin-bottom: 10px;">
                            <button type="button" class="btn-secondary" style="padding: 6px 12px; margin: 2px;" onclick="insertMarkdown('# ', '')">H1</button>
                            <button type="button" class="btn-secondary" style="padding: 6px 12px; margin: 2px;" onclick="insertMarkdown('## ', '')">H2</button>
                            <button type="button" class="btn-secondary" style="padding: 6px 12px; margin: 2px;" onclick="insertMarkdown('### ', '')">H3</button>
                            <button type="button" class="btn-secondary" style="padding: 6px 12px; margin: 2px;" onclick="insertMarkdown('**', '**')"><b>Bold</b></button>
                            <button type="button" class="btn-secondary" style="padding: 6px 12px; margin: 2px;" onclick="insertMarkdown('*', '*')"><i>Italic</i></button>
                            <button type="button" class="btn-secondary" style="padding: 6px 12px; margin: 2px;" onclick="insertMarkdown('`', '`')">Code</button>
                            <button type="button" class="btn-secondary" style="padding: 6px 12px; margin: 2px;" onclick="insertMarkdown('[', '](url)')">Link</button>
                            <button type="button" class="btn-secondary" style="padding: 6px 12px; margin: 2px;" onclick="insertMarkdown('- ', '')">List</button>
                            <button type="button" class="btn-secondary" style="padding: 6px 12px; margin: 2px;" onclick="insertMarkdown('\n```\n', '\n```\n')">Code Block</button>
                        </div>
                        <textarea id="blogContent" style="width: 100%; min-height: 300px; font-family: 'Courier New', monospace; padding: 12px; background: rgba(20, 0, 0, 0.4); border: 2px solid rgba(204, 0, 0, 0.3); border-radius: 10px; color: #fff; resize: vertical;" placeholder="Write your post content here...

# Example Heading

This is a paragraph with **bold** and *italic* text.

## Subheading

- List item 1
- List item 2

```javascript
console.log('Code example');
```

[Link text](https://example.com)"></textarea>
                    </div>
                </div>
                
                <!-- Right: Live Preview -->
                <div>
                    <h3 style="color: #cc0000; margin-bottom: 15px;">üëÅÔ∏è Live Preview</h3>
                    <div id="blogPreview" style="background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(204, 0, 0, 0.3); border-radius: 10px; padding: 20px; min-height: 500px; overflow-y: auto; max-height: calc(90vh - 200px);">
                        <p style="color: rgba(255, 255, 255, 0.5);">Start typing to see live preview...</p>
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 20px; padding-top: 20px; border-top: 2px solid rgba(204, 0, 0, 0.3);">
                <button class="btn btn-primary" onclick="generateBlogPost()">üìÑ Generate Post Files</button>
                <button class="btn btn-secondary" onclick="loadExistingBlogPosts()">üîÑ Load Posts</button>
                <button class="btn btn-secondary" onclick="clearBlogForm()">üóëÔ∏è Clear</button>
                <button class="btn btn-secondary" onclick="closeBlogManager()">‚ùå Close</button>
            </div>
            
            <div class="success-msg" id="blogSuccessMsg"></div>
            <div class="error-msg" id="blogErrorMsg"></div>
            
            <div id="blogOutput" style="display: none; margin-top: 20px; padding: 20px; background: rgba(0, 200, 0, 0.1); border: 2px solid rgba(0, 200, 0, 0.3); border-radius: 10px; max-height: 300px; overflow-y: auto;">
                <h4 style="color: #00ff00; margin-bottom: 10px;">‚úÖ Generated Files</h4>
                <pre id="blogOutputContent" style="color: rgba(255, 255, 255, 0.8); white-space: pre-wrap; word-break: break-word; font-size: 0.85rem;"></pre>
            </div>
            
            <div id="blogPostsList" style="margin-top: 20px; display: none;">
                <h3 style="color: #cc0000; margin-bottom: 15px;">üìã Existing Posts</h3>
                <div id="postsContainer"></div>
            </div>
        </div>
    </div>

    <!-- Security Settings Modal -->
    <div class="modal" id="securityModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üîí Security Settings</h2>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>

            <h3 style="color: #cc0000; margin-bottom: 15px;">Change Primary Password</h3>
            <div class="form-group">
                <label>Current Primary Password:</label>
                <input type="password" id="currentPrimary" placeholder="Enter current password">
            </div>
            <div class="form-group">
                <label>New Primary Password:</label>
                <input type="password" id="newPrimary" placeholder="Enter new password (min 6 characters)">
            </div>
            <div class="form-group">
                <label>Confirm New Primary Password:</label>
                <input type="password" id="confirmPrimary" placeholder="Confirm new password">
            </div>

            <hr style="border: 1px solid rgba(204, 0, 0, 0.2); margin: 30px 0;">

            <h3 style="color: #cc0000; margin-bottom: 15px;">Change Secondary Password</h3>
            <div class="form-group">
                <label>Current Secondary Password:</label>
                <input type="password" id="currentSecondary" placeholder="Enter current password">
            </div>
            <div class="form-group">
                <label>New Secondary Password:</label>
                <input type="password" id="newSecondary" placeholder="Enter new password (min 6 characters)">
            </div>
            <div class="form-group">
                <label>Confirm New Secondary Password:</label>
                <input type="password" id="confirmSecondary" placeholder="Confirm new password">
            </div>

            <div style="margin-top: 25px;">
                <button class="btn btn-primary" id="savePrimaryBtn">Save Primary Password</button>
                <button class="btn btn-primary" id="saveSecondaryBtn">Save Secondary Password</button>
                <button class="btn btn-secondary" id="cancelBtn">Cancel</button>
            </div>

            <div class="success-msg" id="successMsg"></div>
            <div class="error-msg" id="errorMsg"></div>

            <div style="margin-top: 30px; padding: 15px; background: rgba(204, 0, 0, 0.1); border-radius: 10px;">
                <h4 style="color: #cc0000; margin-bottom: 10px;">üîê Password Reset Guide</h4>
                <p style="color: rgba(255, 255, 255, 0.7); font-size: 0.85rem; line-height: 1.6;">
                    If you forget your password, open Browser Console (F12) and run:<br>
                    <code style="background: rgba(0,0,0,0.3); padding: 5px 10px; border-radius: 5px; display: inline-block; margin-top: 5px;">
                        localStorage.clear(); location.reload();
                    </code>
                </p>
            </div>
        </div>
    </div>

    <!-- 3D Model Upload Modal -->
    <div class="modal" id="uploadModelModal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2 class="modal-title">üéØ Upload 3D Model to SOLIDWORKS Projects</h2>
                <button class="close-btn" id="closeUploadModal">&times;</button>
            </div>

            <div style="background: rgba(204, 0, 0, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                <h4 style="color: #cc0000; margin-bottom: 8px;">üìã How It Works:</h4>
                <ul style="color: rgba(255, 255, 255, 0.7); font-size: 0.85rem; line-height: 1.8; padding-left: 20px;">
                    <li>Export your SOLIDWORKS model as <strong>GLB</strong> or <strong>GLTF</strong> format</li>
                    <li>Select project type (CW/HW/Solo) and fill in details</li>
                    <li>Upload GLB file ‚Üí Auto-uploaded to GitHub repo</li>
                    <li><strong>View 3D</strong> button automatically appears on mobile pages!</li>
                </ul>
            </div>

            <div class="form-group">
                <label>Project Type:</label>
                <select id="uploadProjectType" style="width: 100%; padding: 12px 18px; background: rgba(20, 0, 0, 0.4); border: 2px solid rgba(204, 0, 0, 0.3); border-radius: 10px; color: #fff; font-size: 1rem;">
                    <option value="CW">Class Work (CW)</option>
                    <option value="HW">Home Work (HW)</option>
                    <option value="Solo">Solo Projects</option>
                </select>
            </div>

            <div id="cwHwFields">
                <div class="form-group">
                    <label>Day Number:</label>
                    <input type="number" id="uploadDay" placeholder="e.g., 6" min="1" max="99">
                </div>
                <div class="form-group">
                    <label>Work Number:</label>
                    <input type="number" id="uploadNumber" placeholder="e.g., 1" min="1" max="99">
                </div>
            </div>

            <div id="soloFields" style="display: none;">
                <div class="form-group">
                    <label>Project Name:</label>
                    <input type="text" id="uploadProjectName" placeholder="e.g., Robotic Arm">
                </div>
            </div>

            <div class="form-group">
                <label>3D Model File (GLB/GLTF):</label>
                <input type="file" id="uploadGLBFile" accept=".glb,.gltf" style="width: 100%; padding: 12px 18px; background: rgba(20, 0, 0, 0.4); border: 2px solid rgba(204, 0, 0, 0.3); border-radius: 10px; color: #fff; font-size: 1rem;">
                <small style="color: rgba(255, 255, 255, 0.5); display: block; margin-top: 5px;">Recommended: GLB format (smaller file size, better performance)</small>
            </div>

            <div class="form-group">
                <label>Backend API Connection:</label>
                <div style="background: rgba(0, 0, 0, 0.2); padding: 15px; border-radius: 10px; border: 2px solid rgba(204, 0, 0, 0.3);">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <div id="apiStatusIndicator" style="width: 12px; height: 12px; border-radius: 50%; background: #999;"></div>
                        <span id="apiStatusText" style="color: rgba(255, 255, 255, 0.8); font-weight: 600;">Checking...</span>
                    </div>
                    <div style="font-size: 0.85rem; color: rgba(255, 255, 255, 0.6); line-height: 1.6;">
                        <div id="apiDetails">
                            <div style="display: flex; justify-content: space-between; margin: 4px 0;">
                                <span>Tokens Active:</span>
                                <span id="apiTokenCount">-</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin: 4px 0;">
                                <span>Rate Limit:</span>
                                <span id="apiRateLimit">-</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin: 4px 0;">
                                <span>Backend URL:</span>
                                <span id="apiBackendUrl" style="font-family: monospace; font-size: 0.75rem;">-</span>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary" onclick="checkBackendConnection()" style="margin-top: 10px; width: 100%;">
                        <i class="fas fa-sync-alt"></i> Refresh Status
                    </button>
                    <small style="color: rgba(255, 255, 255, 0.5); display: block; margin-top: 10px; text-align: center;">
                        Tokens managed via <a href="backend-token-manager.html" target="_blank" style="color: #cc0000;">Backend Manager</a>
                    </small>
                </div>
            </div>

            <div style="margin-top: 25px;">
                <button class="btn btn-primary" id="uploadModelBtn">
                    <i class="fas fa-upload"></i> Upload 3D Model
                </button>
                <button class="btn btn-secondary" id="cancelUploadBtn">Cancel</button>
            </div>

            <div id="uploadProgress" style="display: none; margin-top: 20px;">
                <div style="background: rgba(0, 0, 0, 0.3); border-radius: 10px; padding: 15px;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <i class="fas fa-spinner fa-spin" style="color: #cc0000; font-size: 1.2rem;"></i>
                        <span id="uploadStatusText" style="color: rgba(255, 255, 255, 0.8);">Uploading...</span>
                    </div>
                    <div style="background: rgba(255, 255, 255, 0.1); height: 8px; border-radius: 4px; overflow: hidden;">
                        <div id="uploadProgressBar" style="background: linear-gradient(90deg, #cc0000, #ff4444); height: 100%; width: 0%; transition: width 0.3s;"></div>
                    </div>
                </div>
            </div>

            <div class="success-msg" id="uploadSuccessMsg"></div>
            <div class="error-msg" id="uploadErrorMsg"></div>

            <div style="margin-top: 30px; padding: 15px; background: rgba(204, 0, 0, 0.1); border-radius: 10px;">
                <h4 style="color: #cc0000; margin-bottom: 10px;">üí° SOLIDWORKS to GLB Conversion:</h4>
                <ul style="color: rgba(255, 255, 255, 0.7); font-size: 0.85rem; line-height: 1.8; padding-left: 20px;">
                    <li><strong>Method 1:</strong> Use SOLIDWORKS add-in or export plugin (if available)</li>
                    <li><strong>Method 2:</strong> Upload SLDPRT to <a href="https://www.tinyglb.com/" target="_blank" style="color: #cc0000;">TinyGLB</a> or <a href="https://www.clooned.com/" target="_blank" style="color: #cc0000;">Clooned</a> ‚Üí Get GLB URL</li>
                    <li><strong>Method 3:</strong> Use third-party converter (Aspose, FreeCAD, Sketchfab)</li>
                    <li><strong>File Size:</strong> Keep under 5 MB for best mobile performance</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="github-uploader.js"></script>
    <script src="only-boss-dashboard.js"></script>
    <script>
    // 3D Model Upload Modal Logic
    document.addEventListener('DOMContentLoaded', function() {
        const uploadModelCard = document.getElementById('uploadModelCard');
        const uploadModelModal = document.getElementById('uploadModelModal');
        const closeUploadModal = document.getElementById('closeUploadModal');
        const cancelUploadBtn = document.getElementById('cancelUploadBtn');
        const uploadProjectType = document.getElementById('uploadProjectType');
        const cwHwFields = document.getElementById('cwHwFields');
        const soloFields = document.getElementById('soloFields');
        const uploadModelBtn = document.getElementById('uploadModelBtn');
        const uploadProgress = document.getElementById('uploadProgress');
        const uploadSuccessMsg = document.getElementById('uploadSuccessMsg');
        const uploadErrorMsg = document.getElementById('uploadErrorMsg');
        
        // Backend API configuration
        const BACKEND_URL = 'http://localhost:5000';
        let backendToken = null;
        let backendAvailable = false;

        // Backend connection check
        async function checkBackendConnection() {
            const indicator = document.getElementById('apiStatusIndicator');
            const statusText = document.getElementById('apiStatusText');
            const tokenCount = document.getElementById('apiTokenCount');
            const rateLimit = document.getElementById('apiRateLimit');
            const backendUrl = document.getElementById('apiBackendUrl');
            
            indicator.style.background = '#ffc107';
            statusText.textContent = 'Checking...';
            
            try {
                const response = await fetch(`${BACKEND_URL}/health`, {
                    method: 'GET',
                    mode: 'cors'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    indicator.style.background = '#00cc00';
                    statusText.textContent = '‚úÖ Connected';
                    tokenCount.textContent = data.tokens_active ? `${data.tokens_configured || 0} tokens` : 'Not loaded';
                    rateLimit.textContent = data.effective_limit || '60/hour';
                    backendUrl.textContent = BACKEND_URL;
                    backendAvailable = true;
                    backendToken = 'BACKEND_MANAGED'; // Flag to use backend
                } else {
                    throw new Error('Backend responded with error');
                }
            } catch (error) {
                indicator.style.background = '#dc3545';
                statusText.textContent = '‚ùå Offline';
                tokenCount.textContent = 'N/A';
                rateLimit.textContent = 'N/A';
                backendUrl.textContent = BACKEND_URL + ' (not reachable)';
                backendAvailable = false;
                backendToken = null;
                
                showError('Backend not connected. Start server: cd "Backend projects" ‚Üí python secure-proxy-server.py');
            }
        }
        
        // Open modal
        if (uploadModelCard) {
            uploadModelCard.addEventListener('click', function() {
                uploadModelModal.classList.add('active');
                checkBackendConnection();
            });
        }

        // Close modal
        if (closeUploadModal) {
            closeUploadModal.addEventListener('click', function() {
                uploadModelModal.classList.remove('active');
                resetUploadForm();
            });
        }

        if (cancelUploadBtn) {
            cancelUploadBtn.addEventListener('click', function() {
                uploadModelModal.classList.remove('active');
                resetUploadForm();
            });
        }

        // Toggle fields based on project type
        if (uploadProjectType) {
            uploadProjectType.addEventListener('change', function() {
                if (this.value === 'Solo') {
                    cwHwFields.style.display = 'none';
                    soloFields.style.display = 'block';
                } else {
                    cwHwFields.style.display = 'block';
                    soloFields.style.display = 'none';
                }
            });
        }

        // Upload button handler
        if (uploadModelBtn) {
            uploadModelBtn.addEventListener('click', async function() {
                uploadSuccessMsg.style.display = 'none';
                uploadErrorMsg.style.display = 'none';

                const projectType = uploadProjectType.value;
                const glbFile = document.getElementById('uploadGLBFile').files[0];

                // Validation
                if (!glbFile) {
                    showError('Please select a GLB/GLTF file');
                    return;
                }

                // Validate file size (100 MB GitHub limit)
                const maxSize = 100 * 1024 * 1024; // 100 MB
                if (glbFile.size > maxSize) {
                    showError(`File too large: ${(glbFile.size / 1024 / 1024).toFixed(2)} MB. Maximum allowed: 100 MB`);
                    return;
                }

                // Check backend connection
                if (!backendAvailable || !backendToken) {
                    showError('Backend API not connected. Please check connection status and try again.');
                    return;
                }

                let folderPath;
                let projectName;

                if (projectType === 'Solo') {
                    projectName = document.getElementById('uploadProjectName').value.trim();
                    if (!projectName) {
                        showError('Please enter a project name');
                        return;
                    }
                    // Validate project name
                    const validNameRegex = /^[a-zA-Z0-9_-]+(\s+[a-zA-Z0-9_-]+)*$/;
                    if (!validNameRegex.test(projectName)) {
                        showError('Invalid project name. Use only letters, numbers, spaces, dash, or underscore');
                        return;
                    }
                    folderPath = `Solo/${projectName}`;
                } else {
                    const day = document.getElementById('uploadDay').value;
                    const number = document.getElementById('uploadNumber').value;

                    if (!day || !number) {
                        showError('Please enter day and work number');
                        return;
                    }

                    // Validate numbers
                    if (day < 1 || day > 99 || number < 1 || number > 99) {
                        showError('Day and work number must be between 1 and 99');
                        return;
                    }

                    // Use GitHubUploader format: CW/Day 06/cw 01 day 6
                    const dayStr = String(day).padStart(2, '0');
                    const numStr = String(number).padStart(2, '0');
                    const workType = projectType.toLowerCase();
                    folderPath = `${projectType}/Day ${dayStr}/${workType} ${numStr} day ${day}`;
                    projectName = `${projectType} ${number} - Day ${day}`;
                }

                try {
                    // Show progress
                    uploadProgress.style.display = 'block';
                    uploadModelBtn.disabled = true;
                    updateProgress(10, 'Validating token...');

                    // Create GitHubUploader instance (token managed by backend)
                    const uploader = new GitHubUploader('Akhinoor14', 'SOLIDWORKS-Projects', backendToken);
                    uploader.useBackendProxy = true;
                    uploader.backendUrl = BACKEND_URL;

                    // Validate token
                    updateProgress(20, 'Checking repository access...');
                    const isValid = await uploader.validateAccess();
                    if (!isValid) {
                        throw new Error('Invalid token or no repository access');
                    }

                    // Generate proper filename based on project type
                    updateProgress(30, 'Preparing file...');
                    const fileExt = glbFile.name.split('.').pop();
                    let newFileName;
                    
                    if (projectType === 'Solo') {
                        // Solo: projectname.glb (e.g., robotic-arm.glb)
                        newFileName = `${projectName.toLowerCase().replace(/\s+/g, '-')}.${fileExt}`;
                    } else {
                        // CW/HW: type-number-day.glb (e.g., cw-01-day-6.glb)
                        const numStr = String(number).padStart(2, '0');
                        newFileName = `${projectType.toLowerCase()}-${numStr}-day-${day}.${fileExt}`;
                    }

                    // Check if file already exists
                    updateProgress(35, 'Checking for existing files...');
                    try {
                        const checkPath = `${folderPath}/${newFileName}`;
                        const existingFile = await fetch(
                            `https://api.github.com/repos/Akhinoor14/SOLIDWORKS-Projects/contents/${checkPath}`,
                            {
                                headers: {
                                    'Authorization': `token ${gitToken}`,
                                    'Accept': 'application/vnd.github.v3+json'
                                }
                            }
                        );
                        
                        if (existingFile.ok) {
                            const proceed = confirm(`‚ö†Ô∏è File "${newFileName}" already exists in ${folderPath}.\n\nDo you want to overwrite it?`);
                            if (!proceed) {
                                uploadProgress.style.display = 'none';
                                uploadModelBtn.disabled = false;
                                return;
                            }
                        }
                    } catch (e) {
                        // 404 means file doesn't exist - that's fine
                    }

                    // Upload GLB file with proper name
                    updateProgress(45, `Uploading ${newFileName}...`);
                    const fileContent = await readFileAsBase64(glbFile);
                    const glbPath = `${folderPath}/${newFileName}`;
                    
                    await uploader.uploadFile(glbPath, fileContent, `Add 3D model: ${newFileName}`);
                    updateProgress(75, 'Creating README...');

                    // Generate README
                    const readmePath = `${folderPath}/README.md`;
                    const readmeContent = generateREADME(projectName, newFileName, projectType, folderPath, glbFile.size);
                    await uploader.uploadTextFile(readmePath, readmeContent, 'Add/update README with 3D model info');

                    updateProgress(100, 'Upload complete!');

                    // Save token on successful upload
                    localStorage.setItem('dashboard_github_token', gitToken);

                    // Success
                    setTimeout(() => {
                        showSuccess(`‚úÖ Successfully uploaded as "${newFileName}" to ${folderPath}!\n\nThe "View 3D" button will appear automatically on mobile pages.`);
                        uploadProgress.style.display = 'none';
                        uploadModelBtn.disabled = false;
                        resetUploadForm();
                    }, 1000);

                } catch (error) {
                    console.error('Upload error:', error);
                    
                    let errorMsg = 'Upload failed: ';
                    if (!navigator.onLine) {
                        errorMsg += 'No internet connection. Please check your network.';
                    } else if (error.message.includes('token') || error.message.includes('401')) {
                        errorMsg += 'Invalid GitHub token. Please check your token and try again.';
                    } else if (error.message.includes('404')) {
                        errorMsg += 'Repository not found. Please verify repository name.';
                    } else if (error.message.includes('403')) {
                        errorMsg += 'Access denied. Please check token permissions (repo scope required).';
                    } else {
                        errorMsg += error.message;
                    }
                    
                    showError(errorMsg);
                    uploadProgress.style.display = 'none';
                    uploadModelBtn.disabled = false;
                }
            });
        }

        function updateProgress(percent, text) {
            document.getElementById('uploadProgressBar').style.width = percent + '%';
            document.getElementById('uploadStatusText').textContent = text;
        }

        function showSuccess(message) {
            uploadSuccessMsg.textContent = message;
            uploadSuccessMsg.style.display = 'block';
            setTimeout(() => {
                uploadSuccessMsg.style.display = 'none';
            }, 8000);
        }

        function showError(message) {
            uploadErrorMsg.textContent = message;
            uploadErrorMsg.style.display = 'block';
            setTimeout(() => {
                uploadErrorMsg.style.display = 'none';
            }, 6000);
        }

        // Check backend on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Auto-check backend when upload card exists
            const uploadCard = document.getElementById('uploadModelCard');
            if (uploadCard) {
                setTimeout(checkBackendConnection, 500);
            }
        });

        function resetUploadForm() {
            document.getElementById('uploadGLBFile').value = '';
            document.getElementById('uploadDay').value = '';
            document.getElementById('uploadNumber').value = '';
            document.getElementById('uploadProjectName').value = '';
            uploadProgress.style.display = 'none';
            uploadSuccessMsg.style.display = 'none';
            uploadErrorMsg.style.display = 'none';
        }

        function readFileAsBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => {
                    const base64 = reader.result.split(',')[1];
                    resolve(base64);
                };
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        function generateREADME(projectName, fileName, projectType, folderPath, fileSize) {
            const date = new Date().toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            const sizeMB = fileSize ? (fileSize / (1024 * 1024)).toFixed(2) : 'N/A';
            
            return `# ${projectName}

**Project Type:** ${projectType}  
**Upload Date:** ${date}  
**Location:** \`${folderPath}\`  
**Status:** ‚úÖ Complete

## üì¶ Files

### 3D Model
- **Filename:** \`${fileName}\`
- **Format:** ${fileName.endsWith('.glb') ? 'GLB (Binary glTF)' : 'GLTF (JSON glTF)'}
- **Size:** ${sizeMB} MB
- **Features:**
  - ‚úÖ Interactive 3D viewer on mobile
  - ‚úÖ AR support (Android/iOS)
  - ‚úÖ Camera controls (rotate, zoom, pan)
  - ‚úÖ Full-screen immersive mode

## üéØ Viewer Features

- **Renderer:** Google Model Viewer (WebGL)
- **Mobile:** Touch-optimized controls
- **Desktop:** Mouse/trackpad support  
- **AR Mode:** WebXR (Android) + Quick Look (iOS)
- **Performance:** Auto-optimized, lazy-loaded

## üì± How to View

1. **Open mobile page:**
   - CW ‚Üí Class Work ‚Üí Expand day
   - HW ‚Üí Home Work ‚Üí Expand day
   - Solo ‚Üí Solo Projects ‚Üí Find project
2. **Look for cube icon** (üéØ)
3. **Tap to open** 3D viewer
4. **Interact:**
   - Drag to rotate
   - Pinch to zoom
   - Two fingers to pan
5. **Try AR mode** on compatible devices!

## üõ†Ô∏è Technical Details

- **Repository:** [SOLIDWORKS-Projects](https://github.com/Akhinoor14/SOLIDWORKS-Projects)
- **Full Path:** \`${folderPath}/${fileName}\`
- **Auto-Detection:** ‚úÖ Enabled
- **Caching:** Service worker optimized
- **CDN:** GitHub raw content delivery

---

**Uploaded via:** A3KM Studio Only Boss Dashboard  
**System:** Automated 3D Model Pipeline v2.0  
**Date:** ${date}
`;
        }

        // ==================== Blog Manager Functions ====================
        
        function openBlogManager() {
            document.getElementById('blogModal').style.display = 'flex';
            // Set today's date as default
            document.getElementById('blogDate').valueAsDate = new Date();
            // Auto-generate slug when title changes
            document.getElementById('blogTitle').addEventListener('input', autoGenerateSlug);
            // Live preview on content change
            document.getElementById('blogContent').addEventListener('input', updateBlogPreview);
        }
        
        function closeBlogManager() {
            document.getElementById('blogModal').style.display = 'none';
            clearBlogForm();
        }
        
        function autoGenerateSlug() {
            const title = document.getElementById('blogTitle').value;
            const slug = title.toLowerCase()
                .replace(/[^a-z0-9\s-]/g, '')
                .replace(/\s+/g, '-')
                .replace(/-+/g, '-')
                .trim();
            document.getElementById('blogSlug').value = slug;
        }
        
        function insertMarkdown(before, after) {
            const textarea = document.getElementById('blogContent');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const selectedText = textarea.value.substring(start, end);
            const newText = before + selectedText + after;
            
            textarea.value = textarea.value.substring(0, start) + newText + textarea.value.substring(end);
            
            // Update cursor position
            const newCursorPos = start + before.length + selectedText.length;
            textarea.selectionStart = textarea.selectionEnd = newCursorPos;
            textarea.focus();
            
            // Update preview
            updateBlogPreview();
        }
        
        function updateBlogPreview() {
            const content = document.getElementById('blogContent').value;
            const preview = document.getElementById('blogPreview');
            
            if (!content.trim()) {
                preview.innerHTML = '<p style="color: rgba(255, 255, 255, 0.5);">Start typing to see live preview...</p>';
                return;
            }
            
            // Simple Markdown to HTML converter (same as blog.js)
            let html = content
                // Code blocks
                .replace(/```(\w+)?\n([\s\S]*?)```/g, '<pre><code>$2</code></pre>')
                // Headings
                .replace(/^### (.*$)/gim, '<h3>$1</h3>')
                .replace(/^## (.*$)/gim, '<h2>$1</h2>')
                .replace(/^# (.*$)/gim, '<h1>$1</h1>')
                // Bold
                .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
                // Italic
                .replace(/\*(.+?)\*/g, '<em>$1</em>')
                // Inline code
                .replace(/`(.+?)`/g, '<code>$1</code>')
                // Links
                .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>')
                // Images
                .replace(/!\[([^\]]*)\]\(([^)]+)\)/g, '<img src="$2" alt="$1" style="max-width: 100%; height: auto; border-radius: 8px;">')
                // Lists
                .replace(/^\- (.+)$/gim, '<li>$1</li>')
                .replace(/(<li>.*<\/li>)/s, '<ul>$1</ul>')
                // Line breaks
                .replace(/\n\n/g, '</p><p>')
                .replace(/^(?!<[hup])/gim, '<p>')
                .replace(/(?!>)$/gim, '</p>');
            
            preview.innerHTML = html;
        }
        
        function generateBlogPost() {
            // Get form values
            const title = document.getElementById('blogTitle').value.trim();
            const slug = document.getElementById('blogSlug').value.trim();
            const summary = document.getElementById('blogSummary').value.trim();
            const date = document.getElementById('blogDate').value;
            const tags = document.getElementById('blogTags').value.split(',').map(t => t.trim()).filter(t => t);
            const cover = document.getElementById('blogCover').value.trim();
            const status = document.getElementById('blogStatus').value;
            const content = document.getElementById('blogContent').value.trim();
            
            // Validate
            if (!title || !slug || !content) {
                showBlogError('‚ùå Please fill in Title, Slug, and Content!');
                return;
            }
            
            // Generate Markdown file with front matter
            const markdown = `---
title: "${title}"
date: ${date}
tags: [${tags.map(t => `"${t}"`).join(', ')}]
summary: "${summary}"
coverImage: "${cover || 'images/blog/default-cover.svg'}"
status: ${status}
---

${content}`;
            
            // Generate JSON entry for posts.json
            const jsonEntry = {
                id: Date.now(), // Use timestamp as unique ID
                slug: slug,
                title: title,
                summary: summary,
                date: date,
                tags: tags,
                coverImage: cover || 'images/blog/default-cover.svg',
                status: status
            };
            
            // Show output
            const output = `
üìÑ MARKDOWN FILE (Save as: content/blog/posts/${slug}.md)
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
${markdown}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üìã JSON ENTRY (Add to content/blog/posts.json array)
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
${JSON.stringify(jsonEntry, null, 2)}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üìù INSTRUCTIONS:
1. Copy the MARKDOWN content above
2. Create new file: content/blog/posts/${slug}.md
3. Paste the Markdown content
4. Copy the JSON ENTRY
5. Open content/blog/posts.json
6. Add the JSON object to the array (remember commas!)
7. Commit and push to GitHub

‚úÖ Your blog post "${title}" is ready!
            `.trim();
            
            document.getElementById('blogOutputContent').textContent = output;
            document.getElementById('blogOutput').style.display = 'block';
            showBlogSuccess('‚úÖ Blog post files generated! Scroll down to copy.');
        }
        
        function loadExistingBlogPosts() {
            fetch('content/blog/posts.json')
                .then(r => r.json())
                .then(posts => {
                    const container = document.getElementById('postsContainer');
                    const postsList = document.getElementById('blogPostsList');
                    
                    if (!posts || posts.length === 0) {
                        container.innerHTML = '<p style="color: rgba(255, 255, 255, 0.5);">No posts found.</p>';
                        postsList.style.display = 'block';
                        return;
                    }
                    
                    const html = posts.map(post => `
                        <div style="background: rgba(20, 0, 0, 0.4); border: 2px solid rgba(204, 0, 0, 0.3); border-radius: 10px; padding: 15px; margin-bottom: 10px;">
                            <h4 style="color: #cc0000; margin: 0 0 5px 0;">${post.title}</h4>
                            <p style="color: rgba(255, 255, 255, 0.7); font-size: 0.9rem; margin: 5px 0;">
                                üìÖ ${post.date} | üè∑Ô∏è ${post.tags.join(', ')} | üìä ${post.status}
                            </p>
                            <p style="color: rgba(255, 255, 255, 0.6); font-size: 0.85rem;">${post.summary}</p>
                            <button class="btn-secondary" style="padding: 6px 12px; font-size: 0.85rem;" onclick="editBlogPost('${post.slug}')">‚úèÔ∏è Edit</button>
                        </div>
                    `).join('');
                    
                    container.innerHTML = html;
                    postsList.style.display = 'block';
                })
                .catch(err => {
                    showBlogError('‚ùå Error loading posts: ' + err.message);
                });
        }
        
        function editBlogPost(slug) {
            // Load the markdown file
            fetch(`content/blog/posts/${slug}.md`)
                .then(r => r.text())
                .then(markdown => {
                    // Parse front matter
                    const frontMatterMatch = markdown.match(/^---\n([\s\S]*?)\n---\n([\s\S]*)$/);
                    if (!frontMatterMatch) {
                        showBlogError('‚ùå Invalid post format');
                        return;
                    }
                    
                    const frontMatter = frontMatterMatch[1];
                    const content = frontMatterMatch[2].trim();
                    
                    // Parse front matter fields
                    const title = frontMatter.match(/title:\s*"(.+?)"/)?.[1] || '';
                    const date = frontMatter.match(/date:\s*(.+)/)?.[1] || '';
                    const tags = frontMatter.match(/tags:\s*\[(.*?)\]/)?.[1]
                        .split(',')
                        .map(t => t.replace(/"/g, '').trim())
                        .join(', ') || '';
                    const summary = frontMatter.match(/summary:\s*"(.+?)"/)?.[1] || '';
                    const cover = frontMatter.match(/coverImage:\s*"(.+?)"/)?.[1] || '';
                    const status = frontMatter.match(/status:\s*(.+)/)?.[1] || 'draft';
                    
                    // Fill form
                    document.getElementById('blogTitle').value = title;
                    document.getElementById('blogSlug').value = slug;
                    document.getElementById('blogSummary').value = summary;
                    document.getElementById('blogDate').value = date;
                    document.getElementById('blogTags').value = tags;
                    document.getElementById('blogCover').value = cover;
                    document.getElementById('blogStatus').value = status;
                    document.getElementById('blogContent').value = content;
                    
                    // Update preview
                    updateBlogPreview();
                    
                    // Hide posts list
                    document.getElementById('blogPostsList').style.display = 'none';
                    
                    showBlogSuccess('‚úÖ Post loaded for editing!');
                })
                .catch(err => {
                    showBlogError('‚ùå Error loading post: ' + err.message);
                });
        }
        
        function clearBlogForm() {
            document.getElementById('blogTitle').value = '';
            document.getElementById('blogSlug').value = '';
            document.getElementById('blogSummary').value = '';
            document.getElementById('blogDate').valueAsDate = new Date();
            document.getElementById('blogTags').value = '';
            document.getElementById('blogCover').value = '';
            document.getElementById('blogStatus').value = 'draft';
            document.getElementById('blogContent').value = '';
            document.getElementById('blogPreview').innerHTML = '<p style="color: rgba(255, 255, 255, 0.5);">Start typing to see live preview...</p>';
            document.getElementById('blogOutput').style.display = 'none';
            document.getElementById('blogPostsList').style.display = 'none';
            document.getElementById('blogSuccessMsg').style.display = 'none';
            document.getElementById('blogErrorMsg').style.display = 'none';
        }
        
        function showBlogSuccess(msg) {
            const el = document.getElementById('blogSuccessMsg');
            el.textContent = msg;
            el.style.display = 'block';
            setTimeout(() => el.style.display = 'none', 5000);
        }
        
        function showBlogError(msg) {
            const el = document.getElementById('blogErrorMsg');
            el.textContent = msg;
            el.style.display = 'block';
            setTimeout(() => el.style.display = 'none', 5000);
        }
        
        // ==================== End Blog Manager ====================

        // Dashboard logout button logic
        var logoutBtn = document.getElementById('dashboardLogoutBtn');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', function() {
                sessionStorage.removeItem('bossAuth');
                localStorage.removeItem('bossAuth');
                window.location.href = 'only-boss.html';
            });
        }
    });
    </script>
    </body>
    </html>
