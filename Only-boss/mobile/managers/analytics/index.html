<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <!-- PWA Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#2196F3">
    
    <title>Analytics - Only Boss</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="manager.css">
</head>
<body>
    <!-- Fixed Header -->
    <header class="analytics-header">
        <button class="back-btn" onclick="goBack()">
            <i class="fas fa-arrow-left"></i>
        </button>
        <div class="header-title">
            <h1>Analytics</h1>
            <span class="subtitle">Usage insights & statistics</span>
        </div>
        <button class="export-btn" onclick="exportAnalytics()">
            <i class="fas fa-download"></i>
        </button>
    </header>

    <!-- Time Range Selector -->
    <div class="time-range-selector">
        <button class="range-btn active" data-range="today" onclick="selectRange('today')">Today</button>
        <button class="range-btn" data-range="week" onclick="selectRange('week')">Week</button>
        <button class="range-btn" data-range="month" onclick="selectRange('month')">Month</button>
        <button class="range-btn" data-range="all" onclick="selectRange('all')">All Time</button>
    </div>

    <!-- Overview Stats -->
    <div class="stats-overview">
        <div class="stat-card primary">
            <div class="stat-icon">
                <i class="fas fa-eye"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value" id="totalViews">0</div>
                <div class="stat-label">Total Views</div>
            </div>
        </div>
        
        <div class="stat-card success">
            <div class="stat-icon">
                <i class="fas fa-folder-open"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value" id="managersUsed">0</div>
                <div class="stat-label">Managers Used</div>
            </div>
        </div>
        
        <div class="stat-card warning">
            <div class="stat-icon">
                <i class="fas fa-clock"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value" id="totalTime">0h</div>
                <div class="stat-label">Time Spent</div>
            </div>
        </div>
        
        <div class="stat-card danger">
            <div class="stat-icon">
                <i class="fas fa-download"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value" id="totalDownloads">0</div>
                <div class="stat-label">Downloads</div>
            </div>
        </div>
    </div>

    <!-- Manager Usage Chart -->
    <div class="chart-section">
        <div class="section-header">
            <h2>Manager Usage</h2>
            <span class="section-subtitle">Most accessed managers</span>
        </div>
        <div class="chart-container">
            <div class="bar-chart" id="managerChart"></div>
        </div>
    </div>

    <!-- Content Type Breakdown -->
    <div class="chart-section">
        <div class="section-header">
            <h2>Content Breakdown</h2>
            <span class="section-subtitle">By category</span>
        </div>
        <div class="content-breakdown" id="contentBreakdown"></div>
    </div>

    <!-- Activity Timeline -->
    <div class="timeline-section">
        <div class="section-header">
            <h2>Recent Activity</h2>
            <span class="section-subtitle">Last 10 actions</span>
        </div>
        <div class="activity-timeline" id="activityTimeline"></div>
        
        <div class="empty-state" id="emptyActivity">
            <i class="fas fa-chart-line"></i>
            <h3>No activity yet</h3>
            <p>Start using managers to see analytics</p>
        </div>
    </div>

    <!-- Usage by Hour Chart -->
    <div class="chart-section">
        <div class="section-header">
            <h2>Usage by Hour</h2>
            <span class="section-subtitle">Activity distribution</span>
        </div>
        <div class="hour-chart" id="hourChart"></div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <button class="action-card" onclick="clearAnalytics()">
            <i class="fas fa-trash"></i>
            <span>Clear Data</span>
        </button>
        <button class="action-card" onclick="exportAnalytics()">
            <i class="fas fa-file-export"></i>
            <span>Export CSV</span>
        </button>
        <button class="action-card" onclick="refreshAnalytics()">
            <i class="fas fa-sync-alt"></i>
            <span>Refresh</span>
        </button>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script src="../../../auth/only-boss-auth.js"></script>
    <script src="../../shared/auth-guard.js"></script>
    <script src="manager.js"></script>
</body>
</html>
