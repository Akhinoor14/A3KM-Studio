<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- Universal Mobile Optimization System -->
    <link rel="stylesheet" href="../../../Optimization/mobile-universal.css">
    <script src="../../../Optimization/mobile-universal.js" defer></script>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
    
    <title>Global Site Settings - A3KM Studio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; }
        .header { background: white; border-radius: 20px; padding: 30px; margin-bottom: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
        .header h1 { color: #333; font-size: 32px; margin-bottom: 10px; display: flex; align-items: center; gap: 15px; }
        .header p { color: #666; font-size: 16px; }
        .tabs { display: flex; gap: 10px; margin-bottom: 30px; flex-wrap: wrap; }
        .tab-btn { padding: 12px 24px; background: white; border: 2px solid #e0e0e0; border-radius: 10px; cursor: pointer; font-size: 15px; font-weight: 600; transition: all 0.3s; color: #666; }
        .tab-btn:hover { border-color: #667eea; color: #667eea; }
        .tab-btn.active { background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-color: transparent; }
        .tab-content { display: none; background: white; border-radius: 20px; padding: 40px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
        .tab-content.active { display: block; }
        .settings-section { margin-bottom: 40px; padding-bottom: 40px; border-bottom: 2px solid #f0f0f0; }
        .settings-section:last-child { border-bottom: none; }
        .settings-section h3 { color: #333; font-size: 20px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; color: #333; font-weight: 600; margin-bottom: 8px; font-size: 14px; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 14px; font-family: inherit; transition: all 0.3s; }
        .form-group input:focus, .form-group textarea:focus, .form-group select:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); }
        .form-group textarea { min-height: 100px; resize: vertical; }
        .form-group small { display: block; color: #999; font-size: 12px; margin-top: 5px; }
        .color-input-group { display: flex; gap: 10px; align-items: center; }
        .color-input-group input[type="color"] { width: 60px; height: 45px; border: 2px solid #e0e0e0; border-radius: 10px; cursor: pointer; }
        .color-input-group input[type="text"] { flex: 1; }
        .btn-group { display: flex; gap: 15px; margin-top: 30px; flex-wrap: wrap; }
        .btn { padding: 14px 28px; border: none; border-radius: 10px; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 10px; }
        .btn-primary { background: linear-gradient(135deg, #667eea, #764ba2); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4); }
        .btn-secondary { background: white; color: #667eea; border: 2px solid #667eea; }
        .btn-secondary:hover { background: #667eea; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-success:hover { background: #218838; }
        .alert { padding: 15px 20px; border-radius: 10px; margin-bottom: 20px; display: none; animation: slideDown 0.3s; }
        .alert.show { display: block; }
        .alert-success { background: #d4edda; color: #155724; border-left: 4px solid #28a745; }
        .alert-error { background: #f8d7da; color: #721c24; border-left: 4px solid #dc3545; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: linear-gradient(135deg, #667eea, #764ba2); padding: 25px; border-radius: 15px; color: white; text-align: center; }
        .stat-card h4 { font-size: 36px; margin-bottom: 10px; }
        .stat-card p { opacity: 0.9; font-size: 14px; }
        .preview-box { background: #f8f9fa; border: 2px solid #e0e0e0; border-radius: 10px; padding: 20px; margin-top: 20px; }
        .preview-box h4 { color: #333; margin-bottom: 15px; }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Advanced Visual Enhancements */
        .live-preview-panel { position: fixed; bottom: 20px; right: 20px; width: 350px; background: white; border-radius: 15px; padding: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); z-index: 999; display: none; }
        .live-preview-panel.active { display: block; animation: slideUp 0.3s; }
        .live-preview-panel h3 { font-size: 16px; margin-bottom: 15px; color: #333; }
        .preview-website-card { background: linear-gradient(135deg, var(--primary-color, #667eea), var(--secondary-color, #764ba2)); padding: 20px; border-radius: 10px; color: white; margin-bottom: 15px; }
        .preview-website-card h4 { margin-bottom: 8px; }
        .preview-website-card p { opacity: 0.9; font-size: 13px; }
        @keyframes slideUp { from { transform: translateY(100px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        .char-counter { position: absolute; right: 15px; bottom: 10px; font-size: 11px; color: #999; background: white; padding: 2px 8px; border-radius: 4px; }
        .char-counter.warning { color: #ff9800; }
        .char-counter.error { color: #f44336; }
        .form-group { position: relative; }
        
        .validation-icon { position: absolute; right: 15px; top: 38px; font-size: 16px; }
        .validation-icon.valid { color: #4caf50; }
        .validation-icon.invalid { color: #f44336; }
        
        .tooltip { position: absolute; background: #333; color: white; padding: 8px 12px; border-radius: 6px; font-size: 12px; white-space: nowrap; z-index: 1000; pointer-events: none; opacity: 0; transition: opacity 0.3s; }
        .tooltip.show { opacity: 1; }
        .tooltip::before { content: ''; position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%); border: 5px solid transparent; border-bottom-color: #333; }
        
        .color-palette-suggestions { display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap; }
        .color-suggestion { width: 50px; height: 50px; border-radius: 10px; cursor: pointer; transition: all 0.3s; border: 3px solid transparent; }
        .color-suggestion:hover { transform: scale(1.1); border-color: #333; }
        
        .font-preview-card { background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 10px; border: 2px solid #e0e0e0; }
        .font-preview-card h4 { margin-bottom: 8px; }
        .font-preview-card p { color: #666; font-size: 14px; }
        
        .setting-card { background: white; border-radius: 15px; padding: 20px; margin-bottom: 15px; border: 2px solid #e0e0e0; transition: all 0.3s; }
        .setting-card:hover { border-color: #667eea; box-shadow: 0 5px 15px rgba(102,126,234,0.1); }
        .setting-card-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; }
        .setting-card-header h4 { color: #333; font-size: 16px; margin: 0; }
        .setting-badge { background: #667eea; color: white; padding: 4px 12px; border-radius: 20px; font-size: 11px; font-weight: 600; }
        .setting-badge.required { background: #f44336; }
        .setting-badge.optional { background: #9e9e9e; }
        
        /* Help System Styles */
        .help-toggle { position: fixed; top: 20px; right: 20px; background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; border-radius: 50px; padding: 12px 24px; font-size: 14px; font-weight: 600; cursor: pointer; z-index: 1001; box-shadow: 0 5px 20px rgba(220, 53, 69, 0.3); transition: all 0.3s; display: flex; align-items: center; gap: 8px; }
        .help-toggle:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4); }
        .help-section { display: none; position: fixed; top: 0; right: 0; width: 450px; max-width: 90vw; height: 100vh; background: white; box-shadow: -5px 0 30px rgba(0,0,0,0.3); z-index: 1000; overflow-y: auto; padding: 30px; animation: slideInRight 0.3s; }
        .help-section.active { display: block; }
        .help-section h2 { color: #333; font-size: 24px; margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
        .help-section .subtitle { color: #666; font-size: 14px; margin-bottom: 25px; }
        .purpose-box { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 15px; margin-bottom: 25px; }
        .purpose-box h3 { font-size: 18px; margin-bottom: 10px; }
        .purpose-box p { font-size: 14px; line-height: 1.6; opacity: 0.95; }
        .help-card { background: #f8f9fa; border-left: 4px solid #667eea; border-radius: 10px; padding: 20px; margin-bottom: 20px; }
        .help-card h3 { color: #333; font-size: 16px; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .help-card p { color: #666; font-size: 14px; line-height: 1.6; margin-bottom: 10px; }
        .help-card ul { color: #666; font-size: 14px; line-height: 1.8; padding-left: 20px; }
        .help-card ul li { margin-bottom: 8px; }
        .help-card code { background: #e9ecef; padding: 2px 8px; border-radius: 4px; font-size: 12px; color: #e83e8c; }
        .help-close { position: absolute; top: 30px; right: 30px; background: none; border: none; font-size: 28px; cursor: pointer; color: #999; transition: color 0.3s; }
        .help-close:hover { color: #dc3545; }
        @keyframes slideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }
        @media (max-width: 768px) { .help-section { width: 100%; } }
    </style>
</head>
<body>
    <div class="container">
        <!-- Help Toggle Button -->
        <button class="help-toggle" onclick="toggleHelp()">
            <i class="fas fa-question-circle"></i> ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø / Help
        </button>

        <!-- Help Section -->
        <div class="help-section" id="helpSection">
            <button class="help-close" onclick="toggleHelp()">√ó</button>
            
            <h2><i class="fas fa-book"></i> ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ó‡¶æ‡¶á‡¶° / Usage Guide</h2>
            <p class="subtitle">Site Settings Manager ‡¶è‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶ø‡¶ï‡¶æ</p>

            <!-- Purpose Box -->
            <div class="purpose-box">
                <h3>üéØ ‡¶Æ‡ßÇ‡¶≤ ‡¶â‡¶¶‡ßç‡¶¶‡ßá‡¶∂‡ßç‡¶Ø / Original Purpose</h3>
                <p><strong>Bangla:</strong> ‡¶è‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßÄ‡¶Ø‡¶º ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶Ø‡ßá‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßÅ‡¶∞‡ßã ‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü‡ßá‡¶∞ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ (‡¶®‡¶æ‡¶Æ, ‡¶∞‡¶Ç, API keys, ‡¶∏‡ßã‡¶∂‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶Æ‡¶ø‡¶°‡¶ø‡¶Ø‡¶º‡¶æ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø) ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá manage ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§</p>
                <p><strong>English:</strong> This is a centralized control panel where you can manage all website settings (name, colors, API keys, social media links, etc.) in one place.</p>
            </div>

            <!-- Help Cards -->
            <div class="help-card">
                <h3><i class="fas fa-rocket"></i> ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶∂‡ßÅ‡¶∞‡ßÅ / Quick Start</h3>
                <p><strong>Bangla:</strong></p>
                <ul>
                    <li>‡¶â‡¶™‡¶∞‡ßá‡¶∞ tab ‡¶ó‡ßÅ‡¶≤‡ßã ‡¶•‡ßá‡¶ï‡ßá ‡¶è‡¶ï‡¶ü‡¶ø category select ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                    <li>‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º information fill ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                    <li>"Save Settings" ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                    <li>Settings automatically browser ‡¶è save ‡¶π‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá</li>
                </ul>
                <p><strong>English:</strong> Select a tab ‚Üí Fill information ‚Üí Click "Save Settings" ‚Üí Done!</p>
            </div>

            <div class="help-card">
                <h3><i class="fas fa-list-ul"></i> Tab ‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ / Tab Details</h3>
                <p><strong>üåê General:</strong> Site name, description, author info, copyright</p>
                <p><strong>üìû Contact:</strong> Email, phone, WhatsApp, address details</p>
                <p><strong>üì± Social Media:</strong> Facebook, LinkedIn, GitHub, YouTube links</p>
                <p><strong>üîç SEO:</strong> Meta description, keywords, Google Analytics</p>
                <p><strong>üé® Theme:</strong> Primary, secondary, accent colors + gradients</p>
                <p><strong>üîë API Keys:</strong> Google, GitHub, OpenAI API credentials</p>
                <p><strong>‚öôÔ∏è Advanced:</strong> Maintenance mode, custom CSS/JS, footer</p>
            </div>

            <div class="help-card">
                <h3><i class="fas fa-download"></i> Export / Import</h3>
                <p><strong>Bangla:</strong></p>
                <ul>
                    <li><strong>Export:</strong> "Export Settings" button ‡¶è ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶≤‡ßá ‡¶è‡¶ï‡¶ü‡¶ø JSON file download ‡¶π‡¶¨‡ßá - ‡¶è‡¶ü‡¶ø backup ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®</li>
                    <li><strong>Import:</strong> "Import Settings" button ‡¶è ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶ó‡ßá‡¶∞ save ‡¶ï‡¶∞‡¶æ JSON file upload ‡¶ï‡¶∞‡ßÅ‡¶® - ‡¶∏‡¶¨ settings ‡¶è‡¶ï‡¶¨‡¶æ‡¶∞‡ßá restore ‡¶π‡¶¨‡ßá</li>
                </ul>
                <p><strong>English:</strong> Export creates a backup JSON file. Import restores all settings from that file.</p>
            </div>

            <div class="help-card">
                <h3><i class="fas fa-palette"></i> Theme Color Selection</h3>
                <p><strong>Bangla:</strong> Theme tab ‡¶è ‡¶Ø‡¶æ‡¶®‡•§ Color picker ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶∞‡¶Ç select ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶¨‡¶æ hex code (#667eea) ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§ "Apply Theme" button ‡¶è ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá preview ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‡•§</p>
                <p><strong>English:</strong> Go to Theme tab ‚Üí Pick colors ‚Üí Click "Apply Theme" to preview ‚Üí Save Settings to confirm.</p>
            </div>

            <div class="help-card">
                <h3><i class="fas fa-key"></i> API Keys Setup</h3>
                <p><strong>Important:</strong> API keys private ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®‡•§ ‡¶ï‡¶ñ‡¶®‡ßã public GitHub ‡¶è commit ‡¶ï‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ‡•§</p>
                <ul>
                    <li><strong>Google API:</strong> Google Cloud Console ‡¶•‡ßá‡¶ï‡ßá generate ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                    <li><strong>GitHub Token:</strong> GitHub Settings ‚Üí Developer ‚Üí Personal Access Tokens</li>
                    <li><strong>OpenAI:</strong> OpenAI platform ‡¶•‡ßá‡¶ï‡ßá API key ‡¶®‡¶ø‡¶®</li>
                </ul>
            </div>

            <div class="help-card">
                <h3><i class="fas fa-shield-alt"></i> Validation & Error Handling</h3>
                <p><strong>Bangla:</strong> Save ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá system automatically check ‡¶ï‡¶∞‡ßá:</p>
                <ul>
                    <li>Email format ‡¶∏‡¶†‡¶ø‡¶ï ‡¶ï‡¶ø‡¶®‡¶æ</li>
                    <li>URL valid ‡¶ï‡¶ø‡¶®‡¶æ</li>
                    <li>Required fields empty ‡¶®‡ßá‡¶á ‡¶ï‡¶ø‡¶®‡¶æ</li>
                </ul>
                <p>‡¶Ø‡¶¶‡¶ø ‡¶ï‡ßã‡¶®‡ßã error ‡¶•‡¶æ‡¶ï‡ßá, ‡¶Ü‡¶™‡¶®‡¶ø red alert ‡¶¶‡ßá‡¶ñ‡¶¨‡ßá‡¶®‡•§</p>
            </div>

            <div class="help-card">
                <h3><i class="fas fa-lightbulb"></i> ‡¶™‡ßç‡¶∞‡ßã ‡¶ü‡¶ø‡¶™‡¶∏ / Pro Tips</h3>
                <ul>
                    <li>üîÑ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶® settings export ‡¶ï‡¶∞‡ßá backup ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®</li>
                    <li>üé® Color scheme ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø <code>coolors.co</code> ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                    <li>üîç SEO tab ‡¶è proper meta description ‡¶¶‡¶ø‡¶® (155-160 characters)</li>
                    <li>üì± Social media links ‡¶∏‡¶¨ fill ‡¶ï‡¶∞‡ßÅ‡¶® - ‡¶è‡¶ü‡¶ø SEO boost ‡¶ï‡¶∞‡ßá</li>
                    <li>‚öôÔ∏è Advanced tab ‡¶è custom CSS ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã customize ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                </ul>
            </div>

            <div class="help-card">
                <h3><i class="fas fa-exclamation-triangle"></i> ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶® / Troubleshooting</h3>
                <p><strong>Settings save ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ?</strong></p>
                <ul>
                    <li>Browser console (F12) ‡¶ñ‡ßÅ‡¶≤‡ßá error check ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                    <li>LocalStorage enabled ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ verify ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                    <li>Incognito mode ‡¶è test ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</li>
                </ul>
                <p><strong>Theme apply ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ?</strong></p>
                <ul>
                    <li>"Apply Theme" button ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶® ‡¶ï‡¶ø‡¶®‡¶æ check ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                    <li>Color values hex format ‡¶è ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® (#667eea)</li>
                    <li>Page refresh ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ try ‡¶ï‡¶∞‡ßÅ‡¶®</li>
                </ul>
            </div>
        </div>

        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-cog"></i> Global Site Settings</h1>
            <p>Centralized configuration for your entire website</p>
        </div>

        <!-- Alert Messages -->
        <div id="alertContainer"></div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('general')">üåê General</button>
            <button class="tab-btn" onclick="switchTab('contact')">üìû Contact</button>
            <button class="tab-btn" onclick="switchTab('social')">üì± Social Media</button>
            <button class="tab-btn" onclick="switchTab('seo')">üîç SEO</button>
            <button class="tab-btn" onclick="switchTab('theme')">üé® Theme</button>
            <button class="tab-btn" onclick="switchTab('api')">üîë API Keys</button>
            <button class="tab-btn" onclick="switchTab('advanced')">‚öôÔ∏è Advanced</button>
        </div>

        <!-- Tab: General -->
        <div id="general" class="tab-content active">
            <div class="settings-section">
                <h3><i class="fas fa-info-circle"></i> Site Information</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Site Name</label>
                        <input type="text" id="siteName" placeholder="A3KM Studio">
                        <small>Display name of your website</small>
                    </div>
                    <div class="form-group">
                        <label>Site Tagline</label>
                        <input type="text" id="siteTagline" placeholder="Engineering ¬∑ Education ¬∑ Innovation">
                        <small>Short description under site name</small>
                    </div>
                </div>
                <div class="form-group">
                    <label>Site Description</label>
                    <textarea id="siteDescription" placeholder="Full description of your website..."></textarea>
                    <small>Used in meta descriptions and about sections</small>
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-user"></i> Author Information</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="authorName" placeholder="Md Akhinoor Islam">
                    </div>
                    <div class="form-group">
                        <label>Professional Title</label>
                        <input type="text" id="authorTitle" placeholder="Energy Science & Engineering Student">
                    </div>
                    <div class="form-group">
                        <label>University/Institution</label>
                        <input type="text" id="institution" placeholder="KUET">
                    </div>
                    <div class="form-group">
                        <label>Department</label>
                        <input type="text" id="department" placeholder="Energy Science & Engineering">
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-copyright"></i> Copyright & Legal</h3>
                <div class="form-group">
                    <label>Copyright Text</label>
                    <input type="text" id="copyrightText" placeholder="¬© 2024 Md Akhinoor Islam. All rights reserved.">
                </div>
                <div class="form-group">
                    <label>Privacy Policy URL</label>
                    <input type="url" id="privacyUrl" placeholder="https://example.com/privacy">
                </div>
                <div class="form-group">
                    <label>Terms of Service URL</label>
                    <input type="url" id="termsUrl" placeholder="https://example.com/terms">
                </div>
            </div>
        </div>

        <!-- Tab: Contact -->
        <div id="contact" class="tab-content">
            <div class="settings-section">
                <h3><i class="fas fa-envelope"></i> Contact Information</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="contactEmail" placeholder="mdakhinoorislam@gmail.com">
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" id="contactPhone" placeholder="+880 1234567890">
                    </div>
                    <div class="form-group">
                        <label>WhatsApp Number</label>
                        <input type="tel" id="whatsappNumber" placeholder="+880 1234567890">
                    </div>
                    <div class="form-group">
                        <label>Alternative Email</label>
                        <input type="email" id="altEmail" placeholder="alternative@email.com">
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-map-marker-alt"></i> Address</h3>
                <div class="form-group">
                    <label>Street Address</label>
                    <input type="text" id="street" placeholder="Khulna University of Engineering & Technology">
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label>City</label>
                        <input type="text" id="city" placeholder="Khulna">
                    </div>
                    <div class="form-group">
                        <label>State/Region</label>
                        <input type="text" id="state" placeholder="Khulna Division">
                    </div>
                    <div class="form-group">
                        <label>Postal Code</label>
                        <input type="text" id="postalCode" placeholder="9203">
                    </div>
                    <div class="form-group">
                        <label>Country</label>
                        <input type="text" id="country" placeholder="Bangladesh">
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: Social Media -->
        <div id="social" class="tab-content">
            <div class="settings-section">
                <h3><i class="fas fa-share-alt"></i> Social Media Links</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label><i class="fab fa-facebook"></i> Facebook</label>
                        <input type="url" id="facebookUrl" placeholder="https://facebook.com/username">
                    </div>
                    <div class="form-group">
                        <label><i class="fab fa-linkedin"></i> LinkedIn</label>
                        <input type="url" id="linkedinUrl" placeholder="https://linkedin.com/in/username">
                    </div>
                    <div class="form-group">
                        <label><i class="fab fa-github"></i> GitHub</label>
                        <input type="url" id="githubUrl" placeholder="https://github.com/username">
                    </div>
                    <div class="form-group">
                        <label><i class="fab fa-youtube"></i> YouTube</label>
                        <input type="url" id="youtubeUrl" placeholder="https://youtube.com/@channel">
                    </div>
                    <div class="form-group">
                        <label><i class="fab fa-twitter"></i> Twitter/X</label>
                        <input type="url" id="twitterUrl" placeholder="https://twitter.com/username">
                    </div>
                    <div class="form-group">
                        <label><i class="fab fa-instagram"></i> Instagram</label>
                        <input type="url" id="instagramUrl" placeholder="https://instagram.com/username">
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: SEO -->
        <div id="seo" class="tab-content">
            <div class="settings-section">
                <h3><i class="fas fa-search"></i> Search Engine Optimization</h3>
                <div class="form-group">
                    <label>Meta Description <span class="setting-badge required">Required</span></label>
                    <textarea id="metaDescription" placeholder="Brief description for search engines (155-160 characters)" maxlength="160" oninput="updateCharCounter(this, 160)"></textarea>
                    <span class="char-counter" id="metaDescCounter">0 / 160</span>
                    <small>Displayed in search results (Optimal: 155-160 characters)</small>
                </div>
                <div class="form-group">
                    <label>Meta Keywords</label>
                    <input type="text" id="metaKeywords" placeholder="engineering, education, projects, SOLIDWORKS">
                    <small>Comma-separated keywords</small>
                </div>
                <div class="form-group">
                    <label>Google Analytics ID</label>
                    <input type="text" id="analyticsId" placeholder="G-XXXXXXXXXX">
                    <small>Google Analytics Measurement ID</small>
                </div>
                <div class="form-group">
                    <label>Google Search Console Verification Code</label>
                    <input type="text" id="gscVerification" placeholder="google-site-verification=xxxxx">
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-image"></i> Open Graph / Social Sharing</h3>
                <div class="form-group">
                    <label>OG Image URL</label>
                    <input type="url" id="ogImage" placeholder="https://example.com/og-image.jpg">
                    <small>Image shown when sharing on social media (1200x630px recommended)</small>
                </div>
                <div class="form-group">
                    <label>OG Type</label>
                    <select id="ogType">
                        <option value="website">Website</option>
                        <option value="article">Article</option>
                        <option value="profile">Profile</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Tab: Theme -->
        <div id="theme" class="tab-content">
            <div class="settings-section">
                <h3><i class="fas fa-palette"></i> Color Scheme</h3>
                
                <!-- Color Palette Suggestions -->
                <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                    <h4 style="font-size: 14px; margin-bottom: 10px; color: #333;"><i class="fas fa-magic"></i> Popular Palettes (Click to Apply)</h4>
                    <div class="color-palette-suggestions">
                        <div class="color-suggestion" style="background: linear-gradient(135deg, #667eea, #764ba2);" onclick="applyColorPalette('#667eea', '#764ba2', '#ff6b6b')" title="Purple Dream"></div>
                        <div class="color-suggestion" style="background: linear-gradient(135deg, #f093fb, #f5576c);" onclick="applyColorPalette('#f093fb', '#f5576c', '#feca57')" title="Pink Sunset"></div>
                        <div class="color-suggestion" style="background: linear-gradient(135deg, #4facfe, #00f2fe);" onclick="applyColorPalette('#4facfe', '#00f2fe', '#0abde3')" title="Ocean Blue"></div>
                        <div class="color-suggestion" style="background: linear-gradient(135deg, #43e97b, #38f9d7);" onclick="applyColorPalette('#43e97b', '#38f9d7', '#26de81')" title="Fresh Green"></div>
                        <div class="color-suggestion" style="background: linear-gradient(135deg, #fa709a, #fee140);" onclick="applyColorPalette('#fa709a', '#fee140', '#f9ca24')" title="Warm Glow"></div>
                        <div class="color-suggestion" style="background: linear-gradient(135deg, #30cfd0, #330867);" onclick="applyColorPalette('#30cfd0', '#330867', '#a55eea')" title="Deep Ocean"></div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Primary Color <span class="setting-badge required">Required</span></label>
                    <div class="color-input-group">
                        <input type="color" id="primaryColorPicker" value="#667eea" oninput="syncColorPicker(this, 'primaryColor'); updateLivePreview();">
                        <input type="text" id="primaryColor" value="#667eea" oninput="syncColorInput(this, 'primaryColorPicker'); updateLivePreview();" pattern="^#[0-9A-Fa-f]{6}$">
                    </div>
                    <small>Main brand color</small>
                </div>
                <div class="form-group">
                    <label>Secondary Color</label>
                    <div class="color-input-group">
                        <input type="color" id="secondaryColorPicker" value="#764ba2" oninput="syncColorPicker(this, 'secondaryColor'); updateLivePreview();">
                        <input type="text" id="secondaryColor" value="#764ba2" oninput="syncColorInput(this, 'secondaryColorPicker'); updateLivePreview();" pattern="^#[0-9A-Fa-f]{6}$">
                    </div>
                    <small>Accent color for gradients</small>
                </div>
                <div class="form-group">
                    <label>Accent Color</label>
                    <div class="color-input-group">
                        <input type="color" id="accentColorPicker" value="#ff6b6b" oninput="syncColorPicker(this, 'accentColor'); updateLivePreview();">
                        <input type="text" id="accentColor" value="#ff6b6b" oninput="syncColorInput(this, 'accentColorPicker'); updateLivePreview();" pattern="^#[0-9A-Fa-f]{6}$">
                    </div>
                    <small>Highlight color for CTAs</small>
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-font"></i> Typography</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Primary Font</label>
                        <select id="primaryFont">
                            <option value="Segoe UI">Segoe UI</option>
                            <option value="Inter">Inter</option>
                            <option value="Roboto">Roboto</option>
                            <option value="Open Sans">Open Sans</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Heading Font</label>
                        <select id="headingFont">
                            <option value="Segoe UI">Segoe UI</option>
                            <option value="Poppins">Poppins</option>
                            <option value="Montserrat">Montserrat</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="preview-box">
                <h4>üé® Theme Preview</h4>
                <div style="padding: 20px; background: linear-gradient(135deg, var(--primary-color, #667eea), var(--secondary-color, #764ba2)); color: white; border-radius: 10px; margin-bottom: 10px;">
                    <h3 style="margin-bottom: 8px;">‚ú® Sample Heading</h3>
                    <p style="opacity: 0.95; margin-bottom: 12px;">This is how your gradient background will look</p>
                    <button style="background: var(--accent-color, #ff6b6b); color: white; border: none; padding: 8px 16px; border-radius: 6px; font-weight: 600; cursor: pointer;">Accent Button</button>
                </div>
                <small style="color: #666;">üí° Tip: Colors update in real-time as you type or select</small>
            </div>
        </div>

        <!-- Tab: API Keys -->
        <div id="api" class="tab-content">
            <div class="settings-section">
                <h3><i class="fas fa-key"></i> API Configuration</h3>
                <div class="form-group">
                    <label>GitHub Personal Access Token</label>
                    <input type="password" id="githubToken" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx">
                    <small>Required for content uploads and management</small>
                </div>
                <div class="form-group">
                    <label>YouTube API Key</label>
                    <input type="password" id="youtubeApiKey" placeholder="AIzaSyXXXXXXXXXXXXXXX">
                    <small>For fetching video durations and details</small>
                </div>
                <div class="form-group">
                    <label>SMTP Email Host (for contact forms)</label>
                    <input type="text" id="smtpHost" placeholder="smtp.gmail.com">
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label>SMTP Username</label>
                        <input type="text" id="smtpUser" placeholder="your-email@gmail.com">
                    </div>
                    <div class="form-group">
                        <label>SMTP Password</label>
                        <input type="password" id="smtpPass" placeholder="App password">
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: Advanced -->
        <div id="advanced" class="tab-content">
            <div class="settings-section">
                <h3><i class="fas fa-code"></i> Advanced Settings</h3>
                <div class="form-group">
                    <label>Custom CSS</label>
                    <textarea id="customCss" style="font-family: monospace; min-height: 150px;" placeholder="/* Add custom CSS here */"></textarea>
                </div>
                <div class="form-group">
                    <label>Custom JavaScript</label>
                    <textarea id="customJs" style="font-family: monospace; min-height: 150px;" placeholder="// Add custom JS here"></textarea>
                </div>
                <div class="form-group">
                    <label>Google Tag Manager ID</label>
                    <input type="text" id="gtmId" placeholder="GTM-XXXXXXX">
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-database"></i> Data Management</h3>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="exportSettings()">
                        <i class="fas fa-download"></i> Export Settings
                    </button>
                    <button class="btn btn-secondary" onclick="importSettings()">
                        <i class="fas fa-upload"></i> Import Settings
                    </button>
                    <button class="btn btn-secondary" onclick="resetToDefaults()">
                        <i class="fas fa-undo"></i> Reset to Defaults
                    </button>
                </div>
            </div>
        </div>

        <!-- Savestyle="margin-bottom: 15px;">
                <p id="lastSavedInfo" style="color: #666; font-size: 13px; margin: 0;">
                    <i class="fas fa-info-circle"></i> <span id="lastSavedText">No settings saved yet</span>
                </p>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="saveSettings()">
                    <i class="fas fa-save"></i> Save All Settings
                </button>
                <button class="btn btn-secondary" onclick="loadSettings()">
                    <i class="fas fa-sync"></i> Reload
                </button>
                <button class="btn btn-success" onclick="applyTheme()">
                    <i class="fas fa-paint-brush"></i> Apply Theme
                </button>
            </div>
            <small style="color: #999; font-size: 12px; display: block; margin-top: 10px;">
                üí° Pro tip: Press <kbd style="background: #f0f0f0; padding: 2px 6px; border-radius: 3px;">Ctrl+S</kbd> to quick save
            </small   <i class="fas fa-paint-brush"></i> Apply Theme
                </button>
            </div>
        </div>
    </div>

    <script src="../shared/github-token-manager.js"></script>
    <script src="../shared/activity-logger.js"></script>
    <script>
        // Settings storage key
        const SETTINGS_KEY = 'a3km_site_settings';

        // Toggle help section
        function toggleHelp() {
            const helpSection = document.getElementById('helpSection');
            helpSection.classList.toggle('active');
        }

        // ===== NEW: Advanced Visual Features =====
        
        // Character counter for text inputs
        function updateCharCounter(element, maxLength) {
            const currentLength = element.value.length;
            const counter = element.parentElement.querySelector('.char-counter');
            if (counter) {
                counter.textContent = `${currentLength} / ${maxLength}`;
                counter.classList.remove('warning', 'error');
                if (currentLength > maxLength * 0.9) counter.classList.add('warning');
                if (currentLength >= maxLength) counter.classList.add('error');
            }
        }

        // Sync color picker and text input
        function syncColorPicker(picker, inputId) {
            document.getElementById(inputId).value = picker.value;
        }

        function syncColorInput(input, pickerId) {
            const value = input.value;
            if (/^#[0-9A-Fa-f]{6}$/.test(value)) {
                document.getElementById(pickerId).value = value;
            }
        }

        // Apply color palette
        function applyColorPalette(primary, secondary, accent) {
            document.getElementById('primaryColor').value = primary;
            document.getElementById('primaryColorPicker').value = primary;
            document.getElementById('secondaryColor').value = secondary;
            document.getElementById('secondaryColorPicker').value = secondary;
            document.getElementById('accentColor').value = accent;
            document.getElementById('accentColorPicker').value = accent;
            updateLivePreview();
            showAlert('Color palette applied! Click "Save Settings" to confirm.', 'success');
        }

        // Live preview update
        function updateLivePreview() {
            const primary = document.getElementById('primaryColor').value;
            const secondary = document.getElementById('secondaryColor').value;
            const accent = document.getElementById('accentColor').value;
            
            // Update CSS variables
            document.documentElement.style.setProperty('--primary-color', primary);
            document.documentElement.style.setProperty('--secondary-color', secondary);
            document.documentElement.style.setProperty('--accent-color', accent);
            
            // Show live preview panel
            showLivePreviewPanel();
        }

        // Show live preview panel
        function showLivePreviewPanel() {
            const panel = document.getElementById('livePreviewPanel');
            if (!panel) {
                const newPanel = document.createElement('div');
                newPanel.id = 'livePreviewPanel';
                newPanel.className = 'live-preview-panel active';
                newPanel.innerHTML = `
                    <h3><i class=\"fas fa-eye\"></i> Live Preview</h3>
                    <div class=\"preview-website-card\">
                        <h4 id=\"previewSiteName\">A3KM Studio</h4>
                        <p id=\"previewTagline\">Engineering ¬∑ Education ¬∑ Innovation</p>
                    </div>
                    <button class=\"btn btn-secondary\" onclick=\"closeLivePreview()\" style=\"width: 100%; font-size: 13px; padding: 8px;\">
                        <i class=\"fas fa-times\"></i> Close Preview
                    </button>
                `;
                document.body.appendChild(newPanel);
                
                // Update preview content
                setTimeout(() => {
                    const siteName = document.getElementById('siteName')?.value || 'A3KM Studio';
                    const tagline = document.getElementById('siteTagline')?.value || 'Engineering ¬∑ Education ¬∑ Innovation';
                    document.getElementById('previewSiteName').textContent = siteName;
                    document.getElementById('previewTagline').textContent = tagline;
                }, 100);
            }
        }

        function closeLivePreview() {
            const panel = document.getElementById('livePreviewPanel');
            if (panel) panel.remove();
        }

        // URL validation with visual feedback
        function validateURL(input) {
            const urlPattern = /^https?:\\/\\/.+/;
            const isValid = urlPattern.test(input.value) || input.value === '';
            
            // Remove existing validation icon
            const existingIcon = input.parentElement.querySelector('.validation-icon');
            if (existingIcon) existingIcon.remove();
            
            if (input.value !== '') {
                const icon = document.createElement('i');
                icon.className = `fas ${isValid ? 'fa-check-circle valid' : 'fa-times-circle invalid'} validation-icon`;
                input.parentElement.appendChild(icon);
            }
        }

        // Add URL validation to all URL inputs
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('input[type=\"url\"]').forEach(input => {
                input.addEventListener('input', () => validateURL(input));
            });
            
            // Add real-time preview to site name and tagline
            ['siteName', 'siteTagline'].forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', () => {
                        const preview = document.getElementById(`preview${id.charAt(0).toUpperCase() + id.slice(1)}`);
                        if (preview) preview.textContent = element.value;
                    });
                }
            });
        });

        // Tab switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Color picker sync
        // Token manager & live updates
        let tokenManager = null;

        document.addEventListener('DOMContentLoaded', () => {
            tokenManager = typeof GitHubTokenManager !== 'undefined' ? new GitHubTokenManager() : null;
            
            ['primary', 'secondary', 'accent'].forEach(color => {
                const picker = document.getElementById(`${color}ColorPicker`);
                const input = document.getElementById(`${color}Color`);
                
                picker.addEventListener('input', (e) => {
                    input.value = e.target.value;
                });
                
                input.addEventListener('input', (e) => {
                    if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
                        picker.value = e.target.value;
                    }
                });
            });

            // Load saved settings
            loadSettings();
            
            // Initialize character counter
            const metaDescField = document.getElementById('metaDescription');
            if (metaDescField) {
                updateCharCounter(metaDescField, 160);
            }
            
            // Live update every 5 seconds (silent)
            setInterval(() => {
                if (localStorage.getItem(SETTINGS_KEY)) {
                    loadSettings('silent');
                }
            }, 5000);
        });

        // Save settings
        function saveSettings() {
            // Validate required fields
            const requiredFields = [
                { id: 'siteName', name: 'Site Name' },
                { id: 'metaDescription', name: 'Meta Description' }
            ];
            
            const missingFields = [];
            requiredFields.forEach(field => {
                const element = document.getElementById(field.id);
                if (!element || !element.value.trim()) {
                    missingFields.push(field.name);
                }
            });
            
            if (missingFields.length > 0) {
                showAlert(`‚ö†Ô∏è Missing required fields: ${missingFields.join(', ')}`, 'error');
                return;
            }
            
            const settings = {
                general: {
                    siteName: document.getElementById('siteName').value,
                    siteTagline: document.getElementById('siteTagline').value,
                    siteDescription: document.getElementById('siteDescription').value,
                    authorName: document.getElementById('authorName').value,
                    authorTitle: document.getElementById('authorTitle').value,
                    institution: document.getElementById('institution').value,
                    department: document.getElementById('department').value,
                    copyrightText: document.getElementById('copyrightText').value,
                    privacyUrl: document.getElementById('privacyUrl').value,
                    termsUrl: document.getElementById('termsUrl').value
                },
                contact: {
                    email: document.getElementById('contactEmail').value,
                    phone: document.getElementById('contactPhone').value,
                    whatsapp: document.getElementById('whatsappNumber').value,
                    altEmail: document.getElementById('altEmail').value,
                    street: document.getElementById('street').value,
                    city: document.getElementById('city').value,
                    state: document.getElementById('state').value,
                    postalCode: document.getElementById('postalCode').value,
                    country: document.getElementById('country').value
                },
                social: {
                    facebook: document.getElementById('facebookUrl').value,
                    linkedin: document.getElementById('linkedinUrl').value,
                    github: document.getElementById('githubUrl').value,
                    youtube: document.getElementById('youtubeUrl').value,
                    twitter: document.getElementById('twitterUrl').value,
                    instagram: document.getElementById('instagramUrl').value
                },
                seo: {
                    metaDescription: document.getElementById('metaDescription').value,
                    metaKeywords: document.getElementById('metaKeywords').value,
                    analyticsId: document.getElementById('analyticsId').value,
                    gscVerification: document.getElementById('gscVerification').value,
                    ogImage: document.getElementById('ogImage').value,
                    ogType: document.getElementById('ogType').value
                },
                theme: {
                    primaryColor: document.getElementById('primaryColor').value,
                    secondaryColor: document.getElementById('secondaryColor').value,
                    accentColor: document.getElementById('accentColor').value,
                    primaryFont: document.getElementById('primaryFont').value,
                    headingFont: document.getElementById('headingFont').value
                },
                api: {
                    githubToken: document.getElementById('githubToken').value,
                    youtubeApiKey: document.getElementById('youtubeApiKey').value,
                    smtpHost: document.getElementById('smtpHost').value,
                    smtpUser: document.getElementById('smtpUser').value,
                    smtpPass: document.getElementById('smtpPass').value
                },
                advanced: {
                    customCss: document.getElementById('customCss').value,
                    customJs: document.getElementById('customJs').value,
                    gtmId: document.getElementById('gtmId').value
                },
                lastUpdated: new Date().toISOString()
            };

            localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings));
            
            // Update last saved info
            updateLastSavedInfo();
            
            // Count filled fields
            let filledCount = 0;
            let totalCount = 0;
            Object.values(settings).forEach(section => {
                if (typeof section === 'object' && section !== null) {
                    Object.values(section).forEach(value => {
                        totalCount++;
                        if (value && value.toString().trim() !== '') filledCount++;
                    });
                }
            });
            
            showAlert(`‚úÖ Settings saved successfully! (${filledCount}/${totalCount} fields filled)`, 'success');
        }

        // Load settings
        function loadSettings() {
            const saved = localStorage.getItem(SETTINGS_KEY);
            if (!saved) return;

            const settings = JSON.parse(saved);

            // Load general
            if (settings.general) {
                Object.keys(settings.general).forEach(key => {
                    const el = document.getElementById(key);
                    if (el) el.value = settings.general[key] || '';
                });
            }

            // Load contact
            if (settings.contact) {
                Object.keys(settings.contact).forEach(key => {
                    const el = document.getElementById(key === 'email' ? 'contactEmail' : 
                                                      key === 'phone' ? 'contactPhone' :
                                                      key === 'whatsapp' ? 'whatsappNumber' : key);
                    if (el) el.value = settings.contact[key] || '';
                });
            }

            // Load social
            if (settings.social) {
                document.getElementById('facebookUrl').value = settings.social.facebook || '';
                document.getElementById('linkedinUrl').value = settings.social.linkedin || '';
                document.getElementById('githubUrl').value = settings.social.github || '';
                document.getElementById('youtubeUrl').value = settings.social.youtube || '';
                document.getElementById('twitterUrl').value = settings.social.twitter || '';
                document.getElementById('instagramUrl').value = settings.social.instagram || '';
            }

            // Load SEO
            if (settings.seo) {
                Object.keys(settings.seo).forEach(key => {
                    const el = document.getElementById(key);
                    if (el) el.value = settings.seo[key] || '';
                });
            }

            // Load theme
            if (settings.theme) {
                document.getElementById('primaryColor').value = settings.theme.primaryColor || '#667eea';
                document.getElementById('primaryColorPicker').value = settings.theme.primaryColor || '#667eea';
                document.getElementById('secondaryColor').value = settings.theme.secondaryColor || '#764ba2';
                document.getElementById('secondaryColorPicker').value = settings.theme.secondaryColor || '#764ba2';
                document.getElementById('accentColor').value = settings.theme.accentColor || '#ff6b6b';
                document.getElementById('accentColorPicker').value = settings.theme.accentColor || '#ff6b6b';
                document.getElementById('primaryFont').value = settings.theme.primaryFont || 'Segoe UI';
                document.getElementById('headingFont').value = settings.theme.headingFont || 'Segoe UI';
            }

            // Load API
            if (settings.api) {
                Object.keys(settings.api).forEach(key => {
                    const el = document.getElementById(key);
                    if (el) el.value = settings.api[key] || '';
                });
            }

            // Load advanced
            if (settings.advanced) {
                Object.keys(settings.advanced).forEach(key => {
                    const el = document.getElementById(key);
                    if (el) el.value = settings.advanced[key] || '';
                });
            }

            // Update character counter after loading
            const metaDescField = document.getElementById('metaDescription');
            if (metaDescField && metaDescField.value) {
                updateCharCounter(metaDescField, 160);
            }
            
            // Silent load (no alert) - only show on manual reload
            if (arguments[0] !== 'silent') {
                showAlert('‚úÖ Settings reloaded from storage', 'success');
            }
        }

        // Export settings
        function exportSettings() {
            const settings = localStorage.getItem(SETTINGS_KEY);
            if (!settings) {
                showAlert('‚ö†Ô∏è No settings to export!', 'error');
                return;
            }

            // Format JSON nicely
            const formatted = JSON.stringify(JSON.parse(settings), null, 2);
            const blob = new Blob([formatted], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            
            // Create filename with date
            const now = new Date();
            const dateStr = now.toISOString().split('T')[0];
            const timeStr = now.toTimeString().split(' ')[0].replace(/:/g, '-');
            
            a.href = url;
            a.download = `a3km-site-settings-${dateStr}-${timeStr}.json`;
            a.click();
            URL.revokeObjectURL(url);
            showAlert('‚úÖ Settings exported successfully!', 'success');
        }

        // Import settings
        function importSettings() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = (event) => {
                    try {
                        const settings = JSON.parse(event.target.result);
                        
                        // Validate structure
                        const requiredSections = ['general', 'contact', 'social', 'seo', 'theme', 'api', 'advanced'];
                        const missingSections = requiredSections.filter(section => !settings[section]);
                        
                        if (missingSections.length > 0) {
                            showAlert(`‚ö†Ô∏è Invalid file structure! Missing: ${missingSections.join(', ')}`, 'error');
                            return;
                        }
                        
                        // Save and reload
                        localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings));
            const settings = localStorage.getItem(SETTINGS_KEY);
            let message = 'Reset all settings to default values?\n\nThis will:';
            message += '\n‚Ä¢ Clear all saved data';
            message += '\n‚Ä¢ Remove API keys';
            message += '\n‚Ä¢ Reset colors to default';
            message += '\n\n‚ö†Ô∏è This action cannot be undone!';
            
            if (settings) {
                message += '\n\nüíæ Consider exporting your settings first!';
            }
            
            if (confirm(message)) {
                localStorage.removeItem(SETTINGS_KEY);
                showAlert('‚úÖ Settings reset! Reloading page...', 'success');
                setTimeout(() => location.reload(), 1500or) {
                        showAlert(`‚ùå Invalid JSON file! Error: ${error.message}`, 'error');
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }

        // Reset to defaults
        function resetToDefaults() {
            if (confirm('Reset all settings to default values? This cannot be undone.')) {
                localStorage.removeItem(SETTINGS_KEY);
                location.reload();
            }
        }

        // Apply theme
        function applyTheme() {
            const primaryColor = document.getElementById('primaryColor').value;
            const secondaryColor = document.getElementById('secondaryColor').value;
            const accentColor = document.getElementById('accentColor').value;

            document.documentElement.style.setProperty('--primary-color', primaryColor);
            document.documentElement.style.setProperty('--secondary-color', secondaryColor);
            document.documentElement.style.setProperty('--accent-color', accentColor);

            showAlert('Theme applied! (Preview only)', 'success');
        }

        // Keyboard shortcut for save (Ctrl+S)
        document.addEventListener('keydown', (e) => {
            if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                e.preventDefault();
                saveSettings();
            }
        });
        
        // Update last saved timestamp
        function updateLastSavedInfo() {
            const settings = localStorage.getItem(SETTINGS_KEY);
            if (!settings) return;
            
            try {
                const data = JSON.parse(settings);
                if (data.lastUpdated) {
                    const date = new Date(data.lastUpdated);
                    const now = new Date();
                    const diffMs = now - date;
                    const diffMins = Math.floor(diffMs / 60000);
                    
                    let timeAgo = '';
                    if (diffMins < 1) timeAgo = 'Just now';
                    else if (diffMins < 60) timeAgo = `${diffMins} minute${diffMins > 1 ? 's' : ''} ago`;
                    else if (diffMins < 1440) {
                        const hours = Math.floor(diffMins / 60);
                        timeAgo = `${hours} hour${hours > 1 ? 's' : ''} ago`;
                    } else {
                        const days = Math.floor(diffMins / 1440);
                        timeAgo = `${days} day${days > 1 ? 's' : ''} ago`;
                    }
                    
                    document.getElementById('lastSavedText').textContent = `Last saved: ${timeAgo}`;
                }
            } catch (e) {
                console.error('Error updating timestamp:', e);
            }
        }
        
        // Update timestamp on load and every minute
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                updateLastSavedInfo();
                setInterval(updateLastSavedInfo, 60000);
            });
        } else {
            updateLastSavedInfo();
            setInterval(updateLastSavedInfo, 60000);
        }
        
        // Alert helper
        function showAlert(message, type) {
            const container = document.getElementById('alertContainer');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type} show`;
            alert.textContent = message;
            container.appendChild(alert);

            setTimeout(() => {
                alert.classList.remove('show');
                setTimeout(() => alert.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>
