<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- Universal Mobile Optimization System -->
    <link rel="stylesheet" href="../../../../Optimization/mobile-universal.css">
    <script src="../../../../Optimization/mobile-universal.js" defer></script>
    
    <title>Arduino Projects Manager - Only Boss</title>
    
    <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        :root {
            --primary-red: #CC0000;
            --primary-red-dark: #990000;
            --arduino-teal: #00897B;
            --arduino-teal-dark: #00695C;
            --bg-dark: rgba(10, 10, 10, 0.98);
            --bg-card: rgba(26, 0, 0, 0.95);
            --border-primary: rgba(204, 0, 0, 0.3);
            --text-primary: rgba(255, 255, 255, 0.95);
            --text-secondary: rgba(255, 255, 255, 0.7);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #0a1a0a 100%);
            color: var(--text-primary);
            font-family: 'Inter', -apple-system, sans-serif;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Engineering Grid Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(0deg, rgba(0, 137, 123, 0.03) 0 1px, transparent 1px 30px),
                repeating-linear-gradient(90deg, rgba(0, 137, 123, 0.03) 0 1px, transparent 1px 30px),
                repeating-linear-gradient(45deg, rgba(0, 137, 123, 0.05) 0 2px, transparent 2px 40px);
            background-size: 30px 30px, 30px 30px, 80px 80px;
            pointer-events: none;
            z-index: 0;
            opacity: 0.6;
        }

        /* Header */
        .header {
            position: relative;
            z-index: 100;
            background: linear-gradient(135deg, rgba(0, 105, 92, 0.98), rgba(0, 69, 60, 0.99));
            border-bottom: 3px solid var(--arduino-teal);
            box-shadow: 0 6px 25px rgba(0, 137, 123, 0.4);
            padding: 20px 40px;
        }

        .header-container {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .arduino-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--arduino-teal), var(--arduino-teal-dark));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.2rem;
            box-shadow: 0 0 40px rgba(0, 137, 123, 0.7);
            animation: arduinoGlow 2s ease-in-out infinite;
        }

        @keyframes arduinoGlow {
            0%, 100% { box-shadow: 0 0 40px rgba(0, 137, 123, 0.7); }
            50% { box-shadow: 0 0 60px rgba(0, 137, 123, 0.9); }
        }

        .header-title h1 {
            font-size: 2rem;
            color: var(--arduino-teal);
            margin-bottom: 5px;
            font-weight: 800;
            text-shadow: 0 0 20px rgba(0, 137, 123, 0.5);
        }

        .header-title p {
            font-size: 0.95rem;
            color: var(--text-secondary);
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 24px;
            border: 2px solid transparent;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn-back {
            background: rgba(255, 255, 255, 0.08);
            color: white;
            border-color: rgba(255, 255, 255, 0.2);
        }

        .btn-back:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .btn-save {
            background: linear-gradient(135deg, var(--arduino-teal), var(--arduino-teal-dark));
            color: white;
            border-color: var(--arduino-teal);
            box-shadow: 0 4px 15px rgba(0, 137, 123, 0.3);
        }

        .btn-save:hover {
            background: linear-gradient(135deg, var(--arduino-teal-dark), var(--arduino-teal));
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 137, 123, 0.5);
        }

        /* Main Container */
        .container {
            position: relative;
            z-index: 1;
            max-width: 1600px;
            margin: 40px auto;
            padding: 0 40px;
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 30px;
        }

        /* Sidebar */
        .sidebar {
            background: linear-gradient(135deg, rgba(0, 69, 60, 0.7), rgba(0, 30, 26, 0.9));
            border: 2px solid rgba(0, 137, 123, 0.3);
            border-radius: 18px;
            padding: 25px;
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .sidebar h2 {
            color: var(--arduino-teal);
            font-size: 1.3rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tab-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .tab-item {
            padding: 12px 15px;
            background: rgba(0, 137, 123, 0.05);
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95rem;
            color: var(--text-secondary);
        }

        .tab-item:hover {
            background: rgba(0, 137, 123, 0.15);
            border-color: rgba(0, 137, 123, 0.3);
            color: var(--text-primary);
        }

        .tab-item.active {
            background: rgba(0, 137, 123, 0.25);
            border-color: var(--arduino-teal);
            color: var(--arduino-teal);
        }

        .tab-item i {
            font-size: 1.1rem;
        }

        /* Stats Panel */
        .stats-panel {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px solid rgba(0, 137, 123, 0.2);
        }

        .stats-panel h3 {
            color: var(--arduino-teal);
            font-size: 1.1rem;
            margin-bottom: 15px;
        }

        .stat-item-sidebar {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .stat-item-sidebar span:first-child {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        .stat-item-sidebar span:last-child {
            color: var(--arduino-teal);
            font-weight: 700;
        }

        /* Main Content Area */
        .content-area {
            background: linear-gradient(135deg, rgba(0, 30, 26, 0.7), rgba(0, 10, 8, 0.9));
            border: 2px solid rgba(0, 137, 123, 0.25);
            border-radius: 18px;
            padding: 35px;
            min-height: 600px;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Content Header */
        .content-header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(0, 137, 123, 0.3);
        }

        .content-header h2 {
            color: var(--arduino-teal);
            font-size: 1.8rem;
            margin-bottom: 8px;
        }

        .content-header p {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        /* Upload Form */
        .upload-form {
            display: grid;
            gap: 25px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(0, 137, 123, 0.3);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--arduino-teal);
            box-shadow: 0 0 15px rgba(0, 137, 123, 0.3);
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-group small {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        /* File Upload Area */
        .file-upload-area {
            padding: 40px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px dashed rgba(0, 137, 123, 0.4);
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload-area:hover {
            border-color: var(--arduino-teal);
            background: rgba(0, 137, 123, 0.1);
        }

        .file-upload-area i {
            font-size: 3rem;
            color: var(--arduino-teal);
            margin-bottom: 15px;
        }

        .file-upload-area p {
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .file-upload-area .supported-formats {
            font-size: 0.85rem;
            color: var(--text-secondary);
            opacity: 0.7;
        }

        /* Components Checklist */
        .components-checklist {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
        }

        .component-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(0, 137, 123, 0.05);
            border: 1px solid rgba(0, 137, 123, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .component-checkbox:hover {
            background: rgba(0, 137, 123, 0.15);
        }

        .component-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .component-checkbox label {
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Projects List */
        .projects-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .project-item {
            padding: 20px;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(0, 137, 123, 0.2);
            border-radius: 12px;
            display: grid;
            grid-template-columns: auto 60px 1fr auto;
            gap: 20px;
            align-items: center;
            transition: all 0.3s ease;
        }

        .project-item:hover {
            border-color: var(--arduino-teal);
            background: rgba(0, 137, 123, 0.05);
        }

        .project-number {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--arduino-teal), var(--arduino-teal-dark));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 800;
            color: white;
        }

        .project-info h4 {
            color: var(--text-primary);
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .project-info p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .project-actions {
            display: flex;
            gap: 10px;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 137, 123, 0.2);
            border: 1px solid rgba(0, 137, 123, 0.3);
            border-radius: 8px;
            color: var(--arduino-teal);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-icon:hover {
            background: var(--arduino-teal);
            color: white;
            transform: translateY(-2px);
        }

        .btn-icon.delete:hover {
            background: var(--primary-red);
            border-color: var(--primary-red);
        }

        /* JSON Editor */
        .json-editor {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid rgba(0, 137, 123, 0.3);
            border-radius: 12px;
            padding: 20px;
            min-height: 500px;
        }

        .json-editor textarea {
            width: 100%;
            min-height: 500px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(0, 137, 123, 0.2);
            border-radius: 8px;
            padding: 20px;
            color: #4CAF50;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* Alert Messages */
        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .alert.success {
            background: rgba(76, 175, 80, 0.2);
            border: 2px solid #4CAF50;
            color: #81C784;
        }

        .alert.error {
            background: rgba(244, 67, 54, 0.2);
            border: 2px solid #F44336;
            color: #EF9A9A;
        }

        .alert.warning {
            background: rgba(255, 193, 7, 0.2);
            border: 2px solid #FFC107;
            color: #FFD54F;
        }

        /* Folder Structure Tree */
        .folder-structure {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(0, 137, 123, 0.3);
            border-radius: 12px;
            padding: 25px;
        }

        .folder-structure pre {
            color: var(--arduino-teal);
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.8;
            overflow-x: auto;
        }

        /* Loading Spinner */
        .loading-spinner {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(0, 137, 123, 0.2);
            border-top-color: var(--arduino-teal);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                position: relative;
                top: 0;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 15px 20px;
            }

            .header-container {
                flex-direction: column;
                gap: 15px;
            }

            .container {
                padding: 0 20px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .components-checklist {
                grid-template-columns: 1fr;
            }
        }

        /* Edit Modal Styles */
        .edit-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 9999;
            overflow-y: auto;
            padding: 40px 20px;
        }

        .edit-modal.active {
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        .edit-modal-content {
            background: linear-gradient(135deg, rgba(0, 30, 26, 0.98), rgba(0, 10, 8, 0.99));
            border: 2px solid var(--arduino-teal);
            border-radius: 20px;
            padding: 40px;
            max-width: 900px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 137, 123, 0.4);
            position: relative;
        }

        .edit-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(0, 137, 123, 0.3);
        }

        .edit-modal-header h2 {
            color: var(--arduino-teal);
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .file-replacement-section {
            margin-top: 25px;
            padding: 20px;
            background: rgba(0, 137, 123, 0.05);
            border: 2px dashed rgba(0, 137, 123, 0.3);
            border-radius: 12px;
        }

        .file-replacement-section h4 {
            color: var(--arduino-teal);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .file-replace-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            margin-bottom: 10px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 137, 123, 0.2);
            border-radius: 8px;
        }

        .file-replace-item label {
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .file-replace-item input[type="file"] {
            max-width: 250px;
            font-size: 0.85rem;
        }

        .modal-close-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(244, 67, 54, 0.2);
            border: 2px solid #F44336;
            color: #F44336;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close-btn:hover {
            background: #F44336;
            color: white;
            transform: rotate(90deg);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-container">
            <div class="header-left">
                <div class="arduino-icon">
                    <i class="fas fa-microchip"></i>
                </div>
                <div class="header-title">
                    <h1>Arduino Projects Manager</h1>
                    <p>Upload, edit, and organize Arduino UNO projects</p>
                </div>
            </div>
            <div class="header-actions">
                <a href="../category-selector.html" class="btn btn-back">
                    <i class="fas fa-arrow-left"></i>
                    <span>Back</span>
                </a>
                <button class="btn btn-save" onclick="saveJSON()">
                    <i class="fas fa-save"></i>
                    <span>Save JSON</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <h2>
                <i class="fas fa-bars"></i>
                Menu
            </h2>
            <div class="tab-list">
                <div class="tab-item active" onclick="switchTab('dashboard')">
                    <i class="fas fa-chart-bar"></i>
                    <span>Dashboard</span>
                </div>
                <div class="tab-item" onclick="switchTab('upload')">
                    <i class="fas fa-upload"></i>
                    <span>Upload New</span>
                </div>
                <div class="tab-item" onclick="switchTab('manage')">
                    <i class="fas fa-list"></i>
                    <span>Manage Projects</span>
                </div>
                <div class="tab-item" onclick="switchTab('json')">
                    <i class="fas fa-code"></i>
                    <span>JSON Editor</span>
                </div>
                <div class="tab-item" onclick="switchTab('structure')">
                    <i class="fas fa-folder-tree"></i>
                    <span>Folder Structure</span>
                </div>
            </div>

            <div class="stats-panel">
                <h3>
                    <i class="fas fa-chart-pie"></i> Quick Stats
                </h3>
                <div class="stat-item-sidebar">
                    <span>Total Projects</span>
                    <span id="totalProjects">23</span>
                </div>
                <div class="stat-item-sidebar">
                    <span>LED Projects</span>
                    <span id="ledProjects">5</span>
                </div>
                <div class="stat-item-sidebar">
                    <span>Sensors</span>
                    <span id="sensorProjects">7</span>
                </div>
                <div class="stat-item-sidebar">
                    <span>Displays</span>
                    <span id="displayProjects">5</span>
                </div>
                <div class="stat-item-sidebar">
                    <span>Advanced</span>
                    <span id="advancedProjects">6</span>
                </div>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <!-- Alert Messages -->
            <div class="alert success" id="successAlert"></div>
            <div class="alert error" id="errorAlert"></div>
            <div class="alert warning" id="warningAlert"></div>

            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboardTab">
                <div class="content-header">
                    <h2><i class="fas fa-chart-bar"></i> Dashboard Overview</h2>
                    <p>Summary of Arduino projects and categories</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div style="padding: 25px; background: rgba(0, 137, 123, 0.15); border: 2px solid rgba(0, 137, 123, 0.3); border-radius: 15px;">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--arduino-teal), var(--arduino-teal-dark)); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-bolt" style="font-size: 1.8rem; color: white;"></i>
                            </div>
                            <div>
                                <h3 style="color: var(--arduino-teal); font-size: 2rem; font-weight: 800;">23</h3>
                                <p style="color: var(--text-secondary); font-size: 0.9rem;">Total Projects</p>
                            </div>
                        </div>
                    </div>

                    <div style="padding: 25px; background: rgba(76, 175, 80, 0.15); border: 2px solid rgba(76, 175, 80, 0.3); border-radius: 15px;">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #4CAF50, #388E3C); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-layer-group" style="font-size: 1.8rem; color: white;"></i>
                            </div>
                            <div>
                                <h3 style="color: #4CAF50; font-size: 2rem; font-weight: 800;">4</h3>
                                <p style="color: var(--text-secondary); font-size: 0.9rem;">Categories</p>
                            </div>
                        </div>
                    </div>

                    <div style="padding: 25px; background: rgba(255, 193, 7, 0.15); border: 2px solid rgba(255, 193, 7, 0.3); border-radius: 15px;">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #FFC107, #FFA000); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-tools" style="font-size: 1.8rem; color: white;"></i>
                            </div>
                            <div>
                                <h3 style="color: #FFC107; font-size: 2rem; font-weight: 800;">~50</h3>
                                <p style="color: var(--text-secondary); font-size: 0.9rem;">Components</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="margin-top: 30px; padding: 25px; background: rgba(0, 0, 0, 0.3); border: 2px solid rgba(0, 137, 123, 0.2); border-radius: 15px;">
                    <h3 style="color: var(--arduino-teal); margin-bottom: 20px;">
                        <i class="fas fa-info-circle"></i> Quick Guide
                    </h3>
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 12px; margin-bottom: 10px; background: rgba(0, 137, 123, 0.05); border-left: 4px solid var(--arduino-teal); border-radius: 8px;">
                            <strong>Upload New:</strong> Add new Arduino projects with code, circuit, and documentation
                        </li>
                        <li style="padding: 12px; margin-bottom: 10px; background: rgba(0, 137, 123, 0.05); border-left: 4px solid var(--arduino-teal); border-radius: 8px;">
                            <strong>Manage:</strong> Edit, delete, or organize existing projects
                        </li>
                        <li style="padding: 12px; margin-bottom: 10px; background: rgba(0, 137, 123, 0.05); border-left: 4px solid var(--arduino-teal); border-radius: 8px;">
                            <strong>JSON Editor:</strong> Direct JSON editing with validation
                        </li>
                        <li style="padding: 12px; background: rgba(0, 137, 123, 0.05); border-left: 4px solid var(--arduino-teal); border-radius: 8px;">
                            <strong>Auto-Organization:</strong> Files renamed and folders created automatically
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Upload Tab -->
            <div class="tab-content" id="uploadTab">
                <div class="content-header">
                    <h2><i class="fas fa-upload"></i> Upload New Project</h2>
                    <p>Add a new Arduino project with all necessary files</p>
                </div>

                <form class="upload-form" id="uploadForm">
                    <!-- Basic Information -->
                    <div class="form-row">
                        <div class="form-group">
                            <label>
                                <i class="fas fa-heading"></i>
                                Project Title
                            </label>
                            <input type="text" id="projectTitle" list="titleSuggestions" placeholder="LED Pattern Control" required>
                            <datalist id="titleSuggestions">
                                <option value="LED Blinking Pattern">
                                <option value="Traffic Light System">
                                <option value="Temperature Sensor Monitor">
                                <option value="Ultrasonic Distance Meter">
                                <option value="Servo Motor Controller">
                                <option value="LCD Display Project">
                                <option value="IR Remote Control">
                                <option value="Motion Detector Alarm">
                                <option value="RGB LED Controller">
                                <option value="Line Following Robot">
                            </datalist>
                            <small>Will auto-generate folder: "24 Project Title"</small>
                        </div>

                        <div class="form-group">
                            <label>
                                <i class="fas fa-tag"></i>
                                Category
                            </label>
                            <select id="projectCategory" required onchange="updateCategoryHelper()">
                                <option value="">-- Select Category --</option>
                                <option value="led-basics">LED Projects</option>
                                <option value="sensors-actuators">Sensors & Actuators</option>
                                <option value="display-input">Displays & Input</option>
                                <option value="advanced-projects">Advanced Projects</option>
                            </select>
                            <small id="categoryHelper" style="color: #00d4ff; display: block; margin-top: 5px; font-style: italic;"></small>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>
                            <i class="fas fa-align-left"></i>
                            Subtitle/Short Description
                        </label>
                        <input type="text" id="projectSubtitle" placeholder="Control LED blinking patterns using potentiometer">
                    </div>

                    <div class="form-group">
                        <label>
                            <i class="fas fa-file-alt"></i>
                            Full Description
                        </label>
                        <div style="display: flex; gap: 8px; margin-bottom: 8px; flex-wrap: wrap;">
                            <button type="button" onclick="insertTemplate('basic')" style="padding: 5px 12px; background: rgba(0, 212, 255, 0.1); border: 1px solid rgba(0, 212, 255, 0.3); border-radius: 6px; color: #00d4ff; cursor: pointer; font-size: 0.85rem; transition: all 0.3s;">
                                <i class="fas fa-lightbulb"></i> Basic Template
                            </button>
                            <button type="button" onclick="insertTemplate('sensor')" style="padding: 5px 12px; background: rgba(0, 212, 255, 0.1); border: 1px solid rgba(0, 212, 255, 0.3); border-radius: 6px; color: #00d4ff; cursor: pointer; font-size: 0.85rem; transition: all 0.3s;">
                                <i class="fas fa-microchip"></i> Sensor Project
                            </button>
                            <button type="button" onclick="insertTemplate('advanced')" style="padding: 5px 12px; background: rgba(0, 212, 255, 0.1); border: 1px solid rgba(0, 212, 255, 0.3); border-radius: 6px; color: #00d4ff; cursor: pointer; font-size: 0.85rem; transition: all 0.3s;">
                                <i class="fas fa-code"></i> Advanced System
                            </button>
                        </div>
                        <textarea id="projectDescription" placeholder="Detailed project description..."></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>
                                <i class="fas fa-signal"></i>
                                Difficulty Level
                            </label>
                            <select id="projectDifficulty">
                                <option value="Beginner">Beginner - Basic concepts</option>
                                <option value="Intermediate">Intermediate - Some experience</option>
                                <option value="Advanced">Advanced - Complex systems</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>
                                <i class="fas fa-link"></i>
                                Tinkercad URL
                            </label>
                            <input type="url" id="tinkercadUrl" placeholder="https://www.tinkercad.com/things/...">
                        </div>
                    </div>

                    <!-- Components Selection -->
                    <div class="form-group">
                        <label>
                            <i class="fas fa-tools"></i>
                            Components Used
                        </label>
                        <div class="components-checklist">
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-arduino" value="Arduino UNO" checked>
                                <label for="comp-arduino">Arduino UNO</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-led" value="LED">
                                <label for="comp-led">LED</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-resistor" value="Resistor">
                                <label for="comp-resistor">Resistor</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-breadboard" value="Breadboard" checked>
                                <label for="comp-breadboard">Breadboard</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-jumper" value="Jumper Wires">
                                <label for="comp-jumper">Jumper Wires</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-pot" value="Potentiometer">
                                <label for="comp-pot">Potentiometer</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-servo" value="Servo Motor">
                                <label for="comp-servo">Servo Motor</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-motor" value="DC Motor">
                                <label for="comp-motor">DC Motor</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-ultrasonic" value="Ultrasonic Sensor">
                                <label for="comp-ultrasonic">Ultrasonic Sensor</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-temp" value="Temperature Sensor">
                                <label for="comp-temp">Temperature Sensor</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-pir" value="PIR Motion Sensor">
                                <label for="comp-pir">PIR Sensor</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-ir" value="IR Sensor">
                                <label for="comp-ir">IR Sensor</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-lcd" value="LCD Display">
                                <label for="comp-lcd">LCD 16x2</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-oled" value="OLED Display">
                                <label for="comp-oled">OLED Display</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-buzzer" value="Buzzer">
                                <label for="comp-buzzer">Buzzer</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-button" value="Push Button">
                                <label for="comp-button">Push Button</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-rgb" value="RGB LED">
                                <label for="comp-rgb">RGB LED</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-relay" value="Relay Module">
                                <label for="comp-relay">Relay Module</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-bluetooth" value="Bluetooth Module">
                                <label for="comp-bluetooth">Bluetooth HC-05</label>
                            </div>
                            <div class="component-checkbox">
                                <input type="checkbox" id="comp-wifi" value="WiFi Module">
                                <label for="comp-wifi">WiFi ESP8266</label>
                            </div>
                        </div>
                        <small style="color: var(--arduino-teal); margin-top: 10px; display: block;">
                            <i class="fas fa-info-circle"></i> 
                            <span id="componentCount">2 components selected</span> (Arduino UNO & Breadboard pre-selected)
                        </small>
                    </div>

                    <!-- File Uploads -->
                    <div class="form-group">
                        <label>
                            <i class="fas fa-file-code"></i>
                            Arduino Code (.ino)
                        </label>
                        <div id="codeDropZone" class="file-upload-area" style="border: 3px dashed rgba(0, 137, 123, 0.4); background: rgba(0, 137, 123, 0.05); padding: 30px; text-align: center; cursor: pointer; transition: all 0.3s;" onclick="document.getElementById('codeFiles').click()">
                            <i class="fas fa-file-code" style="font-size: 3rem; color: var(--arduino-teal); margin-bottom: 10px;"></i>
                            <p style="font-size: 1rem; margin: 10px 0; color: var(--arduino-teal); font-weight: 600;">Drop .ino files here or click to browse</p>
                            <span class="supported-formats" style="color: var(--text-secondary); font-size: 0.9rem;">Max 100MB per file</span>
                            <div id="codeFilesList" style="margin-top: 15px; display: flex; flex-direction: column; gap: 5px;"></div>
                        </div>
                        <input type="file" id="codeFiles" accept=".ino" multiple style="display: none;" onchange="handleCodeFiles(this.files)">
                    </div>

                    <div class="form-group">
                        <label>
                            <i class="fas fa-image"></i>
                            Circuit Diagrams & Project Images
                        </label>
                        <div id="imageDropZone" class="file-upload-area" style="border: 3px dashed rgba(0, 137, 123, 0.4); background: rgba(0, 137, 123, 0.05); padding: 30px; text-align: center; cursor: pointer; transition: all 0.3s;" onclick="document.getElementById('imageFiles').click()">
                            <i class="fas fa-image" style="font-size: 3rem; color: var(--arduino-teal); margin-bottom: 10px;"></i>
                            <p style="font-size: 1rem; margin: 10px 0; color: var(--arduino-teal); font-weight: 600;">Drop images here or click to browse</p>
                            <span class="supported-formats" style="color: var(--text-secondary); font-size: 0.9rem;">.png, .jpg, .jpeg | Max 100MB per file</span>
                            <div id="imagePreviews" style="margin-top: 15px; display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px;"></div>
                        </div>
                        <input type="file" id="imageFiles" accept="image/*" multiple style="display: none;" onchange="handleImagePreview(this.files)">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>
                                <i class="fas fa-file-alt"></i>
                                README.md
                            </label>
                            <div class="file-upload-area" onclick="document.getElementById('readmeFile').click()">
                                <i class="fas fa-file-alt"></i>
                                <p>Upload README</p>
                                <span class="supported-formats">.md files</span>
                            </div>
                            <input type="file" id="readmeFile" accept=".md" style="display: none;">
                        </div>

                        <div class="form-group">
                            <label>
                                <i class="fas fa-graduation-cap"></i>
                                Code Explanation
                            </label>
                            <div class="file-upload-area" onclick="document.getElementById('explanationFile').click()">
                                <i class="fas fa-graduation-cap"></i>
                                <p>Upload Explanation</p>
                                <span class="supported-formats">.md files</span>
                            </div>
                            <input type="file" id="explanationFile" accept=".md" style="display: none;">
                        </div>
                    </div>

                    <div style="display: flex; gap: 15px; margin-top: 20px;">
                        <button type="submit" class="btn btn-save" style="flex: 1; padding: 15px; font-size: 1.1rem;">
                            <i class="fas fa-check-circle"></i>
                            <span>Create Project Entry</span>
                        </button>
                        <button type="button" class="btn" onclick="pushToGitHub()" style="background: linear-gradient(135deg, #333 0%, #1a1a1a 100%); color: white; padding: 15px 30px;">
                            <i class="fab fa-github"></i>
                            Push to GitHub
                        </button>
                    </div>
                </form>
            </div>

            <!-- Manage Tab -->
            <div class="tab-content" id="manageTab">
                <div class="content-header">
                    <h2><i class="fas fa-list"></i> Manage Projects</h2>
                    <p>Edit or delete existing Arduino projects</p>
                </div>

                <div class="form-group" style="margin-bottom: 25px;">
                    <input type="text" id="searchProjects" placeholder="Search projects..." style="width: 100%;">
                </div>

                <!-- Bulk Operations Toolbar -->
                <div id="bulkToolbar" style="display: none; background: rgba(0, 137, 123, 0.1); border: 2px solid var(--arduino-teal); padding: 15px; border-radius: 8px; margin-bottom: 20px; align-items: center; gap: 15px;">
                    <div style="flex: 1;">
                        <i class="fas fa-check-square" style="color: var(--arduino-teal); margin-right: 8px;"></i>
                        <strong id="selectedCount">0</strong> project(s) selected
                    </div>
                    <select id="bulkCategory" style="padding: 8px 12px; border: 2px solid var(--arduino-teal); border-radius: 6px; background: white;">
                        <option value="">-- Move to Category --</option>
                        <option value="led-basics">LED Projects</option>
                        <option value="sensors-actuators">Sensors & Actuators</option>
                        <option value="display-input">Displays & Input</option>
                        <option value="advanced-projects">Advanced Projects</option>
                    </select>
                    <button class="btn" style="background: rgba(0, 137, 123, 0.2); border-color: var(--arduino-teal); color: var(--arduino-teal);" onclick="bulkMoveCategory()">
                        <i class="fas fa-folder-open"></i> Move
                    </button>
                    <button class="btn-danger" style="padding: 8px 16px; border-radius: 6px;" onclick="bulkDelete()">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                    <button class="btn" style="background: rgba(128, 128, 128, 0.2); border-color: #888; color: #888;" onclick="clearSelection()">
                        <i class="fas fa-times"></i> Clear
                    </button>
                </div>

                <div class="projects-list" id="projectsList">
                    <!-- Projects will be loaded here -->
                    <p style="text-align: center; color: var(--text-secondary); padding: 40px;">
                        <i class="fas fa-spinner fa-spin" style="font-size: 2rem; margin-bottom: 15px;"></i><br>
                        Loading projects...
                    </p>
                </div>

                <!-- Pagination Controls -->
                <div id="paginationControls" style="display: none; justify-content: center; align-items: center; gap: 20px; margin-top: 30px; padding: 20px; background: rgba(0, 137, 123, 0.05); border-radius: 8px;">
                    <button id="prevBtn" class="btn" style="background: rgba(0, 137, 123, 0.2); border-color: var(--arduino-teal); color: var(--arduino-teal);" onclick="previousPage()">
                        <i class="fas fa-chevron-left"></i> Previous
                    </button>
                    <span style="font-weight: 600; color: var(--arduino-teal);">
                        Page <span id="currentPageNum">1</span> of <span id="totalPages">1</span>
                    </span>
                    <button id="nextBtn" class="btn" style="background: rgba(0, 137, 123, 0.2); border-color: var(--arduino-teal); color: var(--arduino-teal);" onclick="nextPage()">
                        Next <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>

            <!-- JSON Editor Tab -->
            <div class="tab-content" id="jsonTab">
                <div class="content-header">
                    <h2><i class="fas fa-code"></i> JSON Editor</h2>
                    <p>Direct JSON editing with syntax validation</p>
                </div>

                <div style="margin-bottom: 20px; display: flex; gap: 15px; flex-wrap: wrap;">
                    <button class="btn" style="background: rgba(76, 175, 80, 0.2); border-color: #4CAF50; color: #4CAF50;" onclick="validateJSON()">
                        <i class="fas fa-check-circle"></i>
                        Validate JSON
                    </button>
                    <button class="btn" style="background: rgba(33, 150, 243, 0.2); border-color: #2196F3; color: #2196F3;" onclick="formatJSON()">
                        <i class="fas fa-indent"></i>
                        Format JSON
                    </button>
                    <button class="btn" style="background: rgba(255, 193, 7, 0.2); border-color: #FFC107; color: #FFC107;" onclick="downloadJSON()">
                        <i class="fas fa-download"></i>
                        Download JSON
                    </button>
                    <button class="btn" style="background: rgba(0, 137, 123, 0.2); border-color: var(--arduino-teal); color: var(--arduino-teal);" onclick="document.getElementById('importFileInput').click()">
                        <i class="fas fa-file-import"></i>
                        Import JSON
                    </button>
                    <button class="btn" style="background: rgba(244, 67, 54, 0.2); border-color: #F44336; color: #F44336;" onclick="clearCache()">
                        <i class="fas fa-broom"></i>
                        Clear Cache
                    </button>
                </div>
                <input type="file" id="importFileInput" accept=".json" style="display: none;">

                <div class="json-editor">
                    <textarea id="jsonEditor" spellcheck="false"></textarea>
                </div>
            </div>

            <!-- Folder Structure Tab -->
            <div class="tab-content" id="structureTab">
                <div class="content-header">
                    <h2><i class="fas fa-folder-tree"></i> Folder Structure</h2>
                    <p>Current folder organization for Arduino projects</p>
                </div>

                <div class="folder-structure">
                    <pre id="folderStructure">Loading folder structure...</pre>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global data store
        let arduinoData = {
            projects: [],
            categories: {
                "led-basics": { name: "LED Projects", count: 0 },
                "sensors-actuators": { name: "Sensors & Actuators", count: 0 },
                "display-input": { name: "Displays & Input", count: 0 },
                "advanced-projects": { name: "Advanced Projects", count: 0 }
            },
            statistics: {
                totalProjects: 0,
                lastUpdated: new Date().toISOString()
            }
        };

        // Pagination & Selection
        const ITEMS_PER_PAGE = 10;
        let currentPage = 1;
        let selectedProjects = new Set();
        const CACHE_KEY = 'arduino_projects_cache';
        const CACHE_DURATION = 3600000; // 1 hour

        // ===== SECURITY & VALIDATION =====
        function sanitizeInput(input) {
            const div = document.createElement('div');
            div.textContent = input;
            return div.innerHTML;
        }

        function validateFileSize(file) {
            const MAX_SIZE = 100 * 1024 * 1024; // 100MB
            if (file.size > MAX_SIZE) {
                alert(` File too large: ${(file.size/1024/1024).toFixed(2)}MB\nGitHub limit: 100MB\nPlease compress or split the file.`);
                return false;
            }
            return true;
        }

        function validateFileType(file, allowedExtensions) {
            const ext = file.name.split('.').pop().toLowerCase();
            if (!allowedExtensions.includes(ext)) {
                alert(` Invalid file type: .${ext}\nAllowed: ${allowedExtensions.join(', ')}`);
                return false;
            }
            return true;
        }

        // Update component count display
        function updateComponentCount() {
            const count = document.querySelectorAll('.component-checkbox input:checked').length;
            const counter = document.getElementById('componentCount');
            if (counter) {
                counter.textContent = `${count} component${count !== 1 ? 's' : ''} selected`;
            }
        }

        // Add event listeners to component checkboxes
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.component-checkbox input').forEach(cb => {
                cb.addEventListener('change', updateComponentCount);
            });
        });

        function checkDuplicate(title, excludeId = null) {
            const sanitized = sanitizeInput(title.toLowerCase().trim());
            
            // Exact match check
            const exactMatch = arduinoData.projects.find(p => 
                p.id !== excludeId && p.title.toLowerCase().trim() === sanitized
            );
            
            if (exactMatch) {
                showAlert('error', ` Duplicate Found!\n\nProject "${exactMatch.title}" already exists in "${exactMatch.category}".\n\nPlease use a different name.`);
                return false;
            }
            
            // Similarity check (>80% similar)
            const similarProjects = arduinoData.projects.filter(p => {
                if (p.id === excludeId) return false;
                const similarity = calculateSimilarity(sanitized, p.title.toLowerCase().trim());
                return similarity > 0.8;
            });
            
            if (similarProjects.length > 0) {
                const names = similarProjects.map(p => ` ${p.title}`).join('\n');
                return confirm(` Similar projects found:\n\n${names}\n\nContinue anyway?`);
            }
            
            return true;
        }
        
        // Calculate string similarity (Levenshtein distance)
        function calculateSimilarity(str1, str2) {
            const longer = str1.length > str2.length ? str1 : str2;
            const shorter = str1.length > str2.length ? str2 : str1;
            
            if (longer.length === 0) return 1.0;
            
            const editDistance = levenshteinDistance(longer, shorter);
            return (longer.length - editDistance) / longer.length;
        }
        
        function levenshteinDistance(str1, str2) {
            const matrix = [];
            
            for (let i = 0; i <= str2.length; i++) {
                matrix[i] = [i];
            }
            
            for (let j = 0; j <= str1.length; j++) {
                matrix[0][j] = j;
            }
            
            for (let i = 1; i <= str2.length; i++) {
                for (let j = 1; j <= str1.length; j++) {
                    if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
                        matrix[i][j] = matrix[i - 1][j - 1];
                    } else {
                        matrix[i][j] = Math.min(
                            matrix[i - 1][j - 1] + 1,
                            matrix[i][j - 1] + 1,
                            matrix[i - 1][j] + 1
                        );
                    }
                }
            }
            
            return matrix[str2.length][str1.length];
        }

        // ===== CACHING SYSTEM =====
        function saveToCache(data) {
            try {
                const cache = { data: data, timestamp: Date.now() };
                localStorage.setItem(CACHE_KEY, JSON.stringify(cache));
            } catch (e) {
                console.warn('Cache save failed:', e);
            }
        }

        function loadFromCache() {
            try {
                const cached = localStorage.getItem(CACHE_KEY);
                if (!cached) return null;
                
                const cache = JSON.parse(cached);
                if (Date.now() - cache.timestamp < CACHE_DURATION) {
                    return cache.data;
                }
                localStorage.removeItem(CACHE_KEY);
            } catch (e) {
                console.warn('Cache load failed:', e);
            }
            return null;
        }

        function clearCache() {
            if (confirm('Clear cached data?\n\nThis will reload fresh data from the server.')) {
                localStorage.removeItem(CACHE_KEY);
                alert(' Cache cleared! Reloading...');
                location.reload();
            }
        }

        // Pagination functions
        function nextPage() {
            const totalPages = Math.ceil(arduinoData.projects.length / ITEMS_PER_PAGE);
            if (currentPage < totalPages) {
                currentPage++;
                renderProjectsList();
            }
        }

        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                renderProjectsList();
            }
        }

        // Bulk operations
        function toggleSelection(id) {
            if (selectedProjects.has(id)) {
                selectedProjects.delete(id);
            } else {
                selectedProjects.add(id);
            }
            updateBulkToolbar();
            renderProjectsList();
        }

        function updateBulkToolbar() {
            const toolbar = document.getElementById('bulkToolbar');
            const count = document.getElementById('selectedCount');
            
            if (toolbar && count) {
                if (selectedProjects.size > 0) {
                    toolbar.style.display = 'flex';
                    count.textContent = selectedProjects.size;
                } else {
                    toolbar.style.display = 'none';
                }
            }
        }

        function clearSelection() {
            selectedProjects.clear();
            renderProjectsList();
            updateBulkToolbar();
        }

        function bulkMoveCategory() {
            const newCategory = document.getElementById('bulkCategory').value;
            if (!newCategory) {
                alert(' Please select a category');
                return;
            }

            if (confirm(`Move ${selectedProjects.size} project(s) to ${arduinoData.categories[newCategory].name}?`)) {
                selectedProjects.forEach(id => {
                    const project = arduinoData.projects.find(p => p.id === id);
                    if (project) {
                        project.category = newCategory;
                    }
                });
                
                saveToCache(arduinoData);
                updateStats();
                renderProjectsList();
                document.getElementById('jsonEditor').value = JSON.stringify(arduinoData, null, 2);
                clearSelection();
                alert(` ${selectedProjects.size} project(s) moved!\n\n Download updated JSON and update folder locations in GitHub.`);
            }
        }

        function bulkDelete() {
            if (confirm(` Delete ${selectedProjects.size} project(s)?\n\nThis cannot be undone!`)) {
                const count = selectedProjects.size;
                arduinoData.projects = arduinoData.projects.filter(p => !selectedProjects.has(p.id));
                
                saveToCache(arduinoData);
                updateStats();
                renderProjectsList();
                document.getElementById('jsonEditor').value = JSON.stringify(arduinoData, null, 2);
                generateFolderStructure();
                clearSelection();
                alert(` ${count} project(s) deleted!\n\n Remember to delete folders from GitHub and download updated JSON.`);
            }
        }

        // Export/Import
        function importJSON(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const imported = JSON.parse(e.target.result);
                    
                    if (!imported.projects || !imported.categories) {
                        throw new Error('Invalid JSON structure');
                    }

                    if (confirm(`Import ${imported.projects.length} projects?\n\nThis will replace current data!`)) {
                        arduinoData = imported;
                        saveToCache(arduinoData);
                        updateStats();
                        renderProjectsList();
                        document.getElementById('jsonEditor').value = JSON.stringify(arduinoData, null, 2);
                        generateFolderStructure();
                        alert(' Data imported successfully!');
                    }
                } catch (error) {
                    alert(' Import failed: ' + error.message);
                }
            };
            reader.readAsText(file);
        }

        // Drag & drop setup
        function setupDragDrop(dropZoneId, inputId, callback) {
            const dropZone = document.getElementById(dropZoneId);
            if (!dropZone) return;

            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                }, false);
            });

            ['dragenter', 'dragover'].forEach(eventName => {
                dropZone.addEventListener(eventName, () => {
                    dropZone.style.borderColor = 'var(--arduino-teal)';
                    dropZone.style.background = 'rgba(0, 137, 123, 0.15)';
                });
            });

            ['dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, () => {
                    dropZone.style.borderColor = 'rgba(0, 137, 123, 0.4)';
                    dropZone.style.background = 'rgba(0, 137, 123, 0.05)';
                });
            });

            dropZone.addEventListener('drop', (e) => {
                const files = e.dataTransfer.files;
                document.getElementById(inputId).files = files;
                if (callback) callback(files);
            });
        }

        function handleImagePreview(files) {
            const container = document.getElementById('imagePreviews');
            if (!container) return;
            container.innerHTML = '';
            
            Array.from(files).forEach(file => {
                if (!validateFileSize(file)) return;
                
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const div = document.createElement('div');
                        div.style.cssText = 'position: relative; border-radius: 8px; overflow: hidden; border: 2px solid rgba(0, 137, 123, 0.3);';
                        div.innerHTML = `
                            <img src="${e.target.result}" style="width: 100%; height: 100px; object-fit: cover;">
                            <div style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.7); padding: 5px; font-size: 0.75rem; text-align: center; color: white;">
                                ${file.name}
                            </div>
                        `;
                        container.appendChild(div);
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        function handleCodeFiles(files) {
            const container = document.getElementById('codeFilesList');
            if (!container) return;
            container.innerHTML = '';
            
            Array.from(files).forEach(file => {
                if (!validateFileSize(file)) return;
                const div = document.createElement('div');
                div.style.color = 'var(--arduino-teal)';
                div.innerHTML = `<i class="fas fa-file-code"></i> ${file.name} (${(file.size/1024).toFixed(2)} KB)`;
                container.appendChild(div);
            });
        }

        // ===== FORM SUBMISSION HANDLER =====
        document.getElementById('uploadForm')?.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const title = sanitizeInput(document.getElementById('projectTitle').value.trim());
            const subtitle = sanitizeInput(document.getElementById('projectSubtitle')?.value.trim() || '');
            const description = sanitizeInput(document.getElementById('projectDescription')?.value.trim() || '');
            const category = document.getElementById('projectCategory').value;
            const difficulty = document.getElementById('projectDifficulty')?.value || 'Beginner';
            const tinkercadUrl = document.getElementById('tinkercadUrl')?.value.trim() || '';
            
            if (!title || !category) {
                alert(' Please fill in all required fields!\n\nRequired: Project Title, Category');
                return;
            }
            
            // Validate component selection
            const components = [];
            document.querySelectorAll('.component-checkbox input:checked').forEach(cb => {
                components.push(cb.value);
            });
            
            if (components.length === 0) {
                if (!confirm(' No components selected!\n\nContinue without component list?')) {
                    return;
                }
            }
            
            // Check duplicate
            if (!checkDuplicate(title)) return;
            
            // Get next ID
            const nextId = arduinoData.projects.length > 0 
                ? Math.max(...arduinoData.projects.map(p => p.id)) + 1 
                : 1;
            
            // Create folder name (auto-numbered)
            const folderNumber = String(nextId).padStart(2, '0');
            const folderName = `${folderNumber} ${title}`;
            
            // Get uploaded files info
            const codeFilesList = document.getElementById('codeFilesList')?.textContent || '';
            const hasCode = codeFilesList.length > 0;
            
            // Create project object
            const newProject = {
                id: nextId,
                folder: folderName,
                title: title,
                subtitle: subtitle,
                description: description,
                category: category,
                difficulty: difficulty,
                components: components,
                files: {
                    code: hasCode ? `${title.replace(/\\s+/g, '-')}.ino` : '',
                    circuit: 'circuit-diagram.png',
                    readme: 'README.md',
                    explanation: 'Code Explaination (for beginner).md'
                },
                tinkercadUrl: tinkercadUrl,
                dateAdded: new Date().toISOString(),
                views: 0,
                downloads: 0
            };
            
            // Add to data
            arduinoData.projects.push(newProject);
            arduinoData.statistics.totalProjects = arduinoData.projects.length;
            arduinoData.statistics.lastUpdated = new Date().toISOString();
            
            // Update category counts
            Object.keys(arduinoData.categories).forEach(cat => {
                arduinoData.categories[cat].count = arduinoData.projects.filter(p => p.category === cat).length;
            });
            
            // Save and update UI
            saveToCache(arduinoData);
            updateStats();
            renderProjectsList();
            document.getElementById('jsonEditor').value = JSON.stringify(arduinoData, null, 2);
            generateFolderStructure();
            
            // Show success with auto-generated card preview
            const cardHTML = generateProjectCard(newProject);
            
            const componentsList = components.length > 0 
                ? components.join(', ') 
                : 'No components listed';
            
            alert(` Project Created Successfully!\\n\\n` +
                  ` Project Details:\\n` +
                  `ID: ${nextId}\\n` +
                  `Title: ${title}\\n` +
                  `Category: ${arduinoData.categories[category].name}\\n` +
                  `Difficulty: ${difficulty}\\n` +
                  `Components: ${components.length}\\n` +
                  `Folder: "${folderName}"\\n\\n` +
                  ` Components Used:\\n${componentsList}\\n\\n` +
                  ` Next Steps:\\n` +
                  `1. Download updated JSON from JSON Editor tab\\n` +
                  `2. Create folder: "Projects Storage/Arduino UNO Projects with Tinkercad/${folderName}/"\\n` +
                  `3. Upload your .ino code and circuit images\\n` +
                  `4. Update arduino-data.json in repository\\n` +
                  `5. Project will appear on arduino-projects.html`);
            
            // Reset form
            document.getElementById('uploadForm').reset();
            document.getElementById('codeFilesList').innerHTML = '';
            document.getElementById('imagePreviews').innerHTML = '';
            
            // Switch to manage tab to see the new project
            switchTab('manage');
        });

        // Generate project card HTML for preview
        function generateProjectCard(project) {
            return `<div class="project-card" data-category="${project.category}">
    <div class="project-number">${project.id}</div>
    <h3 class="project-title">${project.title}</h3>
    <p class="project-subtitle">${project.subtitle}</p>
    <div class="project-meta">
        <span><i class="fas fa-microchip"></i> ${project.components.length} Components</span>
        <span><i class="fas fa-eye"></i> ${project.views} Views</span>
    </div>
    <a href="arduino-project-viewer.html?id=${project.id}" class="view-btn">
        <i class="fas fa-arrow-right"></i> View Project
    </a>
</div>`;
        }

        // ===== SMART SUGGESTIONS & TEMPLATES =====
        
        // Category Helper - Shows examples when category selected
        function updateCategoryHelper() {
            const category = document.getElementById('projectCategory').value;
            const helper = document.getElementById('categoryHelper');
            
            const helpers = {
                'led-basics': ' Examples: LED patterns, traffic lights, RGB color mixing',
                'sensors-actuators': ' Examples: Temperature monitoring, ultrasonic distance, servo control',
                'display-input': ' Examples: LCD displays, keypad input, OLED screens',
                'advanced-projects': ' Examples: Robots, IoT systems, complex automation'
            };
            
            helper.textContent = helpers[category] || '';
        }
        
        // Description Templates
        function insertTemplate(type) {
            const descField = document.getElementById('projectDescription');
            const templates = {
                basic: `This project demonstrates [main functionality] using Arduino UNO.

**Components Used:**
- Arduino UNO
- [Component 1]
- [Component 2]
- Jumper wires

**Features:**
- [Feature 1]
- [Feature 2]
- Easy to understand code for beginners

**How it Works:**
The Arduino reads input from [sensor/input] and controls [output device] based on the programmed logic.`,

                sensor: `This sensor-based project uses Arduino to monitor and respond to environmental changes.

**Sensors & Components:**
- Arduino UNO
- [Sensor Type] - for measuring [parameter]
- LCD/LED for display
- [Additional components]

**Functionality:**
- Real-time [parameter] monitoring
- Visual/Audio feedback
- Serial monitor data logging
- Threshold-based alerts

**Applications:**
Perfect for learning sensor interfacing and data processing with Arduino.`,

                advanced: `Advanced Arduino project featuring [system name] with multiple integrated components.

**System Overview:**
This project combines [technology 1] with [technology 2] to create a fully functional [device/system].

**Key Components:**
- Arduino UNO (main controller)
- [Module 1] - for [purpose]
- [Module 2] - for [purpose]  
- Additional circuitry for [function]

**Advanced Features:**
- Multi-tasking using millis()
- Interrupt-based input handling
- Serial communication protocol
- Energy-efficient design

**Technical Highlights:**
- [Technical aspect 1]
- [Technical aspect 2]
- Modular code structure for easy customization

**Skill Level:** Intermediate to Advanced`
            };
            
            if (templates[type]) {
                descField.value = templates[type];
                descField.focus();
            }
        }

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', () => {
            console.log(' Arduino Manager initialized');
            loadExistingData();
            updateStats();
            generateFolderStructure();
            
            // Setup drag & drop
            setupDragDrop('codeDropZone', 'codeFiles', handleCodeFiles);
            setupDragDrop('imageDropZone', 'imageFiles', handleImagePreview);
            
            // Import file listener
            const importInput = document.getElementById('importFileInput');
            if (importInput) {
                importInput.addEventListener('change', importJSON);
            }
        });

        // Tab switching
        function switchTab(tabName) {
            // Remove active from all tabs
            document.querySelectorAll('.tab-item').forEach(item => item.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // Add active to selected
            event.target.closest('.tab-item').classList.add('active');
            document.getElementById(tabName + 'Tab').classList.add('active');

            console.log(` Switched to ${tabName} tab`);
        }

        // Load existing project data
        async function loadExistingData() {
            // Try cache first
            const cached = loadFromCache();
            if (cached) {
                arduinoData = cached;
                console.log(' Loaded from cache:', arduinoData.projects.length, 'projects');
                updateStats();
                renderProjectsList();
                document.getElementById('jsonEditor').value = JSON.stringify(arduinoData, null, 2);
                return;
            }

            // Fetch fresh data
            try {
                const response = await fetch('../../../../Projects Code/Arduino/arduino-data.json');
                if (response.ok) {
                    arduinoData = await response.json();
                    saveToCache(arduinoData);
                    console.log(' Loaded fresh data:', arduinoData.projects.length, 'projects');
                    updateStats();
                    renderProjectsList();
                    document.getElementById('jsonEditor').value = JSON.stringify(arduinoData, null, 2);
                } else {
                    console.log(' No existing data file found, starting fresh');
                }
            } catch (error) {
                console.log(' Using default empty data structure');
            }
        }

        // Update statistics
        function updateStats() {
            const stats = {
                total: arduinoData.projects.length,
                led: arduinoData.projects.filter(p => p.category === 'led-basics').length,
                sensors: arduinoData.projects.filter(p => p.category === 'sensors-actuators').length,
                displays: arduinoData.projects.filter(p => p.category === 'display-input').length,
                advanced: arduinoData.projects.filter(p => p.category === 'advanced-projects').length
            };

            document.getElementById('totalProjects').textContent = stats.total;
            document.getElementById('ledProjects').textContent = stats.led;
            document.getElementById('sensorProjects').textContent = stats.sensors;
            document.getElementById('displayProjects').textContent = stats.displays;
            document.getElementById('advancedProjects').textContent = stats.advanced;
        }

        // Render projects list with pagination
        function renderProjectsList() {
            const container = document.getElementById('projectsList');
            
            if (arduinoData.projects.length === 0) {
                container.innerHTML = `
                    <p style="text-align: center; color: var(--text-secondary); padding: 40px;">
                        <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.5;"></i><br>
                        No projects yet. Upload your first project!
                    </p>
                `;
                if (document.getElementById('paginationControls')) {
                    document.getElementById('paginationControls').style.display = 'none';
                }
                return;
            }

            // Pagination
            const totalPages = Math.ceil(arduinoData.projects.length / ITEMS_PER_PAGE);
            const start = (currentPage - 1) * ITEMS_PER_PAGE;
            const end = start + ITEMS_PER_PAGE;
            const pageProjects = arduinoData.projects.slice(start, end);

            // Update pagination controls if they exist
            if (document.getElementById('currentPageNum')) {
                document.getElementById('currentPageNum').textContent = currentPage;
                document.getElementById('totalPages').textContent = totalPages;
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                if (prevBtn) prevBtn.disabled = currentPage === 1;
                if (nextBtn) nextBtn.disabled = currentPage === totalPages;
                if (document.getElementById('paginationControls')) {
                    document.getElementById('paginationControls').style.display = totalPages > 1 ? 'flex' : 'none';
                }
            }

            container.innerHTML = pageProjects.map(project => `
                <div class="project-item">
                    <input type="checkbox" onchange="toggleSelection(${project.id})" style="width: 20px; height: 20px; cursor: pointer; margin-right: 15px;" ${selectedProjects.has(project.id) ? 'checked' : ''}>
                    <div class="project-number">${project.id}</div>
                    <div class="project-info">
                        <h4>${sanitizeInput(project.title)}</h4>
                        <p>${sanitizeInput(project.subtitle || 'No description')}</p>
                    </div>
                    <div class="project-actions">
                        <button class="btn-icon" onclick="editProject(${project.id})" title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-icon btn-danger" onclick="deleteProject(${project.id})" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Pagination functions
        function nextPage() {
            const totalPages = Math.ceil(arduinoData.projects.length / ITEMS_PER_PAGE);
            if (currentPage < totalPages) {
                currentPage++;
                renderProjectsList();
            }
        }

        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                renderProjectsList();
            }
        }

        // Bulk operations
        function toggleSelection(id) {
            if (selectedProjects.has(id)) {
                selectedProjects.delete(id);
            } else {
                selectedProjects.add(id);
            }
            updateBulkToolbar();
        }

        function updateBulkToolbar() {
            const toolbar = document.getElementById('bulkToolbar');
            const count = document.getElementById('selectedCount');
            
            if (toolbar && count) {
                if (selectedProjects.size > 0) {
                    toolbar.style.display = 'block';
                    count.textContent = selectedProjects.size;
                } else {
                    toolbar.style.display = 'none';
                }
            }
        }

        function clearSelection() {
            selectedProjects.clear();
            renderProjectsList();
            updateBulkToolbar();
        }

        function bulkMoveCategory() {
            const newCategory = document.getElementById('bulkCategory').value;
            if (!newCategory) {
                alert(' Please select a category');
                return;
            }

            if (confirm(`Move ${selectedProjects.size} project(s) to ${arduinoData.categories[newCategory].name}?`)) {
                selectedProjects.forEach(id => {
                    const project = arduinoData.projects.find(p => p.id === id);
                    if (project) {
                        project.category = newCategory;
                    }
                });
                
                saveToCache(arduinoData);
                updateStats();
                renderProjectsList();
                document.getElementById('jsonEditor').value = JSON.stringify(arduinoData, null, 2);
                clearSelection();
                alert(` ${selectedProjects.size} project(s) moved!\n\n Download updated JSON and update folder locations in GitHub.`);
            }
        }

        function bulkDelete() {
            if (confirm(` Delete ${selectedProjects.size} project(s)?\n\nThis cannot be undone!`)) {
                arduinoData.projects = arduinoData.projects.filter(p => !selectedProjects.has(p.id));
                
                saveToCache(arduinoData);
                updateStats();
                renderProjectsList();
                document.getElementById('jsonEditor').value = JSON.stringify(arduinoData, null, 2);
                generateFolderStructure();
                clearSelection();
                alert(` ${selectedProjects.size} project(s) deleted!\n\n Remember to delete folders from GitHub and download updated JSON.`);
            }
        }

        // Export/Import
        function importJSON(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const imported = JSON.parse(e.target.result);
                    
                    if (!imported.projects || !imported.categories) {
                        throw new Error('Invalid JSON structure');
                    }

                    if (confirm(`Import ${imported.projects.length} projects?\n\nThis will replace current data!`)) {
                        arduinoData = imported;
                        saveToCache(arduinoData);
                        updateStats();
                        renderProjectsList();
                        document.getElementById('jsonEditor').value = JSON.stringify(arduinoData, null, 2);
                        generateFolderStructure();
                        alert(' Data imported successfully!');
                    }
                } catch (error) {
                    alert(' Import failed: ' + error.message);
                }
            };
            reader.readAsText(file);
        }

        // Drag & drop setup
        function setupDragDrop(dropZoneId, inputId, callback) {
            const dropZone = document.getElementById(dropZoneId);
            if (!dropZone) return;

            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                }, false);
            });

            ['dragenter', 'dragover'].forEach(eventName => {
                dropZone.addEventListener(eventName, () => {
                    dropZone.style.borderColor = 'var(--arduino-teal)';
                    dropZone.style.background = 'rgba(0, 137, 123, 0.15)';
                });
            });

            ['dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, () => {
                    dropZone.style.borderColor = 'rgba(0, 137, 123, 0.4)';
                    dropZone.style.background = 'rgba(0, 137, 123, 0.05)';
                });
            });

            dropZone.addEventListener('drop', (e) => {
                const files = e.dataTransfer.files;
                document.getElementById(inputId).files = files;
                if (callback) callback(files);
            });
        }

        function handleImagePreview(files) {
            const container = document.getElementById('imagePreviews');
            if (!container) return;
            container.innerHTML = '';
            
            Array.from(files).forEach(file => {
                if (!validateFileSize(file)) return;
                
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const div = document.createElement('div');
                        div.style.cssText = 'position: relative; border-radius: 8px; overflow: hidden; border: 2px solid rgba(0, 137, 123, 0.3);';
                        div.innerHTML = `
                            <img src="${e.target.result}" style="width: 100%; height: 100px; object-fit: cover;">
                            <div style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.7); padding: 5px; font-size: 0.75rem; text-align: center; color: white;">
                                ${file.name}
                            </div>
                        `;
                        container.appendChild(div);
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        function handleCodeFiles(files) {
            const container = document.getElementById('codeFilesList');
            if (!container) return;
            container.innerHTML = '';
            
            Array.from(files).forEach(file => {
                if (!validateFileSize(file)) return;
                const div = document.createElement('div');
                div.style.color = 'var(--arduino-teal)';
                div.innerHTML = `<i class="fas fa-file-code"></i> ${file.name} (${(file.size/1024).toFixed(2)} KB)`;
                container.appendChild(div);
            });
        }

        // Upload form submission
        document.getElementById('uploadForm')?.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const title = sanitizeInput(document.getElementById('projectTitle').value.trim());
            
            // Duplicate check (no exclusion for new projects)
            if (!checkDuplicate(title)) {
                return;
            }

            // File size validation
            const allFiles = [
                ...document.getElementById('codeFiles').files,
                ...document.getElementById('imageFiles').files,
                document.getElementById('readmeFile').files[0],
                document.getElementById('explanationFile').files[0]
            ].filter(f => f);

            for (const file of allFiles) {
                if (!validateFileSize(file)) {
                    return;
                }
            }
            
            const projectNumber = arduinoData.projects.length + 1;
            
            const newProject = {
                id: projectNumber,
                folder: generateFolderName(projectNumber, title),
                title: title,
                subtitle: sanitizeInput(document.getElementById('projectSubtitle').value.trim()),
                category: document.getElementById('projectCategory').value,
                difficulty: document.getElementById('projectDifficulty').value,
                description: sanitizeInput(document.getElementById('projectDescription').value.trim()),
                components: Array.from(document.querySelectorAll('.component-checkbox input:checked')).map(cb => sanitizeInput(cb.value)),
                files: {
                    code: Array.from(document.getElementById('codeFiles').files).map(f => f.name),
                    images: Array.from(document.getElementById('imageFiles').files).map(f => f.name),
                    readme: document.getElementById('readmeFile').files[0]?.name || '',
                    explanation: document.getElementById('explanationFile').files[0]?.name || '',
                    tinkercadUrl: document.getElementById('tinkercadUrl').value.trim()
                },
                dateAdded: new Date().toISOString(),
                lastModified: new Date().toISOString(),
                views: 0,
                downloads: 0
            };

            arduinoData.projects.push(newProject);
            arduinoData.statistics.totalProjects = arduinoData.projects.length;
            arduinoData.statistics.lastUpdated = new Date().toISOString();

            saveToCache(arduinoData);
            showAlert('success', ` Project "${newProject.title}" added successfully!\n\n Folder: ${newProject.folder}\n Components: ${newProject.components.length}\n\n Don't forget to save JSON and upload files to GitHub.`);
            
            updateStats();
            renderProjectsList();
            document.getElementById('jsonEditor').value = JSON.stringify(arduinoData, null, 2);
            generateFolderStructure();
            document.getElementById('uploadForm').reset();
            
            // Clear previews
            if (document.getElementById('codeFilesList')) {
                document.getElementById('codeFilesList').innerHTML = '';
            }
            if (document.getElementById('imagePreviews')) {
                document.getElementById('imagePreviews').innerHTML = '';
            }
        });

        // Edit project
        function editProject(id) {
            const project = arduinoData.projects.find(p => p.id === id);
            if (!project) return;

            // Populate edit form
            document.getElementById('editProjectId').value = project.id;
            document.getElementById('editTitle').value = project.title;
            document.getElementById('editSubtitle').value = project.subtitle || '';
            document.getElementById('editCategory').value = project.category;
            document.getElementById('editDifficulty').value = project.difficulty || 'Beginner';
            document.getElementById('editDescription').value = project.description || '';
            document.getElementById('editTinkercadUrl').value = project.files?.tinkercadUrl || '';
            
            // Populate components
            const allComponents = [
                'Arduino UNO', 'LED', 'Resistor', 'Breadboard', 'Jumper Wires',
                'Potentiometer', 'Servo Motor', 'DC Motor', 'Ultrasonic Sensor',
                'Temperature Sensor', 'PIR Motion Sensor', 'IR Sensor',
                'LCD Display', 'OLED Display', 'Buzzer', 'Push Button',
                'RGB LED', 'Relay Module', 'Bluetooth Module', 'WiFi Module'
            ];
            
            const componentsContainer = document.getElementById('editComponentsContainer');
            componentsContainer.innerHTML = allComponents.map((comp, idx) => {
                const isChecked = project.components && project.components.includes(comp);
                return `
                    <div class="component-checkbox">
                        <input type="checkbox" id="edit-comp-${idx}" value="${comp}" ${isChecked ? 'checked' : ''}>
                        <label for="edit-comp-${idx}">${comp}</label>
                    </div>
                `;
            }).join('');
            
            // Update component count
            updateEditComponentCount();
            
            // Add event listeners to checkboxes
            componentsContainer.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                cb.addEventListener('change', updateEditComponentCount);
            });
            
            // Show modal
            document.getElementById('editModal').classList.add('active');
        }

        // Update component count in edit modal
        function updateEditComponentCount() {
            const count = document.querySelectorAll('#editComponentsContainer input:checked').length;
            const counter = document.getElementById('editComponentCount');
            if (counter) {
                counter.textContent = `${count} component${count !== 1 ? 's' : ''} selected`;
            }
        }

        // Close edit modal
        function closeEditModal() {
            document.getElementById('editModal').classList.remove('active');
        }

        // Save edited project
        function saveEditedProject() {
            const id = parseInt(document.getElementById('editProjectId').value);
            const project = arduinoData.projects.find(p => p.id === id);
            if (!project) return;

            // Get updated values
            const newTitle = sanitizeInput(document.getElementById('editTitle').value.trim());
            
            // Check duplicate (excluding current project)
            if (!checkDuplicate(newTitle, id)) {
                return;
            }

            // Update project data
            project.title = newTitle;
            project.subtitle = sanitizeInput(document.getElementById('editSubtitle').value.trim());
            project.category = document.getElementById('editCategory').value;
            project.difficulty = document.getElementById('editDifficulty').value;
            project.description = sanitizeInput(document.getElementById('editDescription').value.trim());
            
            // Update components
            project.components = [];
            document.querySelectorAll('#editComponentsContainer input:checked').forEach(cb => {
                project.components.push(cb.value);
            });
            
            if (!project.files) project.files = {};
            project.files.tinkercadUrl = document.getElementById('editTinkercadUrl').value.trim();
            
            // Handle file replacements
            const replacedFiles = [];
            const codeFile = document.getElementById('replaceCodeFile').files[0];
            const imageFiles = document.getElementById('replaceImageFiles').files;
            const readmeFile = document.getElementById('replaceReadmeFile').files[0];
            const explanationFile = document.getElementById('replaceExplanationFile').files[0];
            
            if (codeFile) {
                if (!validateFileSize(codeFile)) return;
                project.files.code = [codeFile.name];
                replacedFiles.push(`Code: ${codeFile.name}`);
            }
            
            if (imageFiles.length > 0) {
                const validImages = Array.from(imageFiles).filter(f => validateFileSize(f));
                if (validImages.length > 0) {
                    project.files.images = validImages.map(f => f.name);
                    replacedFiles.push(`Images: ${validImages.length} file(s)`);
                }
            }
            
            if (readmeFile) {
                if (!validateFileSize(readmeFile)) return;
                project.files.readme = readmeFile.name;
                replacedFiles.push(`README: ${readmeFile.name}`);
            }
            
            if (explanationFile) {
                if (!validateFileSize(explanationFile)) return;
                project.files.explanation = explanationFile.name;
                replacedFiles.push(`Explanation: ${explanationFile.name}`);
            }
            
            // Auto-rename folder with proper numbering
            const projectIndex = arduinoData.projects.findIndex(p => p.id === id);
            project.folder = generateFolderName(projectIndex + 1, project.title);
            
            // Update statistics
            arduinoData.statistics.lastUpdated = new Date().toISOString();
            project.lastModified = new Date().toISOString();
            
            saveToCache(arduinoData);
            
            // Update displays
            updateStats();
            renderProjectsList();
            updateJSONEditor();
            closeEditModal();
            
            const filesInfo = replacedFiles.length > 0 
                ? `\n\n Replaced Files:\n${replacedFiles.map(f => `   ${f}`).join('\n')}` 
                : '';
            
            showAlert('success', ` Project updated successfully!\n\n Updated: ${project.components.length} components${filesInfo}\n\n Remember to download JSON and push to GitHub.`);
        }
        
        // Generate folder name with auto-numbering
        function generateFolderName(number, title) {
            const paddedNumber = String(number).padStart(2, '0');
            const sanitizedTitle = sanitizeInput(title)
                .replace(/[^a-zA-Z0-9\s-]/g, '') // Remove special chars
                .replace(/\s+/g, ' ') // Normalize spaces
                .trim();
            return `${paddedNumber} ${sanitizedTitle}`;
        }
        
        // Validate replacement file
        function validateReplaceFile(input) {
            const files = input.files;
            if (!files || files.length === 0) return true;
            
            let allValid = true;
            Array.from(files).forEach(file => {
                if (!validateFileSize(file)) {
                    allValid = false;
                    input.value = ''; // Clear invalid file
                }
            });
            
            return allValid;
        }
        
        // Update JSON editor
        function updateJSONEditor() {
            const editor = document.getElementById('jsonEditor');
            if (editor) {
                editor.value = JSON.stringify(arduinoData, null, 2);
            }
        }

        // Delete project
        function deleteProject(id) {
            if (confirm('Are you sure you want to delete this project?')) {
                arduinoData.projects = arduinoData.projects.filter(p => p.id !== id);
                arduinoData.statistics.totalProjects = arduinoData.projects.length;
                
                showAlert('success', ' Project deleted successfully!');
                updateStats();
                renderProjectsList();
                document.getElementById('jsonEditor').value = JSON.stringify(arduinoData, null, 2);
            }
        }

        // Validate JSON
        function validateJSON() {
            try {
                const content = document.getElementById('jsonEditor').value;
                const parsed = JSON.parse(content);
                
                // Basic validation
                if (!parsed.projects || !Array.isArray(parsed.projects)) {
                    throw new Error('Invalid structure: projects array missing');
                }
                
                arduinoData = parsed;
                showAlert('success', ' JSON is valid!');
                updateStats();
                renderProjectsList();
            } catch (error) {
                showAlert('error', ' JSON Validation Error: ' + error.message);
            }
        }

        // Format JSON
        function formatJSON() {
            try {
                const content = document.getElementById('jsonEditor').value;
                const parsed = JSON.parse(content);
                document.getElementById('jsonEditor').value = JSON.stringify(parsed, null, 2);
                showAlert('success', ' JSON formatted!');
            } catch (error) {
                showAlert('error', ' Cannot format invalid JSON');
            }
        }

        // Save JSON
        function saveJSON() {
            validateJSON();
            downloadJSON();
        }

        // Download JSON
        function downloadJSON() {
            const dataStr = JSON.stringify(arduinoData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'arduino-data.json';
            a.click();
            URL.revokeObjectURL(url);
            
            showAlert('success', ' JSON downloaded! Upload to: Projects Code/Arduino/arduino-data.json');
        }

        // Generate folder structure
        function generateFolderStructure() {
            const structure = `
Projects Storage/Arduino UNO Projects with Tinkercad/
 01 LED Pattern/
    Led-pattern.ino
    circuit-diagram.png
    README.md
    Code Explaination (for beginner).md
    LICENSE
 02 LED Flowing Blinking/
    LED.blinking.ino
    circuit-diagram.png
    README.md
    ...
 03 Breathing a LED/
 ... (${arduinoData.projects.length} projects total)

 Statistics:
   Total Projects: ${arduinoData.projects.length}
   LED Projects: ${arduinoData.projects.filter(p => p.category === 'led-basics').length}
   Sensor Projects: ${arduinoData.projects.filter(p => p.category === 'sensors-actuators').length}
   Display Projects: ${arduinoData.projects.filter(p => p.category === 'display-input').length}
   Advanced Projects: ${arduinoData.projects.filter(p => p.category === 'advanced-projects').length}
            `.trim();

            document.getElementById('folderStructure').textContent = structure;
        }

        // Render projects list with edit/delete buttons
        function renderProjectsList() {
            const container = document.getElementById('projectsList');
            if (!container) return;
            
            if (arduinoData.projects.length === 0) {
                container.innerHTML = `
                    <div style="padding: 40px; text-align: center; color: var(--text-secondary);">
                        <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.5;"></i>
                        <h3>No projects yet</h3>
                        <p>Upload your first Arduino project to get started!</p>
                    </div>
                `;
                return;
            }
            
            // Pagination
            const start = (currentPage - 1) * ITEMS_PER_PAGE;
            const end = start + ITEMS_PER_PAGE;
            const pageProjects = arduinoData.projects.slice(start, end);
            
            container.innerHTML = pageProjects.map(project => `
                <div class="project-item">
                    <input type="checkbox" onchange="toggleSelection(${project.id})" 
                           style="width: 20px; height: 20px; cursor: pointer;" 
                           ${selectedProjects.has(project.id) ? 'checked' : ''}>
                    <div class="project-number">${String(project.id).padStart(2, '0')}</div>
                    <div class="project-info">
                        <h4>${sanitizeInput(project.title)}</h4>
                        <p><i class="fas fa-folder"></i> ${sanitizeInput(project.folder)}</p>
                        <p><i class="fas fa-tag"></i> ${arduinoData.categories[project.category]?.name || project.category}</p>
                        ${project.components && project.components.length > 0 ? 
                            `<p><i class="fas fa-microchip"></i> ${project.components.length} components</p>` : ''}
                    </div>
                    <div class="project-actions">
                        <button class="btn-icon" onclick="editProject(${project.id})" title="Edit Project">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-icon delete" onclick="deleteProject(${project.id})" title="Delete Project">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
            
            // Update pagination
            const totalPages = Math.ceil(arduinoData.projects.length / ITEMS_PER_PAGE);
            if (document.getElementById('currentPageNum')) {
                document.getElementById('currentPageNum').textContent = currentPage;
                document.getElementById('totalPages').textContent = totalPages;
            }
        }
        
        // Edit project function
        function editProject(id) {
            const project = arduinoData.projects.find(p => p.id === id);
            if (!project) {
                showAlert('error', ' Project not found!');
                return;
            }

            // Populate edit form
            document.getElementById('editProjectId').value = project.id;
            document.getElementById('editTitle').value = project.title;
            document.getElementById('editSubtitle').value = project.subtitle || '';
            document.getElementById('editCategory').value = project.category;
            document.getElementById('editDifficulty').value = project.difficulty || 'Beginner';
            document.getElementById('editDescription').value = project.description || '';
            document.getElementById('editTinkercadUrl').value = project.files?.tinkercadUrl || project.tinkercad || '';
            
            // Populate components
            const allComponents = [
                'Arduino UNO', 'LED', 'Resistor', 'Breadboard', 'Jumper Wires',
                'Potentiometer', 'Servo Motor', 'DC Motor', 'Ultrasonic Sensor',
                'Temperature Sensor', 'PIR Motion Sensor', 'IR Sensor',
                'LCD Display', 'OLED Display', 'Buzzer', 'Push Button',
                'RGB LED', 'Relay Module', 'Bluetooth Module', 'WiFi Module'
            ];
            
            const componentsContainer = document.getElementById('editComponentsContainer');
            if (componentsContainer) {
                componentsContainer.innerHTML = allComponents.map((comp, idx) => {
                    const isChecked = project.components && project.components.includes(comp);
                    return `
                        <div class="component-checkbox">
                            <input type="checkbox" id="edit-comp-${idx}" value="${comp}" ${isChecked ? 'checked' : ''}>
                            <label for="edit-comp-${idx}">${comp}</label>
                        </div>
                    `;
                }).join('');
                
                // Update component count
                updateEditComponentCount();
                
                // Add event listeners to checkboxes
                componentsContainer.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                    cb.addEventListener('change', updateEditComponentCount);
                });
            }
            
            // Display current files
            displayCurrentFiles(project);
            
            // Show modal
            const modal = document.getElementById('editModal');
            if (modal) {
                modal.classList.add('active');
            }
        }
        
        // Display current project files
        function displayCurrentFiles(project) {
            // Code files
            const codeContainer = document.getElementById('currentCodeFiles');
            if (codeContainer && project.files && project.files.code) {
                const codeFiles = Array.isArray(project.files.code) ? project.files.code : [project.files.code];
                codeContainer.innerHTML = codeFiles.length > 0 
                    ? ` Current: ${codeFiles.map(f => `<span style="background: rgba(0, 137, 123, 0.2); padding: 2px 8px; border-radius: 4px; margin-right: 5px;">${f}</span>`).join('')}` 
                    : ' No files';
            }
            
            // Image files
            const imageContainer = document.getElementById('currentImageFiles');
            if (imageContainer && project.files && project.files.images) {
                const imageFiles = Array.isArray(project.files.images) ? project.files.images : [project.files.images];
                imageContainer.innerHTML = imageFiles.length > 0 
                    ? ` Current: ${imageFiles.length} file(s) - ${imageFiles.map(f => `<span style="background: rgba(0, 137, 123, 0.2); padding: 2px 8px; border-radius: 4px; margin-right: 5px;">${f}</span>`).join('')}` 
                    : ' No files';
            }
            
            // README file
            const readmeContainer = document.getElementById('currentReadmeFile');
            if (readmeContainer && project.files) {
                readmeContainer.innerHTML = project.files.readme 
                    ? ` Current: <span style="background: rgba(0, 137, 123, 0.2); padding: 2px 8px; border-radius: 4px;">${project.files.readme}</span>` 
                    : ' No file';
            }
            
            // Explanation file
            const explanationContainer = document.getElementById('currentExplanationFile');
            if (explanationContainer && project.files) {
                explanationContainer.innerHTML = project.files.explanation 
                    ? ` Current: <span style="background: rgba(0, 137, 123, 0.2); padding: 2px 8px; border-radius: 4px;">${project.files.explanation}</span>` 
                    : ' No file';
            }
        }
        
        // Delete project file
        function deleteProjectFile(fileType) {
            const id = parseInt(document.getElementById('editProjectId').value);
            const project = arduinoData.projects.find(p => p.id === id);
            if (!project || !project.files) return;
            
            const fileNames = {
                'code': 'Arduino Code',
                'images': 'Circuit Images',
                'readme': 'README.md',
                'explanation': 'Explanation Document'
            };
            
            if (confirm(` Delete ${fileNames[fileType]}?\n\n This will remove from JSON only.\nYou must manually delete files from GitHub folder.`)) {
                // Delete from project object
                if (fileType === 'code' || fileType === 'images') {
                    project.files[fileType] = [];
                } else {
                    project.files[fileType] = '';
                }
                
                // Update display
                displayCurrentFiles(project);
                
                // Show success message
                const tempAlert = document.createElement('div');
                tempAlert.style.cssText = 'position: fixed; top: 20px; right: 20px; background: rgba(76, 175, 80, 0.95); color: white; padding: 15px 20px; border-radius: 8px; z-index: 99999; box-shadow: 0 4px 12px rgba(0,0,0,0.3);';
                tempAlert.innerHTML = `<i class="fas fa-check-circle"></i> ${fileNames[fileType]} marked for deletion!`;
                document.body.appendChild(tempAlert);
                setTimeout(() => tempAlert.remove(), 3000);
            }
        }
        
        // Delete project function
        function deleteProject(id) {
            const project = arduinoData.projects.find(p => p.id === id);
            if (!project) return;

            if (confirm(` Delete "${project.title}"?\n\n Folder: ${project.folder}\n\nThis action cannot be undone in JSON.\n\n You'll need to manually delete the folder from GitHub.`)) {
                // Remove from array
                arduinoData.projects = arduinoData.projects.filter(p => p.id !== id);
                arduinoData.statistics.totalProjects = arduinoData.projects.length;
                arduinoData.statistics.lastUpdated = new Date().toISOString();
                
                saveToCache(arduinoData);
                
                showAlert('success', ` Project "${project.title}" deleted from JSON!\n\n Don't forget to:\n1. Delete folder "${project.folder}" from GitHub\n2. Download updated JSON\n3. Push changes to GitHub`);
                
                updateStats();
                renderProjectsList();
                updateJSONEditor();
                generateFolderStructure();
            }
        }

        // Show alert messages
        function showAlert(type, message) {
            const alert = document.getElementById(type + 'Alert');
            if (!alert) return;
            alert.textContent = message;
            alert.style.display = 'block';
            
            setTimeout(() => {
                alert.style.display = 'none';
            }, 5000);
        }

        // Search projects
        document.getElementById('searchProjects')?.addEventListener('input', (e) => {
            const search = e.target.value.toLowerCase();
            const filtered = arduinoData.projects.filter(p => 
                p.title.toLowerCase().includes(search) || 
                (p.subtitle && p.subtitle.toLowerCase().includes(search))
            );

            const container = document.getElementById('projectsList');
            container.innerHTML = filtered.map(project => `
                <div class="project-item">
                    <div class="project-number">${project.id}</div>
                    <div class="project-info">
                        <h4>${project.title}</h4>
                        <p>${project.subtitle || 'No description'}</p>
                    </div>
                    <div class="project-actions">
                        <button class="btn-icon" onclick="editProject(${project.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-icon delete" onclick="deleteProject(${project.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        });
    </script>

    <!-- Advanced Feature Modules -->
    <script src="../shared-utilities.js"></script>
    <script src="../github-api-handler.js"></script>
    <script src="../version-history.js"></script>
    <script src="../tags-system.js"></script>
    <script src="../advanced-search.js"></script>
    <script src="../analytics-dashboard.js"></script>
    <script src="../readme-generator.js"></script>
    
    <!-- Chart.js for Analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        // Initialize Advanced Features
        let githubHandler, versionHistory, tagsManager, advancedSearch, analyticsInstance, readmeGenerator;

        window.addEventListener('DOMContentLoaded', () => {
            githubHandler = new GitHubAPIHandler();
            versionHistory = new VersionHistoryManager('arduino_projects');
            tagsManager = new TagsManager();
            advancedSearch = new AdvancedSearchManager();
            analyticsInstance = new AnalyticsDashboard([]);
            readmeGenerator = new READMEGenerator();

            githubHandler.loadToken();
            console.log(' All advanced features loaded for Arduino Manager');
        });

        window.pushToGitHub = async function() {
            if (!await githubHandler.verifyToken()) {
                showGitHubAuthModal(githubHandler);
                return;
            }

            try {
                await showUploadProgressModal(async (updateProgress) => {
                    await githubHandler.uploadTextFile(
                        'Projects Code/Arduino/arduino-data.json',
                        JSON.stringify(arduinoData, null, 2),
                        'Update Arduino projects data'
                    );
                    updateProgress(100, 'Complete!');
                });
                
                alert(' Pushed to GitHub successfully!');
            } catch (error) {
                alert(' GitHub push failed: ' + error.message);
            }
        };

        window.generateREADME = async function(projectId) {
            const project = arduinoData.projects.find(p => p.id === projectId);
            if (!project) return;
            await showREADMEPreview(project, readmeGenerator);
        };

        window.showVersionHistory = function(projectId) {
            showVersionHistoryModal(projectId, versionHistory, arduinoData.projects);
        };
    </script>

    <!-- Edit Modal -->
    <div id="editModal" class="edit-modal">
        <div class="edit-modal-content">
            <div class="edit-modal-header">
                <h2>
                    <i class="fas fa-edit"></i>
                    Edit Project
                </h2>
                <button class="modal-close-btn" onclick="closeEditModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="editForm" onsubmit="event.preventDefault(); saveEditedProject();">
                <input type="hidden" id="editProjectId">
                
                <div class="form-group">
                    <label>
                        <i class="fas fa-heading"></i>
                        Project Title *
                    </label>
                    <input type="text" id="editTitle" class="form-input" required>
                </div>

                <div class="form-group">
                    <label>
                        <i class="fas fa-align-left"></i>
                        Subtitle
                    </label>
                    <input type="text" id="editSubtitle" class="form-input">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>
                            <i class="fas fa-tag"></i>
                            Category *
                        </label>
                        <select id="editCategory" class="form-input" required>
                            <option value="">-- Select Category --</option>
                            <option value="led-basics">LED Projects</option>
                            <option value="sensors-actuators">Sensors & Actuators</option>
                            <option value="display-input">Displays & Input</option>
                            <option value="advanced-projects">Advanced Projects</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>
                            <i class="fas fa-signal"></i>
                            Difficulty Level
                        </label>
                        <select id="editDifficulty" class="form-input">
                            <option value="Beginner">Beginner</option>
                            <option value="Intermediate">Intermediate</option>
                            <option value="Advanced">Advanced</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        <i class="fas fa-align-left"></i>
                        Description
                    </label>
                    <textarea id="editDescription" class="form-input" rows="4"></textarea>
                </div>

                <div class="form-group">
                    <label>
                        <i class="fas fa-link"></i>
                        Tinkercad URL
                    </label>
                    <input type="url" id="editTinkercadUrl" class="form-input" placeholder="https://www.tinkercad.com/things/...">
                </div>

                <div class="form-group">
                    <label>
                        <i class="fas fa-microchip"></i>
                        Required Components
                    </label>
                    <div id="editComponentsContainer" class="components-checklist" style="max-height: 200px; overflow-y: auto;">
                        <!-- Components will be populated dynamically -->
                    </div>
                    <small style="color: var(--arduino-teal); margin-top: 10px; display: block;">
                        <i class="fas fa-info-circle"></i> 
                        <span id="editComponentCount">0 components selected</span>
                    </small>
                </div>

                <!-- File Replacement Section -->
                <div class="file-replacement-section">
                    <h4>
                        <i class="fas fa-file-upload"></i>
                        Manage Project Files
                    </h4>
                    <p style="color: var(--text-secondary); font-size: 0.85rem; margin-bottom: 15px;">
                         Delete existing files or  Upload new versions to replace them.
                    </p>
                    
                    <div class="file-replace-item">
                        <div style="flex: 1;">
                            <label>
                                <i class="fas fa-file-code"></i>
                                Arduino Code (.ino)
                            </label>
                            <div id="currentCodeFiles" style="color: var(--arduino-teal); font-size: 0.85rem; margin-top: 5px;">
                                <!-- Current files will be shown here -->
                            </div>
                        </div>
                        <div style="display: flex; gap: 8px; align-items: center;">
                            <button type="button" class="btn" onclick="deleteProjectFile('code')" style="background: rgba(244, 67, 54, 0.2); border-color: #F44336; color: #F44336; padding: 8px 15px;">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                            <input type="file" id="replaceCodeFile" accept=".ino,.cpp,.c" onchange="validateReplaceFile(this)" style="max-width: 200px;">
                        </div>
                    </div>
                    
                    <div class="file-replace-item">
                        <div style="flex: 1;">
                            <label>
                                <i class="fas fa-images"></i>
                                Circuit Images
                            </label>
                            <div id="currentImageFiles" style="color: var(--arduino-teal); font-size: 0.85rem; margin-top: 5px;">
                                <!-- Current files will be shown here -->
                            </div>
                        </div>
                        <div style="display: flex; gap: 8px; align-items: center;">
                            <button type="button" class="btn" onclick="deleteProjectFile('images')" style="background: rgba(244, 67, 54, 0.2); border-color: #F44336; color: #F44336; padding: 8px 15px;">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                            <input type="file" id="replaceImageFiles" accept="image/*" multiple onchange="validateReplaceFile(this)" style="max-width: 200px;">
                        </div>
                    </div>
                    
                    <div class="file-replace-item">
                        <div style="flex: 1;">
                            <label>
                                <i class="fas fa-file-alt"></i>
                                README.md
                            </label>
                            <div id="currentReadmeFile" style="color: var(--arduino-teal); font-size: 0.85rem; margin-top: 5px;">
                                <!-- Current file will be shown here -->
                            </div>
                        </div>
                        <div style="display: flex; gap: 8px; align-items: center;">
                            <button type="button" class="btn" onclick="deleteProjectFile('readme')" style="background: rgba(244, 67, 54, 0.2); border-color: #F44336; color: #F44336; padding: 8px 15px;">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                            <input type="file" id="replaceReadmeFile" accept=".md,.txt" onchange="validateReplaceFile(this)" style="max-width: 200px;">
                        </div>
                    </div>
                    
                    <div class="file-replace-item">
                        <div style="flex: 1;">
                            <label>
                                <i class="fas fa-graduation-cap"></i>
                                Explanation Document
                            </label>
                            <div id="currentExplanationFile" style="color: var(--arduino-teal); font-size: 0.85rem; margin-top: 5px;">
                                <!-- Current file will be shown here -->
                            </div>
                        </div>
                        <div style="display: flex; gap: 8px; align-items: center;">
                            <button type="button" class="btn" onclick="deleteProjectFile('explanation')" style="background: rgba(244, 67, 54, 0.2); border-color: #F44336; color: #F44336; padding: 8px 15px;">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                            <input type="file" id="replaceExplanationFile" accept=".md,.txt,.pdf" onchange="validateReplaceFile(this)" style="max-width: 200px;">
                        </div>
                    </div>
                    
                    <small style="color: #FFC107; display: block; margin-top: 10px;">
                        <i class="fas fa-exclamation-triangle"></i>
                        <strong>Note:</strong> Delete will remove files from JSON. You must manually delete from GitHub folder. Replace will update JSON immediately.
                    </small>
                </div>

                <div style="display: flex; gap: 15px; margin-top: 30px;">
                    <button type="submit" class="btn btn-save" style="flex: 1;">
                        <i class="fas fa-check"></i>
                        Save Changes
                    </button>
                    <button type="button" class="btn" onclick="closeEditModal()" style="background: rgba(244, 67, 54, 0.2); border-color: #F44336; color: #F44336;">
                        <i class="fas fa-times"></i>
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>
</body>
</html>
