<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Research Papers Manager - A3KM Studio</title>
  <link rel="stylesheet" href="../../../Optimization/mobile-universal.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="../../../Optimization/mobile-universal.js" defer></script>
  <style>
    :root {
      --primary-color: #1565C0;
      --primary-dark: #0D47A1;
      --primary-light: #1976D2;
      --bg-dark: rgba(10, 10, 10, 0.98);
      --text-primary: rgba(255, 255, 255, 0.95);
      --text-secondary: rgba(255, 255, 255, 0.7);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: linear-gradient(135deg, #0a0a0a 0%, #1a0a0a 100%);
      color: var(--text-primary);
      font-family: 'Inter', -apple-system, 'Segoe UI', sans-serif;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    /* Engineering Grid Background */
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-image: 
        repeating-linear-gradient(0deg, rgba(21, 101, 192, 0.03) 0 1px, transparent 1px 30px),
        repeating-linear-gradient(90deg, rgba(21, 101, 192, 0.03) 0 1px, transparent 1px 30px),
        repeating-linear-gradient(45deg, rgba(21, 101, 192, 0.05) 0 2px, transparent 2px 40px);
      background-size: 30px 30px, 30px 30px, 80px 80px;
      pointer-events: none;
      z-index: 0;
      opacity: 0.6;
    }

    /* Header */
    .header {
      position: relative;
      z-index: 100;
      background: linear-gradient(135deg, rgba(13, 71, 161, 0.98), rgba(21, 101, 192, 0.99));
      border-bottom: 3px solid var(--primary-color);
      box-shadow: 0 6px 25px rgba(21, 101, 192, 0.4);
      padding: 20px 40px;
    }

    .header-container {
      max-width: 1600px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .header-icon {
      width: 70px;
      height: 70px;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.2rem;
      box-shadow: 0 0 40px rgba(21, 101, 192, 0.7);
      animation: iconGlow 2s ease-in-out infinite;
    }

    @keyframes iconGlow {
      0%, 100% { box-shadow: 0 0 40px rgba(21, 101, 192, 0.7); }
      50% { box-shadow: 0 0 60px rgba(25, 118, 210, 0.9); }
    }

    .header-title h1 {
      font-size: 2rem;
      color: white;
      margin-bottom: 5px;
      font-weight: 800;
      text-shadow: 0 0 20px rgba(21, 101, 192, 0.5);
    }

    .header-title p {
      font-size: 0.95rem;
      color: var(--text-secondary);
    }

    .header-actions {
      display: flex;
      gap: 15px;
    }

    .btn, .back-btn, .btn-save {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 12px 24px;
      border: 2px solid transparent;
      border-radius: 10px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      font-size: 14px;
    }

    .back-btn {
      background: rgba(255, 255, 255, 0.08);
      color: white;
      border-color: rgba(255, 255, 255, 0.2);
    }

    .back-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-2px);
    }

    .btn-save {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      color: white;
      border-color: var(--primary-color);
      box-shadow: 0 4px 15px rgba(21, 101, 192, 0.3);
    }

    .btn-save:hover {
      background: linear-gradient(135deg, var(--primary-light), var(--primary-color));
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(21, 101, 192, 0.5);
    }

    /* Main Container */
    .container {
      position: relative;
      z-index: 1;
      max-width: 1600px;
      margin: 40px auto;
      padding: 0 40px;
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 30px;
    }

    /* Sidebar */
    .sidebar {
      background: linear-gradient(135deg, rgba(13, 71, 161, 0.7), rgba(26, 0, 0, 0.9));
      border: 2px solid rgba(21, 101, 192, 0.3);
      border-radius: 18px;
      padding: 25px;
      height: fit-content;
      position: sticky;
      top: 20px;
    }

    .sidebar h2 {
      color: var(--primary-color);
      font-size: 1.3rem;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 800;
    }

    .tab-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .tab-item {
      padding: 12px 15px;
      background: rgba(21, 101, 192, 0.05);
      border: 2px solid transparent;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.95rem;
      color: var(--text-secondary);
      font-weight: 600;
    }

    .tab-item:hover {
      background: rgba(21, 101, 192, 0.15);
      border-color: rgba(21, 101, 192, 0.3);
      color: var(--text-primary);
      transform: translateX(5px);
    }

    .tab-item.active {
      background: rgba(21, 101, 192, 0.25);
      border-color: var(--primary-color);
      color: var(--primary-color);
      font-weight: 700;
      box-shadow: 0 0 20px rgba(21, 101, 192, 0.3);
    }

    .tab-item i {
      font-size: 1.1rem;
    }

    /* Stats Panel */
    .stats-panel {
      margin-top: 25px;
      padding-top: 20px;
      border-top: 2px solid rgba(21, 101, 192, 0.3);
    }

    .stats-panel h3 {
      color: var(--primary-color);
      font-size: 1.1rem;
      margin-bottom: 15px;
      font-weight: 700;
    }

    /* Sidebar Stats */
    .sidebar-stats {
      margin-top: 25px;
      padding-top: 20px;
      border-top: 2px solid rgba(21, 101, 192, 0.3);
    }

    .sidebar-stat {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 8px;
      margin-bottom: 10px;
      border-left: 3px solid var(--primary-color);
      transition: all 0.3s ease;
    }

    .sidebar-stat:hover {
      background: rgba(21, 101, 192, 0.2);
      transform: translateX(3px);
    }

    .sidebar-stat span {
      color: var(--text-secondary);
      font-size: 0.9rem;
      font-weight: 500;
    }

    .sidebar-stat strong {
      color: var(--primary-color);
      font-size: 1.1rem;
      font-weight: 700;
    }

    .stat-item-sidebar {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 8px;
      margin-bottom: 8px;
      border-left: 3px solid var(--primary-color);
    }

    .stat-item-sidebar span:first-child {
      color: var(--text-secondary);
      font-size: 0.85rem;
    }

    .stat-item-sidebar span:last-child {
      color: var(--primary-color);
      font-weight: 700;
    }

    /* Content Area */
    .content-area {
      background: linear-gradient(135deg, rgba(26, 0, 0, 0.7), rgba(0, 0, 0, 0.9));
      border: 2px solid rgba(21, 101, 192, 0.25);
      border-radius: 18px;
      padding: 35px;
      min-height: 600px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
    }

    .tab-content {
      display: none;
      animation: fadeIn 0.4s ease;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Content Header */
    .content-header {
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid rgba(21, 101, 192, 0.3);
    }

    .content-header h2 {
      color: var(--primary-color);
      font-size: 1.8rem;
      margin-bottom: 8px;
      font-weight: 800;
    }

    .content-header p {
      color: var(--text-secondary);
      font-size: 1rem;
    }

    /* Dashboard Cards */
    .dashboard-stats,
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .dashboard-card,
    .stat-card {
      padding: 30px;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      color: white;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      border: 2px solid var(--primary-light);
    }

    .dashboard-card::before,
    .stat-card::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
      animation: pulse 3s ease-in-out infinite;
    }

    .dashboard-card:hover,
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px rgba(21, 101, 192, 0.6);
    }

    .dashboard-card h3,
    .stat-card h3 {
      font-size: 3rem;
      margin-bottom: 8px;
      font-weight: 800;
      position: relative;
      z-index: 1;
    }

    .dashboard-card p,
    .stat-card p {
      font-size: 1rem;
      opacity: 0.95;
      position: relative;
      z-index: 1;
      font-weight: 600;
    }

    @keyframes pulse {
      0%, 100% { transform: translate(0, 0) scale(1); }
      50% { transform: translate(-10%, -10%) scale(1.1); }
    }

    /* Forms */
    .upload-form, .edit-form {
      display: grid;
      gap: 25px;
    }

    .form-row, .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 20px;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-group label {
      color: var(--text-primary);
      font-weight: 600;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      padding: 12px 15px;
      background: rgba(0, 0, 0, 0.5);
      border: 2px solid rgba(21, 101, 192, 0.3);
      border-radius: 10px;
      color: var(--text-primary);
      font-size: 1rem;
      font-family: inherit;
      transition: all 0.3s ease;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 15px rgba(21, 101, 192, 0.3);
      background: rgba(0, 0, 0, 0.7);
    }

    .form-group textarea {
      min-height: 200px;
      resize: vertical;
      font-family: 'Consolas', 'Monaco', monospace;
    }

    .form-group small {
      color: var(--text-secondary);
      font-size: 0.85rem;
    }

    /* File Upload */
    .file-upload-label {
      padding: 40px;
      background: rgba(0, 0, 0, 0.4);
      border: 2px dashed var(--primary-color);
      border-radius: 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 10px;
      color: var(--text-secondary);
    }

    .file-upload-label:hover {
      border-color: var(--primary-light);
      background: rgba(21, 101, 192, 0.1);
      box-shadow: 0 0 20px rgba(21, 101, 192, 0.3);
    }

    /* Buttons */
    .btn-primary, .preview-btn {
      padding: 15px 30px;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      color: white;
      border: 2px solid var(--primary-color);
      border-radius: 10px;
      font-weight: 700;
      cursor: pointer;
      width: 100%;
      margin-top: 20px;
      transition: all 0.3s ease;
      font-size: 16px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .btn-primary:hover, .preview-btn:hover {
      background: linear-gradient(135deg, var(--primary-light), var(--primary-color));
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(21, 101, 192, 0.5);
    }

    .preview-btn {
      background: rgba(0, 0, 0, 0.5);
      color: var(--primary-color);
    }

    .preview-btn:hover {
      background: var(--primary-color);
      color: white;
    }

    /* Search & Filters */
    .search-bar, .filters-bar, .filters-container {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      padding: 20px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 12px;
      border: 2px solid rgba(21, 101, 192, 0.3);
    }

    .search-bar input,
    .filters-bar input,
    .filters-bar select {
      flex: 1;
      min-width: 150px;
      padding: 12px 15px;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid rgba(21, 101, 192, 0.3);
      border-radius: 8px;
      color: var(--text-primary);
      font-size: 14px;
    }

    .search-bar input:focus,
    .filters-bar input:focus,
    .filters-bar select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 10px rgba(21, 101, 192, 0.3);
    }

    /* Content Grid */
    .content-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .content-card {
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid rgba(21, 101, 192, 0.3);
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
      position: relative;
    }

    .content-card:hover {
      border-color: var(--primary-color);
      box-shadow: 0 8px 25px rgba(21, 101, 192, 0.5);
      transform: translateY(-5px);
    }

    .card-thumbnail {
      width: 100%;
      height: 180px;
      object-fit: cover;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
    }

    .card-body {
      padding: 15px;
    }

    .card-title {
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 8px;
      font-size: 16px;
    }

    .card-meta {
      font-size: 12px;
      color: var(--text-secondary);
      margin-bottom: 12px;
    }

    .card-actions {
      display: flex;
      gap: 8px;
      margin-top: 12px;
    }

    .card-actions button {
      flex: 1;
      padding: 10px;
      border: 2px solid var(--primary-color);
      background: rgba(0, 0, 0, 0.5);
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.3s ease;
      color: var(--primary-color);
    }

    .card-actions button:hover {
      background: var(--primary-color);
      color: white;
      transform: translateY(-2px);
    }

    .btn-delete, .btn-danger {
      border-color: #f44336 !important;
      color: #f44336 !important;
    }

    .btn-delete:hover, .btn-danger:hover {
      background: #f44336 !important;
      color: white !important;
    }

    /* Bulk Toolbar */
    .bulk-toolbar {
      display: none;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid var(--primary-color);
      padding: 15px 20px;
      border-radius: 12px;
      margin-bottom: 20px;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .bulk-toolbar.active {
      display: flex;
      animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .bulk-toolbar strong {
      color: var(--primary-color);
      font-size: 1.1rem;
    }

    .bulk-toolbar .btn {
      padding: 10px 18px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .bulk-toolbar .btn-select-all {
      background: rgba(33, 150, 243, 0.2);
      border: 2px solid #2196F3;
      color: #2196F3;
    }

    .bulk-toolbar .btn-select-all:hover {
      background: #2196F3;
      color: white;
    }

    .bulk-toolbar .btn-bulk-delete {
      background: rgba(244, 67, 54, 0.2);
      border: 2px solid #f44336;
      color: #f44336;
    }

    .bulk-toolbar .btn-bulk-delete:hover {
      background: #f44336;
      color: white;
    }

    /* Pagination */
    .pagination-controls {
      display: none;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-top: 30px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.5);
      border: 2px solid rgba(21, 101, 192, 0.3);
      border-radius: 12px;
    }

    .pagination-controls.active {
      display: flex;
    }

    .pagination-controls button {
      padding: 10px 20px;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid var(--primary-color);
      color: var(--primary-color);
      border-radius: 8px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .pagination-controls button:hover:not(:disabled) {
      background: var(--primary-color);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(21, 101, 192, 0.3);
    }

    .pagination-controls button:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .pagination-controls span {
      color: var(--primary-color);
      font-weight: 700;
    }

    /* Progress & Messages */
    .progress {
      margin-top: 20px;
      display: none;
    }

    .progress.active {
      display: block;
    }

    .progress-bar {
      width: 100%;
      height: 10px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 5px;
      overflow: hidden;
      border: 1px solid var(--primary-color);
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
      width: 0%;
      transition: width 0.3s ease;
    }

    .progress-text {
      text-align: center;
      color: var(--primary-color);
      font-size: 14px;
      font-weight: 700;
      margin-top: 10px;
    }

    .success-message {
      background: linear-gradient(135deg, #4caf50, #66bb6a);
      color: white;
      padding: 15px 20px;
      border-radius: 12px;
      margin-top: 20px;
      display: none;
      text-align: center;
      font-weight: 600;
    }

    .success-message.active {
      display: block;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 9999;
      overflow-y: auto;
    }

    .modal.active {
      display: block;
    }

    .modal-content {
      max-width: 900px;
      margin: 40px auto;
      background: linear-gradient(135deg, rgba(26, 0, 0, 0.98), rgba(0, 0, 0, 0.99));
      border: 2px solid var(--primary-color);
      border-radius: 20px;
      padding: 40px;
      position: relative;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.9);
    }

    .modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #f44336;
      color: white;
      border: 2px solid #f44336;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 20px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-close:hover {
      background: #d32f2f;
      transform: rotate(90deg);
    }

    /* JSON Editor */
    .json-editor-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .json-editor-area {
      background: #1e1e1e;
      border: 2px solid var(--primary-color);
      border-radius: 12px;
      padding: 20px;
      min-height: 500px;
    }

    .json-editor-area textarea,
    .json-editor {
      width: 100%;
      min-height: 500px;
      background: #1e1e1e;
      color: #d4d4d4;
      border: none;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 14px;
      line-height: 1.6;
      resize: vertical;
      outline: none;
    }

    .json-editor-area textarea:focus,
    .json-editor:focus {
      outline: 2px solid var(--primary-color);
      outline-offset: 2px;
    }

    .json-toolbar {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .json-toolbar button {
      padding: 12px 20px;
      border: 2px solid;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: transparent;
    }

    .json-toolbar button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .json-toolbar .btn-validate {
      background: rgba(76, 175, 80, 0.2);
      border-color: #4CAF50;
      color: #4CAF50;
    }

    .json-toolbar .btn-validate:hover {
      background: #4CAF50;
      color: white;
    }

    .json-toolbar .btn-format {
      background: rgba(33, 150, 243, 0.2);
      border-color: #2196F3;
      color: #2196F3;
    }

    .json-toolbar .btn-format:hover {
      background: #2196F3;
      color: white;
    }

    .json-toolbar .btn-download {
      background: rgba(255, 193, 7, 0.2);
      border-color: #FFC107;
      color: #FFC107;
    }

    .json-toolbar .btn-download:hover {
      background: #FFC107;
      color: #333;
    }

    .json-toolbar .btn-import {
      background: rgba(21, 101, 192, 0.2);
      border-color: var(--primary-color);
      color: var(--primary-color);
    }

    .json-toolbar .btn-import:hover {
      background: var(--primary-color);
      color: white;
    }

    /* Statistics */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stats-section {
      margin-bottom: 40px;
      padding: 25px;
      background: rgba(0, 0, 0, 0.4);
      border: 2px solid rgba(21, 101, 192, 0.3);
      border-radius: 12px;
    }

    .stats-section h3 {
      color: var(--primary-color);
      font-size: 1.4rem;
      margin-bottom: 20px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .stats-breakdown {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .stats-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px;
      background: rgba(21, 101, 192, 0.1);
      border-left: 3px solid var(--primary-color);
      border-radius: 6px;
      transition: all 0.3s ease;
    }

    .stats-item:hover {
      background: rgba(21, 101, 192, 0.2);
      transform: translateX(5px);
    }

    .stats-item-label {
      color: var(--text-secondary);
      font-size: 0.95rem;
      font-weight: 500;
    }

    .stats-item-value {
      color: var(--primary-color);
      font-size: 1.1rem;
      font-weight: 700;
    }

    .stat-card {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      color: white;
      padding: 25px;
      border-radius: 12px;
      text-align: center;
    }

    .stat-card h3 {
      font-size: 2.5rem;
      margin-bottom: 5px;
      font-weight: 800;
    }

    .stat-card p {
      font-size: 0.95rem;
      opacity: 0.95;
    }

    .breakdown-section {
      margin-top: 30px;
      padding: 25px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 12px;
      border: 2px solid rgba(21, 101, 192, 0.3);
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <div class="header-container">
      <div class="header-left">
        <div class="header-icon">üìÑ</div>
        <div class="header-title">
          <h1>Research Papers Manager</h1>
          <p>Manage academic papers, publications & research documents</p>
        </div>
      </div>
      <div class="header-actions">
        <a href="content-hub.html" class="back-btn">‚Üê Back to Hub</a>
        <button class="btn-save" onclick="saveToGitHub()">üíæ Save to GitHub</button>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
      <h2>üìã Navigation</h2>
      <div class="tab-list">
        <div class="tab-item active" data-tab="dashboard" onclick="switchTab('dashboard')">
          <span>üìä</span> Dashboard
        </div>
        <div class="tab-item" data-tab="upload" onclick="switchTab('upload')">
          <span>üì§</span> Upload Paper
        </div>
        <div class="tab-item" data-tab="manage" onclick="switchTab('manage')">
          <span>üìö</span> Manage Papers
        </div>
        <div class="tab-item" data-tab="statistics" onclick="switchTab('statistics')">
          <span>üìà</span> Statistics
        </div>
        <div class="tab-item" data-tab="json-editor" onclick="switchTab('json-editor')">
          <span>üîß</span> JSON Editor
        </div>
      </div>

      <div class="sidebar-stats">
        <div class="sidebar-stat">
          <span>Total Papers:</span>
          <strong id="sidebar-total">0</strong>
        </div>
        <div class="sidebar-stat">
          <span>Authors:</span>
          <strong id="sidebar-authors">0</strong>
        </div>
        <div class="sidebar-stat">
          <span>Citations:</span>
          <strong id="sidebar-citations">0</strong>
        </div>
        <div class="sidebar-stat">
          <span>Downloads:</span>
          <strong id="sidebar-downloads">0</strong>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Dashboard Tab -->
      <div id="dashboard-tab" class="tab-content active">
        <div class="content-header">
          <h2>üìä Dashboard Overview</h2>
          <p>Quick statistics and insights about your research papers collection</p>
        </div>
        <div class="dashboard-grid">
          <div class="stat-card">
            <h3 id="dash-total">0</h3>
            <p>üìÑ Total Research Papers</p>
          </div>
          <div class="stat-card">
            <h3 id="dash-authors">0</h3>
            <p>üë• Unique Authors</p>
          </div>
          <div class="stat-card">
            <h3 id="dash-citations">0</h3>
            <p>üìë Total Citations</p>
          </div>
          <div class="stat-card">
            <h3 id="dash-downloads">0</h3>
            <p>‚¨áÔ∏è Total Downloads</p>
          </div>
        </div>
      </div>

      <!-- Upload Tab -->
      <div id="upload-tab" class="tab-content">
        <div class="content-header">
          <h2>üì§ Upload Research Paper</h2>
          <p>Add a new research paper to your collection</p>
        </div>
        <form id="upload-form" onsubmit="uploadPaper(event)">
          <div class="form-row">
            <div class="form-group">
              <label>üìÅ Category *</label>
              <select id="category" required>
                <option value="">Select category...</option>
              </select>
            </div>
            <div class="form-group">
              <label>üìä Research Field *</label>
              <input type="text" id="field" placeholder="e.g., Machine Learning, IoT, Robotics" list="field-list" required>
              <datalist id="field-list"></datalist>
            </div>
          </div>

          <div class="form-group">
            <label>üìù Paper Title *</label>
            <input type="text" id="title" placeholder="Enter complete paper title..." required>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>üë§ Authors (comma-separated) *</label>
              <input type="text" id="authors" placeholder="Author 1, Author 2, Author 3" list="author-list" required>
              <datalist id="author-list"></datalist>
              <small>Enter authors separated by commas</small>
            </div>
            <div class="form-group">
              <label>üèõÔ∏è Institution/University *</label>
              <input type="text" id="institution" placeholder="Khulna University of Engineering & Technology" required>
            </div>
          </div>

          <div class="form-group">
            <label>üìÑ Abstract/Summary *</label>
            <textarea id="abstract" placeholder="Brief abstract or summary of the research paper..." rows="5" required></textarea>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>üìÖ Publication Year *</label>
              <input type="number" id="year" placeholder="2024" min="1900" max="2050" required>
            </div>
            <div class="form-group">
              <label>üìö Journal/Conference *</label>
              <input type="text" id="journal" placeholder="IEEE Transactions, ACM Conference, etc." required>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>üîó DOI (Digital Object Identifier)</label>
              <input type="text" id="doi" placeholder="10.1234/example.doi">
              <small>Optional: DOI link for the paper</small>
            </div>
            <div class="form-group">
              <label>üîó PDF Download Link *</label>
              <input type="url" id="downloadUrl" placeholder="https://example.com/paper.pdf" required>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>üè∑Ô∏è Keywords/Tags (comma-separated) *</label>
              <input type="text" id="keywords" placeholder="IoT, Machine Learning, Sensors, Data Analysis" required>
            </div>
            <div class="form-group">
              <label>üìë Citations Count</label>
              <input type="number" id="citations" placeholder="0" min="0" value="0">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>üìÑ Pages</label>
              <input type="number" id="pages" placeholder="12" min="1">
            </div>
            <div class="form-group">
              <label>üåê Language *</label>
              <select id="language" required>
                <option value="en">üá¨üáß English</option>
                <option value="bn">üáßüá© ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
                <option value="hi">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
              </select>
            </div>
          </div>

          <button type="submit" class="btn-primary">üì§ Upload Research Paper</button>
          
          <div id="upload-success" class="success-message">
            ‚úÖ Research paper uploaded successfully!
          </div>
        </form>
      </div>

      <!-- Manage Tab -->
      <div id="manage-tab" class="tab-content">
        <div class="content-header">
          <h2>üìö Manage Research Papers</h2>
          <p>View, edit, and delete research papers</p>
        </div>
        
        <!-- Bulk Operations Toolbar -->
        <div id="bulk-toolbar" class="bulk-toolbar">
          <strong>üìã <span id="selected-count">0</span> selected</strong>
          <button onclick="selectAll()">‚úÖ Select All</button>
          <button onclick="deselectAll()">‚ùå Deselect All</button>
          <button onclick="bulkDeletePapers()">üóëÔ∏è Delete Selected</button>
        </div>

        <!-- Filters Bar -->
        <div class="filters-bar" style="grid-template-columns: 2fr 1fr 1fr 1fr 0.8fr 0.8fr 1fr 1fr;">
          <div style="flex: 2; min-width: 300px;">
            <label>üîç Search:</label>
            <input type="text" id="search-input" placeholder="Search by title, authors, keywords..." oninput="applyFilters()">
          </div>
          
          <div>
            <label>Category:</label>
            <select id="filter-category" onchange="updateSubcategoriesPapers(); applyFilters();">
              <option value="">All Categories</option>
            </select>
          </div>
          
          <div>
            <label>Subcategory:</label>
            <select id="filter-subcategory" onchange="applyFilters()">
              <option value="">All Subcategories</option>
            </select>
          </div>
          
          <div>
            <label>Year:</label>
            <select id="filter-year" onchange="applyFilters()">
              <option value="">All Years</option>
            </select>
          </div>
          
          <div>
            <label>üìÖ From:</label>
            <input type="date" id="filter-date-from" onchange="applyFilters()" style="font-size: 12px;">
          </div>
          
          <div>
            <label>üìÖ To:</label>
            <input type="date" id="filter-date-to" onchange="applyFilters()" style="font-size: 12px;">
          </div>
          
          <div>
            <label>Language:</label>
            <select id="filter-language" onchange="applyFilters()">
              <option value="">All Languages</option>
              <option value="en">üá¨üáß English</option>
              <option value="bn">üáßüá© ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
              <option value="hi">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
            </select>
          </div>
          
          <div>
            <label>Sort By:</label>
            <select id="sort-by" onchange="applyFilters()">
              <option value="year-desc">Year (Newest)</option>
              <option value="year-asc">Year (Oldest)</option>
              <option value="title-asc">Title (A-Z)</option>
              <option value="title-desc">Title (Z-A)</option>
              <option value="citations-desc">Most Cited</option>
              <option value="downloads-desc">Most Downloaded</option>
              <option value="category">By Category</option>
            </select>
          </div>
        </div>

        <!-- Papers Grid -->
        <div id="papers-grid" class="papers-grid"></div>
        
        <div id="no-results" class="no-results">
          <p>üîç No research papers found</p>
          <small>Try adjusting your filters or upload a new paper</small>
        </div>

        <!-- Pagination -->
        <div id="pagination" class="pagination">
          <button onclick="prevPage()" id="prev-btn">‚Üê Previous</button>
          <span id="page-info">Page 1 of 1</span>
          <button onclick="nextPage()" id="next-btn">Next ‚Üí</button>
        </div>

        <!-- Progress Bar for Bulk Delete -->
        <div id="bulk-progress" class="progress-container">
          <div class="progress-bar">
            <div id="bulk-progress-fill" class="progress-fill"></div>
          </div>
          <div id="bulk-progress-text" class="progress-text">Deleting papers...</div>
        </div>
      </div>

      <!-- Statistics Tab -->
      <div id="statistics-tab" class="tab-content">
        <div class="content-header">
          <h2>üìà Detailed Statistics</h2>
          <p>Comprehensive analysis of your research papers collection</p>
        </div>

        <div class="stats-section">
          <h3>üìä Papers by Category</h3>
          <div id="category-stats" class="stats-breakdown"></div>
        </div>

        <div class="stats-section">
          <h3>üìÖ Papers by Year</h3>
          <div id="year-stats" class="stats-breakdown"></div>
        </div>

        <div class="stats-section">
          <h3>üåê Papers by Language</h3>
          <div id="language-stats" class="stats-breakdown"></div>
        </div>

        <div class="stats-section">
          <h3>üë• Top 10 Most Productive Authors</h3>
          <div id="author-stats" class="stats-breakdown"></div>
        </div>

        <div class="stats-section">
          <h3>üìë Top 10 Most Cited Papers</h3>
          <div id="citations-stats" class="stats-breakdown"></div>
        </div>
      </div>

      <!-- JSON Editor Tab -->
      <div id="json-editor-tab" class="tab-content">
        <div class="content-header">
          <h2>üîß JSON Editor</h2>
          <p>Advanced editing of papers.json file</p>
        </div>
        
        <div class="json-editor-container">
          <div class="json-toolbar">
            <button class="btn-validate" onclick="validateJSON()">
              <i class="fas fa-check-circle"></i>
              Validate JSON
            </button>
            <button class="btn-format" onclick="formatJSON()">
              <i class="fas fa-magic"></i>
              Format JSON
            </button>
            <button class="btn-import" onclick="saveJSON()">
              <i class="fas fa-save"></i>
              Save Changes
            </button>
            <button class="btn-download" onclick="reloadJSON()">
              <i class="fas fa-sync-alt"></i>
              Reload Original
            </button>
          </div>
          <div class="json-editor-area">
            <textarea id="json-editor" class="json-editor" spellcheck="false"></textarea>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div id="edit-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>‚úèÔ∏è Edit Research Paper</h2>
        <button class="modal-close" onclick="closeEditModal()">√ó</button>
      </div>
      <form id="edit-form" onsubmit="saveEdit(event)">
        <input type="hidden" id="edit-id">
        
        <div class="form-row">
          <div class="form-group">
            <label>üìÅ Category</label>
            <select id="edit-category" required></select>
          </div>
          <div class="form-group">
            <label>üìä Research Field</label>
            <input type="text" id="edit-field" required>
          </div>
        </div>

        <div class="form-group">
          <label>üìù Paper Title</label>
          <input type="text" id="edit-title" required>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>üë§ Authors (comma-separated)</label>
            <input type="text" id="edit-authors" required>
          </div>
          <div class="form-group">
            <label>üèõÔ∏è Institution</label>
            <input type="text" id="edit-institution" required>
          </div>
        </div>

        <div class="form-group">
          <label>üìÑ Abstract</label>
          <textarea id="edit-abstract" rows="4" required></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>üìÖ Year</label>
            <input type="number" id="edit-year" required>
          </div>
          <div class="form-group">
            <label>üìö Journal</label>
            <input type="text" id="edit-journal" required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>üîó DOI</label>
            <input type="text" id="edit-doi">
          </div>
          <div class="form-group">
            <label>üîó PDF Link</label>
            <input type="url" id="edit-downloadUrl" required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>üè∑Ô∏è Keywords</label>
            <input type="text" id="edit-keywords" required>
          </div>
          <div class="form-group">
            <label>üìë Citations</label>
            <input type="number" id="edit-citations" min="0">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>üìÑ Pages</label>
            <input type="number" id="edit-pages" min="1">
          </div>
          <div class="form-group">
            <label>üåê Language</label>
            <select id="edit-language" required>
              <option value="en">üá¨üáß English</option>
              <option value="bn">üáßüá© ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
              <option value="hi">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
            </select>
          </div>
        </div>

        <button type="submit" class="btn-primary">üíæ Save Changes</button>
      </form>
    </div>
  </div>

  <!-- Scripts -->
  <script src="content-manager.js"></script>
  <script src="github-content-uploader.js"></script>
  <script>
    // Hardcoded categories for immediate display
    const PAPER_CATEGORIES = {
      'Technology & Programming': ['Web Development', 'Mobile Apps', 'AI & Machine Learning', 'Data Science', 'Cybersecurity', 'Cloud Computing'],
      'Engineering': ['Electrical Engineering', 'Mechanical Engineering', 'Civil Engineering', 'Arduino & IoT', 'MATLAB', 'SolidWorks', 'Embedded Systems', 'Robotics'],
      'Science & Mathematics': ['Physics', 'Chemistry', 'Biology', 'Mathematics', 'Statistics', 'Astronomy', 'Environmental Science'],
      'Business & Management': ['Entrepreneurship', 'Marketing', 'Finance', 'Management', 'Economics', 'Leadership'],
      'Medical & Health': ['Medical Research', 'Public Health', 'Clinical Studies', 'Biotechnology', 'Pharmacology'],
      'Social Sciences': ['Psychology', 'Sociology', 'Education', 'Political Science', 'Anthropology']
    };

    // Global variables
    let papersData = { categoryGroups: [], papers: [] };
    let contentManager;
    let selectedPapers = new Set();
    let currentPage = 1;
    const papersPerPage = 12;
    let filteredPapers = [];
    
    // Initialize
    document.addEventListener('DOMContentLoaded', async () => {
      contentManager = new ContentManager();
      await loadPapers();
      loadCategories();
      loadFilterCategories();
      loadFieldSuggestions();
      updateDashboard();
      renderPapers();
    });

    // Load papers from JSON
    async function loadPapers() {
      try {
        papersData = await contentManager.loadJSON('Content Studio/research-papers/papers.json');
        if (!papersData.papers) papersData.papers = [];
        if (!papersData.categoryGroups) papersData.categoryGroups = [];
        filteredPapers = [...papersData.papers];
      } catch (error) {
        console.error('Error loading papers:', error);
        papersData = { categoryGroups: [], papers: [] };
        filteredPapers = [];
      }
    }

    // Update paper categories based on selected group
    function updatePaperCategoriesFromGroup(targetSelectId, editPrefix = '') {
      const groupSelect = document.getElementById(editPrefix + 'categoryGroup');
      const categorySelect = document.getElementById(targetSelectId);
      const selectedGroup = groupSelect.value;
      
      categorySelect.innerHTML = '<option value="">Select category...</option>';
      
      if (selectedGroup && PAPER_CATEGORIES[selectedGroup]) {
        categorySelect.disabled = false;
        PAPER_CATEGORIES[selectedGroup].forEach(cat => {
          const option = document.createElement('option');
          option.value = cat;
          option.textContent = cat;
          categorySelect.appendChild(option);
        });
      } else {
        categorySelect.disabled = true;
      }
    }

    function updateFilterPaperCategoriesFromGroup() {
      const groupSelect = document.getElementById('filterCategoryGroup');
      const categorySelect = document.getElementById('filter-category');
      const selectedGroup = groupSelect.value;
      
      categorySelect.innerHTML = '<option value="">All Categories</option>';
      
      if (selectedGroup && PAPER_CATEGORIES[selectedGroup]) {
        PAPER_CATEGORIES[selectedGroup].forEach(cat => {
          const option = document.createElement('option');
          option.value = cat;
          option.textContent = cat;
          categorySelect.appendChild(option);
        });
      } else {
        Object.values(PAPER_CATEGORIES).flat().sort().forEach(cat => {
          const option = document.createElement('option');
          option.value = cat;
          option.textContent = cat;
          categorySelect.appendChild(option);
        });
      }
    }

    // Load categories into dropdowns
    function loadCategories() {
      const categoryGroupSelects = [
        document.getElementById('categoryGroup'),
        document.getElementById('edit-categoryGroup'),
        document.getElementById('filterCategoryGroup')
      ];
      
      const categorySelect = document.getElementById('category');
      const editCategorySelect = document.getElementById('edit-category');
      const filterCategorySelect = document.getElementById('filter-category');
      
      // Populate sector dropdowns
      categoryGroupSelects.forEach((select, index) => {
        if (!select) return;
        const isFilter = index === 2;
        select.innerHTML = isFilter ? '<option value="">All Sectors</option>' : '<option value="">Select sector...</option>';
        
        Object.keys(PAPER_CATEGORIES).forEach(groupName => {
          const option = document.createElement('option');
          option.value = groupName;
          option.textContent = groupName;
          select.appendChild(option);
        });
      });
      
      // Initialize category selects
      categorySelect.innerHTML = '<option value="">Select sector first...</option>';
      categorySelect.disabled = true;
      editCategorySelect.innerHTML = '<option value="">Select sector first...</option>';
      editCategorySelect.disabled = true;
      if (filterCategorySelect) {
        filterCategorySelect.innerHTML = '<option value="">All Categories</option>';
      }
      
      // Try to load from JSON (will override if available)
      if (papersData.categoryGroups && papersData.categoryGroups.length > 0) {
        categorySelect.innerHTML = '<option value="">Select category...</option>';
        editCategorySelect.innerHTML = '<option value="">Select category...</option>';
        if (filterCategorySelect) {
          filterCategorySelect.innerHTML = '<option value="">All Categories</option>';
        }
        
        papersData.categoryGroups.forEach(group => {
          const optgroup = document.createElement('optgroup');
          optgroup.label = `${group.icon || ''} ${group.name}`;
          const editOptgroup = document.createElement('optgroup');
          editOptgroup.label = `${group.icon || ''} ${group.name}`;
          const filterOptgroup = filterCategorySelect ? document.createElement('optgroup') : null;
          if (filterOptgroup) filterOptgroup.label = `${group.icon || ''} ${group.name}`;
          
          if (group.categories && Array.isArray(group.categories)) {
            group.categories.forEach(cat => {
              const option = document.createElement('option');
              option.value = cat;
              option.textContent = cat;
              optgroup.appendChild(option);
              
              const editOption = document.createElement('option');
              editOption.value = cat;
              editOption.textContent = cat;
              editOptgroup.appendChild(editOption);
              
              if (filterOptgroup) {
                const filterOption = document.createElement('option');
                filterOption.value = cat;
                filterOption.textContent = cat;
                filterOptgroup.appendChild(filterOption);
              }
            });
          }
          
          categorySelect.appendChild(optgroup);
          editCategorySelect.appendChild(editOptgroup);
          if (filterCategorySelect && filterOptgroup) {
            filterCategorySelect.appendChild(filterOptgroup);
          }
        });
      }
      
      // Load author suggestions
      loadAuthorSuggestions();
    }
    
    // Load author suggestions from existing papers
    function loadAuthorSuggestions() {
      const authorDatalist = document.getElementById('author-list');
      authorDatalist.innerHTML = '';
      
      // Get all unique authors from all papers
      const allAuthors = new Set();
      papersData.papers.forEach(paper => {
        if (paper.authors && Array.isArray(paper.authors)) {
          paper.authors.forEach(author => allAuthors.add(author.trim()));
        }
      });
      
      [...allAuthors].sort().forEach(author => {
        const option = document.createElement('option');
        option.value = author;
        authorDatalist.appendChild(option);
      });
    }
    
    // Load field suggestions
    function loadFieldSuggestions() {
      const fieldDatalist = document.getElementById('field-list');
      fieldDatalist.innerHTML = '';
      
      const uniqueFields = [...new Set(papersData.papers.map(p => p.field).filter(f => f))];
      uniqueFields.sort().forEach(field => {
        const option = document.createElement('option');
        option.value = field;
        fieldDatalist.appendChild(option);
      });
    }
    
    // Load filter categories from all papers
    function loadFilterCategories() {
      const filterCategorySelect = document.getElementById('filter-category');
      const filterYearSelect = document.getElementById('filter-year');
      
      if (!filterCategorySelect) return;
      
      // Categories
      const categories = [...new Set(papersData.papers.map(p => p.category))].sort();
      while (filterCategorySelect.children.length > 1) {
        filterCategorySelect.removeChild(filterCategorySelect.lastChild);
      }
      categories.forEach(category => {
        const option = document.createElement('option');
        option.value = category;
        option.textContent = category;
        filterCategorySelect.appendChild(option);
      });
      
      // Years
      const years = [...new Set(papersData.papers.map(p => p.year))].sort((a, b) => b - a);
      years.forEach(year => {
        const option = document.createElement('option');
        option.value = year;
        option.textContent = year;
        filterYearSelect.appendChild(option);
      });
    }
    
    // Update dashboard stats
    function updateDashboard() {
      const totalPapers = papersData.papers.length;
      const uniqueAuthors = new Set();
      papersData.papers.forEach(p => {
        if (p.authors && Array.isArray(p.authors)) {
          p.authors.forEach(a => uniqueAuthors.add(a));
        }
      });
      const totalCitations = papersData.papers.reduce((sum, paper) => sum + (paper.citations || 0), 0);
      const totalDownloads = papersData.papers.reduce((sum, paper) => sum + (paper.downloads || 0), 0);
      
      // Sidebar stats
      document.getElementById('sidebar-total').textContent = totalPapers;
      document.getElementById('sidebar-authors').textContent = uniqueAuthors.size;
      document.getElementById('sidebar-citations').textContent = totalCitations;
      document.getElementById('sidebar-downloads').textContent = totalDownloads;
      
      // Dashboard cards
      document.getElementById('dash-total').textContent = totalPapers;
      document.getElementById('dash-authors').textContent = uniqueAuthors.size;
      document.getElementById('dash-citations').textContent = totalCitations;
      document.getElementById('dash-downloads').textContent = totalDownloads;
    }
    
    // Upload paper
    async function uploadPaper(event) {
      event.preventDefault();
      
      // Validation
      const category = document.getElementById('category').value;
      if (!category) {
        alert('‚ö†Ô∏è Please select a category');
        return;
      }
      
      const title = document.getElementById('title').value.trim();
      const authorsInput = document.getElementById('authors').value.trim();
      const institution = document.getElementById('institution').value.trim();
      const abstract = document.getElementById('abstract').value.trim();
      const downloadUrl = document.getElementById('downloadUrl').value.trim();
      const field = document.getElementById('field').value.trim();
      
      if (!title || !authorsInput || !institution || !abstract || !downloadUrl || !field) {
        alert('‚ö†Ô∏è Please fill in all required fields');
        return;
      }
      
      const language = document.getElementById('language').value;
      if (!['en', 'bn', 'hi'].includes(language)) {
        alert('‚ö†Ô∏è Invalid language selected');
        return;
      }
      
      // Parse authors
      const authors = authorsInput.split(',').map(a => a.trim()).filter(a => a);
      if (authors.length === 0) {
        alert('‚ö†Ô∏è Please provide at least one author');
        return;
      }
      
      // Parse keywords
      const keywordsInput = document.getElementById('keywords').value.trim();
      const keywords = keywordsInput.split(',').map(k => k.trim()).filter(k => k);
      
      const newPaper = {
        id: 'paper-' + Date.now(),
        category: category,
        field: field,
        title: title,
        authors: authors,
        institution: institution,
        abstract: abstract,
        year: parseInt(document.getElementById('year').value) || new Date().getFullYear(),
        journal: document.getElementById('journal').value.trim(),
        doi: document.getElementById('doi').value.trim() || '',
        downloadUrl: downloadUrl,
        keywords: keywords,
        citations: parseInt(document.getElementById('citations').value) || 0,
        pages: parseInt(document.getElementById('pages').value) || 0,
        language: language,
        downloads: 0,
        dateAdded: new Date().toISOString().split('T')[0]
      };
      
      papersData.papers.unshift(newPaper);
      
      try {
        await contentManager.saveJSON('Content Studio/research-papers/papers.json', papersData);
        document.getElementById('upload-success').classList.add('active');
        document.getElementById('upload-form').reset();
        
        setTimeout(() => {
          document.getElementById('upload-success').classList.remove('active');
        }, 3000);
        
        // Update UI
        filteredPapers = [...papersData.papers];
        updateDashboard();
        loadFilterCategories();
        loadFieldSuggestions();
        loadAuthorSuggestions();
        renderPapers();
      } catch (error) {
        alert('‚ùå Failed to upload paper: ' + error.message);
      }
    }
    
    // Apply filters
    function applyFilters() {
      const search = document.getElementById('search-input').value.toLowerCase();
      const categoryFilter = document.getElementById('filter-category')?.value || '';
      const subcategoryFilter = document.getElementById('filter-subcategory')?.value || '';
      const yearFilter = document.getElementById('filter-year')?.value || '';
      const languageFilter = document.getElementById('filter-language').value;
      const dateFrom = document.getElementById('filter-date-from')?.value || '';
      const dateTo = document.getElementById('filter-date-to')?.value || '';
      const sortBy = document.getElementById('sort-by').value;
      
      // Filter
      filteredPapers = papersData.papers.filter(paper => {
        const matchSearch = !search || 
          paper.title.toLowerCase().includes(search) ||
          (paper.authors && paper.authors.join(' ').toLowerCase().includes(search)) ||
          paper.abstract.toLowerCase().includes(search) ||
          (paper.keywords && paper.keywords.join(' ').toLowerCase().includes(search));
        
        const matchCategory = !categoryFilter || paper.category === categoryFilter;
        const matchSubcategory = !subcategoryFilter || paper.subcategory === subcategoryFilter;
        const matchYear = !yearFilter || paper.year == yearFilter;
        const matchLanguage = !languageFilter || paper.language === languageFilter;
        
        let matchDateRange = true;
        if (dateFrom || dateTo) {
          const itemDate = paper.date || paper.dateAdded || paper.id || paper.year?.toString();
          if (dateFrom && itemDate < dateFrom) matchDateRange = false;
          if (dateTo && itemDate > dateTo) matchDateRange = false;
        }
        
        return matchSearch && matchCategory && matchSubcategory && matchYear && matchLanguage && matchDateRange;
      });
      
      // Sort
      if (sortBy === 'year-desc') {
        filteredPapers.sort((a, b) => (b.year || 0) - (a.year || 0));
      } else if (sortBy === 'year-asc') {
        filteredPapers.sort((a, b) => (a.year || 0) - (b.year || 0));
      } else if (sortBy === 'title-asc') {
        filteredPapers.sort((a, b) => a.title.localeCompare(b.title));
      } else if (sortBy === 'title-desc') {
        filteredPapers.sort((a, b) => b.title.localeCompare(a.title));
      } else if (sortBy === 'citations-desc') {
        filteredPapers.sort((a, b) => (b.citations || 0) - (a.citations || 0));
      } else if (sortBy === 'downloads-desc') {
        filteredPapers.sort((a, b) => (b.downloads || 0) - (a.downloads || 0));
      } else if (sortBy === 'category') {
        filteredPapers.sort((a, b) => (a.category || '').localeCompare(b.category || ''));
      }
      
      currentPage = 1;
      renderPapers();
    }
    
    function updateSubcategoriesPapers() {
      const category = document.getElementById('filter-category')?.value || '';
      const subcategorySelect = document.getElementById('filter-subcategory');
      
      if (!subcategorySelect) return;
      
      subcategorySelect.innerHTML = '<option value="">All Subcategories</option>';
      
      if (category && papersData && papersData.papers) {
        const subcategories = new Set();
        papersData.papers.forEach(paper => {
          if (paper.category === category && paper.subcategory) {
            subcategories.add(paper.subcategory);
          }
        });
        
        [...subcategories].sort().forEach(sub => {
          const option = document.createElement('option');
          option.value = sub;
          option.textContent = sub;
          subcategorySelect.appendChild(option);
        });
      }
    }
    
    // Render papers
    function renderPapers() {
      const grid = document.getElementById('papers-grid');
      const noResults = document.getElementById('no-results');
      
      if (filteredPapers.length === 0) {
        grid.innerHTML = '';
        noResults.style.display = 'block';
        document.getElementById('pagination').classList.remove('active');
        return;
      }
      
      noResults.style.display = 'none';
      
      // Pagination
      const totalPages = Math.ceil(filteredPapers.length / papersPerPage);
      const startIndex = (currentPage - 1) * papersPerPage;
      const endIndex = startIndex + papersPerPage;
      const papersToShow = filteredPapers.slice(startIndex, endIndex);
      
      grid.innerHTML = '';
      papersToShow.forEach(paper => {
        const card = document.createElement('div');
        card.className = 'paper-card';
        
        const authorsDisplay = (paper.authors && paper.authors.length > 0) 
          ? paper.authors.slice(0, 2).join(', ') + (paper.authors.length > 2 ? ` +${paper.authors.length - 2} more` : '')
          : 'Unknown Author';
        
        const keywordsHTML = (paper.keywords && paper.keywords.length > 0)
          ? paper.keywords.slice(0, 5).map(k => `<span class="paper-tag">${k}</span>`).join('')
          : '';
        
        card.innerHTML = `
          <input type="checkbox" onchange="togglePaperSelection('${paper.id}')" ${selectedPapers.has(paper.id) ? 'checked' : ''}>
          <div class="paper-header">
            <h3 style="color: white; font-size: 1.1rem; font-weight: 700;">${paper.category || 'Uncategorized'}</h3>
          </div>
          <div class="paper-body">
            <div class="paper-title">${paper.title}</div>
            <div class="paper-authors">üë§ ${authorsDisplay}</div>
            <div class="paper-meta">
              <span>üìÖ ${paper.year || 'N/A'}</span>
              <span>üìö ${paper.journal || 'N/A'}</span>
              <span>üìë ${paper.citations || 0} citations</span>
              <span>‚¨áÔ∏è ${paper.downloads || 0} downloads</span>
            </div>
            <div class="paper-abstract">${paper.abstract || 'No abstract available'}</div>
            <div class="paper-tags">${keywordsHTML}</div>
            <div class="paper-actions">
              <button onclick="window.open('${paper.downloadUrl}', '_blank')">üìÑ View</button>
              <button onclick="editPaper('${paper.id}')">‚úèÔ∏è Edit</button>
              <button onclick="deletePaper('${paper.id}')">üóëÔ∏è Delete</button>
            </div>
          </div>
        `;
        
        grid.appendChild(card);
      });
      
      // Update pagination
      document.getElementById('page-info').textContent = `Page ${currentPage} of ${totalPages}`;
      document.getElementById('prev-btn').disabled = currentPage === 1;
      document.getElementById('next-btn').disabled = currentPage === totalPages;
      document.getElementById('pagination').classList.add('active');
      
      updateBulkToolbar();
    }
    
    // Pagination functions
    function prevPage() {
      if (currentPage > 1) {
        currentPage--;
        renderPapers();
      }
    }
    
    function nextPage() {
      const totalPages = Math.ceil(filteredPapers.length / papersPerPage);
      if (currentPage < totalPages) {
        currentPage++;
        renderPapers();
      }
    }
    
    // Toggle paper selection
    function togglePaperSelection(id) {
      if (selectedPapers.has(id)) {
        selectedPapers.delete(id);
      } else {
        selectedPapers.add(id);
      }
      updateBulkToolbar();
    }
    
    // Select/Deselect all
    function selectAll() {
      filteredPapers.forEach(paper => selectedPapers.add(paper.id));
      renderPapers();
    }
    
    function deselectAll() {
      selectedPapers.clear();
      renderPapers();
    }
    
    // Update bulk toolbar
    function updateBulkToolbar() {
      const toolbar = document.getElementById('bulk-toolbar');
      const count = selectedPapers.size;
      
      document.getElementById('selected-count').textContent = count;
      
      if (count > 0) {
        toolbar.classList.add('active');
      } else {
        toolbar.classList.remove('active');
      }
    }
    
    // Bulk delete papers
    async function bulkDeletePapers() {
      if (selectedPapers.size === 0) return;
      
      if (!confirm(`Delete ${selectedPapers.size} selected paper(s)?`)) return;
      
      const progressContainer = document.getElementById('bulk-progress');
      const progressFill = document.getElementById('bulk-progress-fill');
      const progressText = document.getElementById('bulk-progress-text');
      
      progressContainer.classList.add('active');
      
      const total = selectedPapers.size;
      let deleted = 0;
      
      for (const id of selectedPapers) {
        papersData.papers = papersData.papers.filter(p => p.id !== id);
        deleted++;
        
        const percentage = (deleted / total) * 100;
        progressFill.style.width = percentage + '%';
        progressText.textContent = `Deleting ${deleted} of ${total} papers...`;
        
        await new Promise(resolve => setTimeout(resolve, 100));
      }
      
      try {
        await contentManager.saveJSON('Content Studio/research-papers/papers.json', papersData);
        
        progressFill.style.width = '100%';
        progressText.textContent = `‚úÖ Deleted ${total} paper(s)!`;
        
        setTimeout(() => {
          progressContainer.classList.remove('active');
          selectedPapers.clear();
          filteredPapers = [...papersData.papers];
          updateDashboard();
          loadFilterCategories();
          renderPapers();
        }, 1500);
      } catch (error) {
        progressContainer.classList.remove('active');
        alert('‚ùå Failed to delete papers: ' + error.message);
      }
    }
    
    // Delete single paper
    async function deletePaper(id) {
      if (!confirm('Delete this research paper?')) return;
      
      papersData.papers = papersData.papers.filter(p => p.id !== id);
      
      try {
        await contentManager.saveJSON('Content Studio/research-papers/papers.json', papersData);
        filteredPapers = [...papersData.papers];
        selectedPapers.delete(id);
        updateDashboard();
        loadFilterCategories();
        renderPapers();
        alert('‚úÖ Paper deleted successfully!');
      } catch (error) {
        alert('‚ùå Failed to delete paper: ' + error.message);
      }
    }
    
    // Edit paper
    function editPaper(id) {
      const paper = papersData.papers.find(p => p.id === id);
      if (!paper) return;
      
      document.getElementById('edit-id').value = id;
      document.getElementById('edit-category').value = paper.category;
      document.getElementById('edit-field').value = paper.field || '';
      document.getElementById('edit-title').value = paper.title;
      document.getElementById('edit-authors').value = (paper.authors || []).join(', ');
      document.getElementById('edit-institution').value = paper.institution || '';
      document.getElementById('edit-abstract').value = paper.abstract || '';
      document.getElementById('edit-year').value = paper.year || '';
      document.getElementById('edit-journal').value = paper.journal || '';
      document.getElementById('edit-doi').value = paper.doi || '';
      document.getElementById('edit-downloadUrl').value = paper.downloadUrl || '';
      document.getElementById('edit-keywords').value = (paper.keywords || []).join(', ');
      document.getElementById('edit-citations').value = paper.citations || 0;
      document.getElementById('edit-pages').value = paper.pages || '';
      document.getElementById('edit-language').value = paper.language || 'en';
      
      document.getElementById('edit-modal').classList.add('active');
    }
    
    function closeEditModal() {
      document.getElementById('edit-modal').classList.remove('active');
    }
    
    // Save edit
    async function saveEdit(event) {
      event.preventDefault();
      
      const id = document.getElementById('edit-id').value;
      const paperIndex = papersData.papers.findIndex(p => p.id === id);
      
      if (paperIndex === -1) return;
      
      const authorsInput = document.getElementById('edit-authors').value.trim();
      const keywordsInput = document.getElementById('edit-keywords').value.trim();
      
      papersData.papers[paperIndex] = {
        ...papersData.papers[paperIndex],
        category: document.getElementById('edit-category').value,
        field: document.getElementById('edit-field').value.trim(),
        title: document.getElementById('edit-title').value.trim(),
        authors: authorsInput.split(',').map(a => a.trim()).filter(a => a),
        institution: document.getElementById('edit-institution').value.trim(),
        abstract: document.getElementById('edit-abstract').value.trim(),
        year: parseInt(document.getElementById('edit-year').value) || new Date().getFullYear(),
        journal: document.getElementById('edit-journal').value.trim(),
        doi: document.getElementById('edit-doi').value.trim(),
        downloadUrl: document.getElementById('edit-downloadUrl').value.trim(),
        keywords: keywordsInput.split(',').map(k => k.trim()).filter(k => k),
        citations: parseInt(document.getElementById('edit-citations').value) || 0,
        pages: parseInt(document.getElementById('edit-pages').value) || 0,
        language: document.getElementById('edit-language').value
      };
      
      try {
        await contentManager.saveJSON('Content Studio/research-papers/papers.json', papersData);
        closeEditModal();
        filteredPapers = [...papersData.papers];
        updateDashboard();
        loadFilterCategories();
        loadFieldSuggestions();
        loadAuthorSuggestions();
        renderPapers();
        alert('‚úÖ Paper updated successfully!');
      } catch (error) {
        alert('‚ùå Failed to update paper: ' + error.message);
      }
    }
    
    // Update statistics
    function updateStatistics() {
      // Category stats
      const categoryStats = {};
      papersData.papers.forEach(paper => {
        categoryStats[paper.category] = (categoryStats[paper.category] || 0) + 1;
      });
      
      const categoryStatsDiv = document.getElementById('category-stats');
      categoryStatsDiv.innerHTML = '';
      Object.entries(categoryStats).sort((a, b) => b[1] - a[1]).forEach(([cat, count]) => {
        categoryStatsDiv.innerHTML += `
          <div class="stats-item">
            <span class="stats-item-label">${cat}</span>
            <span class="stats-item-value">${count}</span>
          </div>
        `;
      });
      
      // Year stats
      const yearStats = {};
      papersData.papers.forEach(paper => {
        const year = paper.year || 'Unknown';
        yearStats[year] = (yearStats[year] || 0) + 1;
      });
      
      const yearStatsDiv = document.getElementById('year-stats');
      yearStatsDiv.innerHTML = '';
      Object.entries(yearStats).sort((a, b) => b[0] - a[0]).forEach(([year, count]) => {
        yearStatsDiv.innerHTML += `
          <div class="stats-item">
            <span class="stats-item-label">${year}</span>
            <span class="stats-item-value">${count}</span>
          </div>
        `;
      });
      
      // Language stats
      const languageStats = {};
      papersData.papers.forEach(paper => {
        const lang = paper.language === 'en' ? 'üá¨üáß English' : paper.language === 'bn' ? 'üáßüá© ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ' : paper.language === 'hi' ? 'üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä' : 'Other';
        languageStats[lang] = (languageStats[lang] || 0) + 1;
      });
      
      const languageStatsDiv = document.getElementById('language-stats');
      languageStatsDiv.innerHTML = '';
      Object.entries(languageStats).sort((a, b) => b[1] - a[1]).forEach(([lang, count]) => {
        languageStatsDiv.innerHTML += `
          <div class="stats-item">
            <span class="stats-item-label">${lang}</span>
            <span class="stats-item-value">${count}</span>
          </div>
        `;
      });
      
      // Top authors
      const authorPaperCount = {};
      papersData.papers.forEach(paper => {
        if (paper.authors && Array.isArray(paper.authors)) {
          paper.authors.forEach(author => {
            authorPaperCount[author] = (authorPaperCount[author] || 0) + 1;
          });
        }
      });
      
      const authorStatsDiv = document.getElementById('author-stats');
      authorStatsDiv.innerHTML = '';
      Object.entries(authorPaperCount).sort((a, b) => b[1] - a[1]).slice(0, 10).forEach(([author, count]) => {
        authorStatsDiv.innerHTML += `
          <div class="stats-item">
            <span class="stats-item-label">${author}</span>
            <span class="stats-item-value">${count}</span>
          </div>
        `;
      });
      
      // Top cited papers
      const citationsStatsDiv = document.getElementById('citations-stats');
      citationsStatsDiv.innerHTML = '';
      [...papersData.papers].sort((a, b) => (b.citations || 0) - (a.citations || 0)).slice(0, 10).forEach(paper => {
        citationsStatsDiv.innerHTML += `
          <div class="stats-item">
            <span class="stats-item-label">${paper.title.substring(0, 40)}...</span>
            <span class="stats-item-value">${paper.citations || 0}</span>
          </div>
        `;
      });
    }
    
    // JSON Editor functions
    function validateJSON() {
      const editor = document.getElementById('json-editor');
      try {
        JSON.parse(editor.value);
        alert('‚úÖ JSON is valid!');
      } catch (error) {
        alert('‚ùå Invalid JSON: ' + error.message);
      }
    }
    
    function formatJSON() {
      const editor = document.getElementById('json-editor');
      try {
        const formatted = JSON.stringify(JSON.parse(editor.value), null, 2);
        editor.value = formatted;
        alert('‚ú® JSON formatted successfully!');
      } catch (error) {
        alert('‚ùå Cannot format invalid JSON: ' + error.message);
      }
    }
    
    async function saveJSON() {
      const editor = document.getElementById('json-editor');
      try {
        const data = JSON.parse(editor.value);
        await contentManager.saveJSON('Content Studio/research-papers/papers.json', data);
        papersData = data;
        filteredPapers = [...papersData.papers];
        updateDashboard();
        loadFilterCategories();
        renderPapers();
        alert('‚úÖ JSON saved successfully!');
      } catch (error) {
        alert('‚ùå Failed to save: ' + error.message);
      }
    }
    
    async function reloadJSON() {
      await loadPapers();
      document.getElementById('json-editor').value = JSON.stringify(papersData, null, 2);
      alert('üîÑ JSON reloaded from file!');
    }
    
    // Tab switching
    function switchTab(tabName) {
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab-item').forEach(item => item.classList.remove('active'));
      
      document.getElementById(tabName + '-tab').classList.add('active');
      document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
      
      if (tabName === 'statistics') {
        updateStatistics();
      } else if (tabName === 'json-editor') {
        document.getElementById('json-editor').value = JSON.stringify(papersData, null, 2);
      } else if (tabName === 'manage') {
        applyFilters();
      }
    }
    
    // Save to GitHub
    async function saveToGitHub() {
      if (!confirm('Save papers.json to GitHub?')) return;
      
      try {
        const uploader = new GitHubContentUploader();
        await uploader.uploadFile(
          'Content Studio/research-papers/papers.json',
          JSON.stringify(papersData, null, 2),
          'Updated research papers data'
        );
        alert('‚úÖ Saved to GitHub successfully!');
      } catch (error) {
        alert('‚ùå Failed to save to GitHub: ' + error.message);
      }
    }
  </script>
</body>
</html>
