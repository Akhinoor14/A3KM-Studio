<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
  
  <title>Books & PDFs Manager - A3KM Studio</title>
  <link rel="stylesheet" href="../../../Optimization/mobile-universal.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="../../../Optimization/mobile-universal.js" defer></script>
  <style>
    :root {
      --primary-color: #8B4513;
      --primary-dark: #654321;
      --primary-light: #A0522D;
      --bg-dark: rgba(10, 10, 10, 0.98);
      --text-primary: rgba(255, 255, 255, 0.95);
      --text-secondary: rgba(255, 255, 255, 0.7);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: linear-gradient(135deg, #0a0a0a 0%, #1a0a0a 100%);
      color: var(--text-primary);
      font-family: 'Inter', -apple-system, 'Segoe UI', sans-serif;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    /* Engineering Grid Background */
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-image: 
        repeating-linear-gradient(0deg, rgba(139, 69, 19, 0.03) 0 1px, transparent 1px 30px),
        repeating-linear-gradient(90deg, rgba(139, 69, 19, 0.03) 0 1px, transparent 1px 30px),
        repeating-linear-gradient(45deg, rgba(139, 69, 19, 0.05) 0 2px, transparent 2px 40px);
      background-size: 30px 30px, 30px 30px, 80px 80px;
      pointer-events: none;
      z-index: 0;
      opacity: 0.6;
    }

    /* Header */
    .header {
      position: relative;
      z-index: 100;
      background: linear-gradient(135deg, rgba(101, 67, 33, 0.98), rgba(139, 69, 19, 0.99));
      border-bottom: 3px solid var(--primary-color);
      box-shadow: 0 6px 25px rgba(139, 69, 19, 0.4);
      padding: 20px 40px;
    }

    .header-container {
      max-width: 1600px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .header-icon {
      width: 70px;
      height: 70px;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.2rem;
      box-shadow: 0 0 40px rgba(139, 69, 19, 0.7);
      animation: iconGlow 2s ease-in-out infinite;
    }

    @keyframes iconGlow {
      0%, 100% { box-shadow: 0 0 40px rgba(139, 69, 19, 0.7); }
      50% { box-shadow: 0 0 60px rgba(160, 82, 45, 0.9); }
    }

    .header-title h1 {
      font-size: 2rem;
      color: white;
      margin-bottom: 5px;
      font-weight: 800;
      text-shadow: 0 0 20px rgba(139, 69, 19, 0.5);
    }

    .header-title p {
      font-size: 0.95rem;
      color: var(--text-secondary);
    }

    .header-actions {
      display: flex;
      gap: 15px;
    }

    .btn, .back-btn, .btn-save {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 12px 24px;
      border: 2px solid transparent;
      border-radius: 10px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      font-size: 14px;
    }

    .back-btn {
      background: rgba(255, 255, 255, 0.08);
      color: white;
      border-color: rgba(255, 255, 255, 0.2);
    }

    .back-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-2px);
    }

    .btn-save {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      color: white;
      border-color: var(--primary-color);
      box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
    }

    .btn-save:hover {
      background: linear-gradient(135deg, var(--primary-light), var(--primary-color));
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(139, 69, 19, 0.5);
    }

    /* Main Container */
    .container {
      position: relative;
      z-index: 1;
      max-width: 1600px;
      margin: 40px auto;
      padding: 0 40px;
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 30px;
    }

    /* Sidebar */
    .sidebar {
      background: linear-gradient(135deg, rgba(101, 67, 33, 0.7), rgba(26, 0, 0, 0.9));
      border: 2px solid rgba(139, 69, 19, 0.3);
      border-radius: 18px;
      padding: 25px;
      height: fit-content;
      position: sticky;
      top: 20px;
    }

    .sidebar h2 {
      color: var(--primary-color);
      font-size: 1.3rem;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 800;
    }

    .tab-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .tab-item {
      padding: 12px 15px;
      background: rgba(139, 69, 19, 0.05);
      border: 2px solid transparent;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.95rem;
      color: var(--text-secondary);
      font-weight: 600;
    }

    .tab-item:hover {
      background: rgba(139, 69, 19, 0.15);
      border-color: rgba(139, 69, 19, 0.3);
      color: var(--text-primary);
      transform: translateX(5px);
    }

    .tab-item.active {
      background: rgba(139, 69, 19, 0.25);
      border-color: var(--primary-color);
      color: var(--primary-color);
      font-weight: 700;
      box-shadow: 0 0 20px rgba(139, 69, 19, 0.3);
    }

    .tab-item i {
      font-size: 1.1rem;
    }

    /* Stats Panel */
    .stats-panel {
      margin-top: 25px;
      padding-top: 20px;
      border-top: 2px solid rgba(139, 69, 19, 0.3);
    }

    .stats-panel h3 {
      color: var(--primary-color);
      font-size: 1.1rem;
      margin-bottom: 15px;
      font-weight: 700;
    }

    .stat-item-sidebar {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 8px;
      margin-bottom: 8px;
      border-left: 3px solid var(--primary-color);
    }

    .stat-item-sidebar span:first-child {
      color: var(--text-secondary);
      font-size: 0.85rem;
    }

    .stat-item-sidebar span:last-child {
      color: var(--primary-color);
      font-weight: 700;
    }

    /* Content Area */
    .content-area {
      background: linear-gradient(135deg, rgba(26, 0, 0, 0.7), rgba(0, 0, 0, 0.9));
      border: 2px solid rgba(139, 69, 19, 0.25);
      border-radius: 18px;
      padding: 35px;
      min-height: 600px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
    }

    .tab-content {
      display: none;
      animation: fadeIn 0.4s ease;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Content Header */
    .content-header {
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid rgba(139, 69, 19, 0.3);
    }

    .content-header h2 {
      color: var(--primary-color);
      font-size: 1.8rem;
      margin-bottom: 8px;
      font-weight: 800;
    }

    .content-header p {
      color: var(--text-secondary);
      font-size: 1rem;
    }

    /* Dashboard Cards */
    .dashboard-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .dashboard-card {
      padding: 30px;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      color: white;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      border: 2px solid var(--primary-light);
    }

    .dashboard-card::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
      animation: pulse 3s ease-in-out infinite;
    }

    .dashboard-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px rgba(139, 69, 19, 0.6);
    }

    .dashboard-card h3 {
      font-size: 3rem;
      margin-bottom: 8px;
      font-weight: 800;
      position: relative;
      z-index: 1;
    }

    .dashboard-card p {
      font-size: 1rem;
      opacity: 0.95;
      position: relative;
      z-index: 1;
      font-weight: 600;
    }

    @keyframes pulse {
      0%, 100% { transform: translate(0, 0) scale(1); }
      50% { transform: translate(-10%, -10%) scale(1.1); }
    }

    /* Forms */
    .upload-form, .edit-form {
      display: grid;
      gap: 25px;
    }

    .form-row, .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 20px;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-group label {
      color: var(--text-primary);
      font-weight: 600;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      padding: 12px 15px;
      background: rgba(0, 0, 0, 0.5);
      border: 2px solid rgba(139, 69, 19, 0.3);
      border-radius: 10px;
      color: var(--text-primary);
      font-size: 1rem;
      font-family: inherit;
      transition: all 0.3s ease;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 15px rgba(139, 69, 19, 0.3);
      background: rgba(0, 0, 0, 0.7);
    }

    .form-group textarea {
      min-height: 200px;
      resize: vertical;
      font-family: 'Consolas', 'Monaco', monospace;
    }

    .form-group small {
      color: var(--text-secondary);
      font-size: 0.85rem;
    }

    /* File Upload */
    .file-upload-label {
      padding: 40px;
      background: rgba(0, 0, 0, 0.4);
      border: 2px dashed var(--primary-color);
      border-radius: 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 10px;
      color: var(--text-secondary);
    }

    .file-upload-label:hover {
      border-color: var(--primary-light);
      background: rgba(139, 69, 19, 0.1);
      box-shadow: 0 0 20px rgba(139, 69, 19, 0.3);
    }

    /* Buttons */
    .btn-primary, .preview-btn {
      padding: 15px 30px;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      color: white;
      border: 2px solid var(--primary-color);
      border-radius: 10px;
      font-weight: 700;
      cursor: pointer;
      width: 100%;
      margin-top: 20px;
      transition: all 0.3s ease;
      font-size: 16px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .btn-primary:hover, .preview-btn:hover {
      background: linear-gradient(135deg, var(--primary-light), var(--primary-color));
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(139, 69, 19, 0.5);
    }

    .preview-btn {
      background: rgba(0, 0, 0, 0.5);
      color: var(--primary-color);
    }

    .preview-btn:hover {
      background: var(--primary-color);
      color: white;
    }

    /* Search & Filters */
    .search-bar, .filters-bar, .filters-container {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      padding: 20px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 12px;
      border: 2px solid rgba(139, 69, 19, 0.3);
    }

    .search-bar input,
    .filters-bar input,
    .filters-bar select {
      flex: 1;
      min-width: 150px;
      padding: 12px 15px;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid rgba(139, 69, 19, 0.3);
      border-radius: 8px;
      color: var(--text-primary);
      font-size: 14px;
    }

    .search-bar input:focus,
    .filters-bar input:focus,
    .filters-bar select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 10px rgba(139, 69, 19, 0.3);
    }

    /* Content Grid */
    .content-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .content-card {
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid rgba(139, 69, 19, 0.3);
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
      position: relative;
    }

    .content-card:hover {
      border-color: var(--primary-color);
      box-shadow: 0 8px 25px rgba(139, 69, 19, 0.5);
      transform: translateY(-5px);
    }

    .card-thumbnail {
      width: 100%;
      height: 180px;
      object-fit: cover;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
    }

    .card-body {
      padding: 15px;
    }

    .card-title {
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 8px;
      font-size: 16px;
    }

    .card-meta {
      font-size: 12px;
      color: var(--text-secondary);
      margin-bottom: 12px;
    }

    .card-actions {
      display: flex;
      gap: 8px;
      margin-top: 12px;
    }

    .card-actions button {
      flex: 1;
      padding: 10px;
      border: 2px solid var(--primary-color);
      background: rgba(0, 0, 0, 0.5);
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.3s ease;
      color: var(--primary-color);
    }

    .card-actions button:hover {
      background: var(--primary-color);
      color: white;
      transform: translateY(-2px);
    }

    .btn-delete, .btn-danger {
      border-color: #f44336 !important;
      color: #f44336 !important;
    }

    .btn-delete:hover, .btn-danger:hover {
      background: #f44336 !important;
      color: white !important;
    }

    /* Bulk Toolbar */
    .bulk-toolbar {
      display: none;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid var(--primary-color);
      padding: 15px 20px;
      border-radius: 12px;
      margin-bottom: 20px;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .bulk-toolbar.active {
      display: flex;
      animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .bulk-toolbar strong {
      color: var(--primary-color);
      font-size: 1.1rem;
    }

    .bulk-toolbar .btn {
      padding: 10px 18px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .bulk-toolbar .btn-select-all {
      background: rgba(33, 150, 243, 0.2);
      border: 2px solid #2196F3;
      color: #2196F3;
    }

    .bulk-toolbar .btn-select-all:hover {
      background: #2196F3;
      color: white;
    }

    .bulk-toolbar .btn-bulk-delete {
      background: rgba(244, 67, 54, 0.2);
      border: 2px solid #f44336;
      color: #f44336;
    }

    .bulk-toolbar .btn-bulk-delete:hover {
      background: #f44336;
      color: white;
    }

    /* Pagination */
    .pagination-controls {
      display: none;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-top: 30px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.5);
      border: 2px solid rgba(139, 69, 19, 0.3);
      border-radius: 12px;
    }

    .pagination-controls.active {
      display: flex;
    }

    .pagination-controls button {
      padding: 10px 20px;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid var(--primary-color);
      color: var(--primary-color);
      border-radius: 8px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .pagination-controls button:hover:not(:disabled) {
      background: var(--primary-color);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
    }

    .pagination-controls button:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .pagination-controls span {
      color: var(--primary-color);
      font-weight: 700;
    }

    /* Progress & Messages */
    .progress {
      margin-top: 20px;
      display: none;
    }

    .progress.active {
      display: block;
    }

    .progress-bar {
      width: 100%;
      height: 10px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 5px;
      overflow: hidden;
      border: 1px solid var(--primary-color);
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
      width: 0%;
      transition: width 0.3s ease;
    }

    .progress-text {
      text-align: center;
      color: var(--primary-color);
      font-size: 14px;
      font-weight: 700;
      margin-top: 10px;
    }

    .success-message {
      background: linear-gradient(135deg, #4caf50, #66bb6a);
      color: white;
      padding: 15px 20px;
      border-radius: 12px;
      margin-top: 20px;
      display: none;
      text-align: center;
      font-weight: 600;
    }

    .success-message.active {
      display: block;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 9999;
      overflow-y: auto;
    }

    .modal.active {
      display: block;
    }

    .modal-content {
      max-width: 900px;
      margin: 40px auto;
      background: linear-gradient(135deg, rgba(26, 0, 0, 0.98), rgba(0, 0, 0, 0.99));
      border: 2px solid var(--primary-color);
      border-radius: 20px;
      padding: 40px;
      position: relative;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.9);
    }

    .modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #f44336;
      color: white;
      border: 2px solid #f44336;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 20px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-close:hover {
      background: #d32f2f;
      transform: rotate(90deg);
    }

    /* JSON Editor */
    .json-editor-area {
      background: #1e1e1e;
      border: 2px solid var(--primary-color);
      border-radius: 12px;
      padding: 20px;
      min-height: 500px;
    }

    .json-editor-area textarea {
      width: 100%;
      min-height: 500px;
      background: #1e1e1e;
      color: #d4d4d4;
      border: none;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 14px;
      line-height: 1.6;
      resize: vertical;
    }

    .json-editor-area textarea:focus {
      outline: none;
    }

    .json-toolbar {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .json-toolbar button {
      padding: 12px 20px;
      border: 2px solid;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .json-toolbar .btn-validate {
      background: rgba(76, 175, 80, 0.2);
      border-color: #4CAF50;
      color: #4CAF50;
    }

    .json-toolbar .btn-validate:hover {
      background: #4CAF50;
      color: white;
    }

    .json-toolbar .btn-format {
      background: rgba(33, 150, 243, 0.2);
      border-color: #2196F3;
      color: #2196F3;
    }

    .json-toolbar .btn-format:hover {
      background: #2196F3;
      color: white;
    }

    .json-toolbar .btn-download {
      background: rgba(255, 193, 7, 0.2);
      border-color: #FFC107;
      color: #FFC107;
    }

    .json-toolbar .btn-download:hover {
      background: #FFC107;
      color: #333;
    }

    .json-toolbar .btn-import {
      background: rgba(139, 69, 19, 0.2);
      border-color: var(--primary-color);
      color: var(--primary-color);
    }

    .json-toolbar .btn-import:hover {
      background: var(--primary-color);
      color: white;
    }

    /* Statistics */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      color: white;
      padding: 25px;
      border-radius: 12px;
      text-align: center;
    }

    .stat-card h3 {
      font-size: 2.5rem;
      margin-bottom: 5px;
      font-weight: 800;
    }

    .stat-card p {
      font-size: 0.95rem;
      opacity: 0.95;
    }

    .breakdown-section {
      margin-top: 30px;
      padding: 25px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 12px;
      border: 2px solid rgba(139, 69, 19, 0.3);
    }

    body {
      background: linear-gradient(135deg, #0a0a0a 0%, #1a0a0a 100%);
      color: var(--text-primary);
      font-family: 'Inter', -apple-system, 'Segoe UI', sans-serif;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    /* Engineering Grid Background */
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-image: 
        repeating-linear-gradient(0deg, rgba(139, 69, 19, 0.03) 0 1px, transparent 1px 30px),
        repeating-linear-gradient(90deg, rgba(139, 69, 19, 0.03) 0 1px, transparent 1px 30px),
        repeating-linear-gradient(45deg, rgba(139, 69, 19, 0.05) 0 2px, transparent 2px 40px);
      background-size: 30px 30px, 30px 30px, 80px 80px;
      pointer-events: none;
      z-index: 0;
      opacity: 0.6;
    }

    /* Header */
    .header {
      position: relative;
      z-index: 100;
      background: linear-gradient(135deg, rgba(101, 67, 33, 0.98), rgba(139, 69, 19, 0.99));
      border-bottom: 3px solid var(--primary-color);
      box-shadow: 0 6px 25px rgba(139, 69, 19, 0.4);
      padding: 20px 40px;
    }

    .header-container {
      max-width: 1600px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .header-icon {
      width: 70px;
      height: 70px;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.2rem;
      box-shadow: 0 0 40px rgba(139, 69, 19, 0.7);
      animation: iconGlow 2s ease-in-out infinite;
    }

    @keyframes iconGlow {
      0%, 100% { box-shadow: 0 0 40px rgba(139, 69, 19, 0.7); }
      50% { box-shadow: 0 0 60px rgba(160, 82, 45, 0.9); }
    }

    .header-title h1 {
      font-size: 2rem;
      color: white;
      margin-bottom: 5px;
      font-weight: 800;
      text-shadow: 0 0 20px rgba(139, 69, 19, 0.5);
    }

    .header-title p {
      font-size: 0.95rem;
      color: var(--text-secondary);
    }

    .header-actions {
      display: flex;
      gap: 15px;
    }

    .btn, .back-btn, .btn-save {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 12px 24px;
      border: 2px solid transparent;
      border-radius: 10px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      font-size: 14px;
    }

    .back-btn {
      background: rgba(255, 255, 255, 0.08);
      color: white;
      border-color: rgba(255, 255, 255, 0.2);
    }

    .back-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-2px);
    }

    .btn-save {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      color: white;
      border-color: var(--primary-color);
      box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
    }

    .btn-save:hover {
      background: linear-gradient(135deg, var(--primary-light), var(--primary-color));
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(139, 69, 19, 0.5);
    }

    /* Main Container */
    .container {
      position: relative;
      z-index: 1;
      max-width: 1600px;
      margin: 40px auto;
      padding: 0 40px;
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 30px;
    }

    /* Sidebar */
    .sidebar {
      background: linear-gradient(135deg, rgba(101, 67, 33, 0.7), rgba(26, 0, 0, 0.9));
      border: 2px solid rgba(139, 69, 19, 0.3);
      border-radius: 18px;
      padding: 25px;
      height: fit-content;
      position: sticky;
      top: 20px;
    }

    .sidebar h2 {
      color: var(--primary-color);
      font-size: 1.3rem;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 800;
    }

    .tab-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .tab-item {
      padding: 12px 15px;
      background: rgba(139, 69, 19, 0.05);
      border: 2px solid transparent;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.95rem;
      color: var(--text-secondary);
      font-weight: 600;
    }

    .tab-item:hover {
      background: rgba(139, 69, 19, 0.15);
      border-color: rgba(139, 69, 19, 0.3);
      color: var(--text-primary);
      transform: translateX(5px);
    }

    .tab-item.active {
      background: rgba(139, 69, 19, 0.25);
      border-color: var(--primary-color);
      color: var(--primary-color);
      font-weight: 700;
      box-shadow: 0 0 20px rgba(139, 69, 19, 0.3);
    }

    .tab-item i {
      font-size: 1.1rem;
    }

    /* Stats Panel */
    .stats-panel {
      margin-top: 25px;
      padding-top: 20px;
      border-top: 2px solid rgba(139, 69, 19, 0.3);
    }

    .stats-panel h3 {
      color: var(--primary-color);
      font-size: 1.1rem;
      margin-bottom: 15px;
      font-weight: 700;
    }

    .stat-item-sidebar {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 8px;
      margin-bottom: 8px;
      border-left: 3px solid var(--primary-color);
    }

    .stat-item-sidebar span:first-child {
      color: var(--text-secondary);
      font-size: 0.85rem;
    }

    .stat-item-sidebar span:last-child {
      color: var(--primary-color);
      font-weight: 700;
    }

    /* Content Area */
    .content-area {
      background: linear-gradient(135deg, rgba(26, 0, 0, 0.7), rgba(0, 0, 0, 0.9));
      border: 2px solid rgba(139, 69, 19, 0.25);
      border-radius: 18px;
      padding: 35px;
      min-height: 600px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
    }

    .tab-content {
      display: none;
      animation: fadeIn 0.4s ease;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Content Header */
    .content-header {
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid rgba(139, 69, 19, 0.3);
    }

    .content-header h2 {
      color: var(--primary-color);
      font-size: 1.8rem;
      margin-bottom: 8px;
      font-weight: 800;
    }

    .content-header p {
      color: var(--text-secondary);
      font-size: 1rem;
    }

    /* Dashboard Cards */
    .dashboard-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .dashboard-card {
      padding: 30px;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      color: white;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      border: 2px solid var(--primary-light);
    }

    .dashboard-card::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
      animation: pulse 3s ease-in-out infinite;
    }

    .dashboard-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px rgba(139, 69, 19, 0.6);
    }

    .dashboard-card h3 {
      font-size: 3rem;
      margin-bottom: 8px;
      font-weight: 800;
      position: relative;
      z-index: 1;
    }

    .dashboard-card p {
      font-size: 1rem;
      opacity: 0.95;
      position: relative;
      z-index: 1;
      font-weight: 600;
    }

    @keyframes pulse {
      0%, 100% { transform: translate(0, 0) scale(1); }
      50% { transform: translate(-10%, -10%) scale(1.1); }
    }

    /* Forms */
    .upload-form, .edit-form {
      display: grid;
      gap: 25px;
    }

    .form-row, .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 20px;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-group label {
      color: var(--text-primary);
      font-weight: 600;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      padding: 12px 15px;
      background: rgba(0, 0, 0, 0.5);
      border: 2px solid rgba(139, 69, 19, 0.3);
      border-radius: 10px;
      color: var(--text-primary);
      font-size: 1rem;
      font-family: inherit;
      transition: all 0.3s ease;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 15px rgba(139, 69, 19, 0.3);
      background: rgba(0, 0, 0, 0.7);
    }

    .form-group textarea {
      min-height: 200px;
      resize: vertical;
      font-family: 'Consolas', 'Monaco', monospace;
    }

    .form-group small {
      color: var(--text-secondary);
      font-size: 0.85rem;
    }

    /* File Upload */
    .file-upload-label {
      padding: 40px;
      background: rgba(0, 0, 0, 0.4);
      border: 2px dashed var(--primary-color);
      border-radius: 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 10px;
      color: var(--text-secondary);
    }

    .file-upload-label:hover {
      border-color: var(--primary-light);
      background: rgba(139, 69, 19, 0.1);
      box-shadow: 0 0 20px rgba(139, 69, 19, 0.3);
    }

    /* Buttons */
    .btn-primary, .preview-btn {
      padding: 15px 30px;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      color: white;
      border: 2px solid var(--primary-color);
      border-radius: 10px;
      font-weight: 700;
      cursor: pointer;
      width: 100%;
      margin-top: 20px;
      transition: all 0.3s ease;
      font-size: 16px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .btn-primary:hover, .preview-btn:hover {
      background: linear-gradient(135deg, var(--primary-light), var(--primary-color));
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(139, 69, 19, 0.5);
    }

    .preview-btn {
      background: rgba(0, 0, 0, 0.5);
      color: var(--primary-color);
    }

    .preview-btn:hover {
      background: var(--primary-color);
      color: white;
    }

    /* Search & Filters */
    .search-bar, .filters-bar, .filters-container {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      padding: 20px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 12px;
      border: 2px solid rgba(139, 69, 19, 0.3);
    }

    .search-bar input,
    .filters-bar input,
    .filters-bar select {
      flex: 1;
      min-width: 150px;
      padding: 12px 15px;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid rgba(139, 69, 19, 0.3);
      border-radius: 8px;
      color: var(--text-primary);
      font-size: 14px;
    }

    .search-bar input:focus,
    .filters-bar input:focus,
    .filters-bar select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 10px rgba(139, 69, 19, 0.3);
    }

    /* Content Grid */
    .content-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .content-card {
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid rgba(139, 69, 19, 0.3);
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
      position: relative;
    }

    .content-card:hover {
      border-color: var(--primary-color);
      box-shadow: 0 8px 25px rgba(139, 69, 19, 0.5);
      transform: translateY(-5px);
    }

    .card-thumbnail {
      width: 100%;
      height: 180px;
      object-fit: cover;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
    }

    .card-body {
      padding: 15px;
    }

    .card-title {
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 8px;
      font-size: 16px;
    }

    .card-meta {
      font-size: 12px;
      color: var(--text-secondary);
      margin-bottom: 12px;
    }

    .card-actions {
      display: flex;
      gap: 8px;
      margin-top: 12px;
    }

    .card-actions button {
      flex: 1;
      padding: 10px;
      border: 2px solid var(--primary-color);
      background: rgba(0, 0, 0, 0.5);
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.3s ease;
      color: var(--primary-color);
    }

    .card-actions button:hover {
      background: var(--primary-color);
      color: white;
      transform: translateY(-2px);
    }

    .btn-delete, .btn-danger {
      border-color: #f44336 !important;
      color: #f44336 !important;
    }

    .btn-delete:hover, .btn-danger:hover {
      background: #f44336 !important;
      color: white !important;
    }

    /* Bulk Toolbar */
    .bulk-toolbar {
      display: none;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid var(--primary-color);
      padding: 15px 20px;
      border-radius: 12px;
      margin-bottom: 20px;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .bulk-toolbar.active {
      display: flex;
      animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .bulk-toolbar strong {
      color: var(--primary-color);
      font-size: 1.1rem;
    }

    .bulk-toolbar .btn {
      padding: 10px 18px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .bulk-toolbar .btn-select-all {
      background: rgba(33, 150, 243, 0.2);
      border: 2px solid #2196F3;
      color: #2196F3;
    }

    .bulk-toolbar .btn-select-all:hover {
      background: #2196F3;
      color: white;
    }

    .bulk-toolbar .btn-bulk-delete {
      background: rgba(244, 67, 54, 0.2);
      border: 2px solid #f44336;
      color: #f44336;
    }

    .bulk-toolbar .btn-bulk-delete:hover {
      background: #f44336;
      color: white;
    }

    /* Pagination */
    .pagination-controls {
      display: none;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-top: 30px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.5);
      border: 2px solid rgba(139, 69, 19, 0.3);
      border-radius: 12px;
    }

    .pagination-controls.active {
      display: flex;
    }

    .pagination-controls button {
      padding: 10px 20px;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid var(--primary-color);
      color: var(--primary-color);
      border-radius: 8px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .pagination-controls button:hover:not(:disabled) {
      background: var(--primary-color);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
    }

    .pagination-controls button:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .pagination-controls span {
      color: var(--primary-color);
      font-weight: 700;
    }

    /* Progress & Messages */
    .progress {
      margin-top: 20px;
      display: none;
    }

    .progress.active {
      display: block;
    }

    .progress-bar {
      width: 100%;
      height: 10px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 5px;
      overflow: hidden;
      border: 1px solid var(--primary-color);
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
      width: 0%;
      transition: width 0.3s ease;
    }

    .progress-text {
      text-align: center;
      color: var(--primary-color);
      font-size: 14px;
      font-weight: 700;
      margin-top: 10px;
    }

    .success-message {
      background: linear-gradient(135deg, #4caf50, #66bb6a);
      color: white;
      padding: 15px 20px;
      border-radius: 12px;
      margin-top: 20px;
      display: none;
      text-align: center;
      font-weight: 600;
    }

    .success-message.active {
      display: block;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 9999;
      overflow-y: auto;
    }

    .modal.active {
      display: block;
    }

    .modal-content {
      max-width: 900px;
      margin: 40px auto;
      background: linear-gradient(135deg, rgba(26, 0, 0, 0.98), rgba(0, 0, 0, 0.99));
      border: 2px solid var(--primary-color);
      border-radius: 20px;
      padding: 40px;
      position: relative;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.9);
    }

    .modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #f44336;
      color: white;
      border: 2px solid #f44336;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 20px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-close:hover {
      background: #d32f2f;
      transform: rotate(90deg);
    }

    /* JSON Editor */
    .json-editor-area {
      background: #1e1e1e;
      border: 2px solid var(--primary-color);
      border-radius: 12px;
      padding: 20px;
      min-height: 500px;
    }

    .json-editor-area textarea {
      width: 100%;
      min-height: 500px;
      background: #1e1e1e;
      color: #d4d4d4;
      border: none;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 14px;
      line-height: 1.6;
      resize: vertical;
    }

    .json-editor-area textarea:focus {
      outline: none;
    }

    .json-toolbar {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .json-toolbar button {
      padding: 12px 20px;
      border: 2px solid;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .json-toolbar .btn-validate {
      background: rgba(76, 175, 80, 0.2);
      border-color: #4CAF50;
      color: #4CAF50;
    }

    .json-toolbar .btn-validate:hover {
      background: #4CAF50;
      color: white;
    }

    .json-toolbar .btn-format {
      background: rgba(33, 150, 243, 0.2);
      border-color: #2196F3;
      color: #2196F3;
    }

    .json-toolbar .btn-format:hover {
      background: #2196F3;
      color: white;
    }

    .json-toolbar .btn-download {
      background: rgba(255, 193, 7, 0.2);
      border-color: #FFC107;
      color: #FFC107;
    }

    .json-toolbar .btn-download:hover {
      background: #FFC107;
      color: #333;
    }

    .json-toolbar .btn-import {
      background: rgba(139, 69, 19, 0.2);
      border-color: var(--primary-color);
      color: var(--primary-color);
    }

    .json-toolbar .btn-import:hover {
      background: var(--primary-color);
      color: white;
    }

    /* Statistics */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      color: white;
      padding: 25px;
      border-radius: 12px;
      text-align: center;
    }

    .stat-card h3 {
      font-size: 2.5rem;
      margin-bottom: 5px;
      font-weight: 800;
    }

    .stat-card p {
      font-size: 0.95rem;
      opacity: 0.95;
    }

    .breakdown-section {
      margin-top: 30px;
      padding: 25px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 12px;
      border: 2px solid rgba(139, 69, 19, 0.3);
    }

    .breakdown-section h3 {
      color: var(--primary-color);
      margin-bottom: 20px;
      font-size: 1.4rem;
      font-weight: 700;
    }

    .breakdown-item {
      display: flex;
      justify-content: space-between;
      padding: 12px;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 8px;
      margin-bottom: 10px;
      border-left: 4px solid var(--primary-color);
    }

    .breakdown-item strong {
      color: var(--text-primary);
    }

    .breakdown-item span {
      color: var(--primary-color);
      font-weight: 700;
    }

    /* Badges */
    .status-badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 600;
      margin-right: 8px;
    }

    .status-draft { background: #FFC107; color: #333; }
    .status-published { background: #4CAF50; color: white; }
    .status-scheduled { background: #2196F3; color: white; }

    .difficulty-indicator {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 5px 10px;
      background: rgba(139, 69, 19, 0.1);
      border-radius: 6px;
      font-size: 12px;
      color: var(--primary-color);
      font-weight: 600;
    }

    .audience-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .audience-tag {
      padding: 6px 12px;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      color: white;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 600;
    }

    .info-box, .markdown-help {
      background: rgba(139, 69, 19, 0.1);
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      font-size: 13px;
      color: var(--text-secondary);
      border-left: 4px solid var(--primary-color);
    }

    .info-box strong {
      color: var(--primary-color);
    }

    .word-counter {
      display: flex;
      justify-content: space-between;
      padding: 10px 15px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      margin-top: 10px;
      font-size: 13px;
      color: var(--text-secondary);
    }

    .word-counter span {
      font-weight: 600;
      color: var(--primary-color);
    }

    .seo-score {
      display: inline-block;
      padding: 8px 16px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
    }

    .seo-excellent { background: #4CAF50; color: white; }
    .seo-good { background: #8BC34A; color: white; }
    .seo-fair { background: #FFC107; color: #333; }
    .seo-poor { background: #f44336; color: white; }

    .checkbox-group {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 10px;
      padding: 15px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
    }

    .checkbox-label {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      font-size: 14px;
      color: var(--text-secondary);
    }

    .checkbox-label input {
      cursor: pointer;
      width: 18px;
      height: 18px;
      accent-color: var(--primary-color);
    }

    .btn-icon {
      width: 40px;
      height: 40px;
      flex: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: rgba(139, 69, 19, 0.2);
      border: 2px solid rgba(139, 69, 19, 0.3);
      border-radius: 8px;
      color: var(--primary-color);
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 16px;
      padding: 0;
    }

    .btn-icon:hover {
      background: var(--primary-color);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(139, 69, 19, 0.4);
    }

    .btn-icon.btn-danger {
      background: rgba(244, 67, 54, 0.2);
      border-color: rgba(244, 67, 54, 0.3);
      color: #f44336;
    }

    .btn-icon.btn-danger:hover {
      background: #f44336;
      color: white;
      border-color: #f44336;
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .container {
        grid-template-columns: 1fr;
      }

      .sidebar {
        position: relative;
        top: 0;
      }

      .form-row, .form-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 768px) {
      .header {
        padding: 15px 20px;
      }

      .container {
        padding: 0 20px;
        margin: 20px auto;
      }

      .content-area {
        padding: 20px;
      }

      .content-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="header-container">
      <div class="header-left">
        <div class="header-icon">üìö</div>
        <div class="header-title">
          <h1>Books & PDFs Manager</h1>
          <p>Complete library administration system</p>
        </div>
      </div>
      <div class="header-actions">
        <a href="content-hub.html" class="back-btn">
          ‚Üê Back to Hub
        </a>
        <button class="btn-save" onclick="saveToGitHub()">
          üíæ Save Changes
        </button>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
      <h2>üìã Navigation</h2>
      <div class="tab-list">
        <div class="tab-item active" onclick="switchTab('dashboard')">
          üìä Dashboard
        </div>
        <div class="tab-item" onclick="switchTab('upload')">
          ‚ûï Upload New Book
        </div>
        <div class="tab-item" onclick="switchTab('manage')">
          üìö Manage Books
        </div>
        <div class="tab-item" onclick="switchTab('statistics')">
          üìà Statistics
        </div>
        <div class="tab-item" onclick="switchTab('json')">
          üîß JSON Editor
        </div>
      </div>
      
      <div class="stats-panel">
        <h3>Quick Stats</h3>
        <div class="stat-item-sidebar">
          <span>Total Books</span>
          <span id="sidebar-total">0</span>
        </div>
        <div class="stat-item-sidebar">
          <span>Authors</span>
          <span id="sidebar-authors">0</span>
        </div>
        <div class="stat-item-sidebar">
          <span>Library Size</span>
          <span id="sidebar-size">0 MB</span>
        </div>
        <div class="stat-item-sidebar">
          <span>Downloads</span>
          <span id="sidebar-downloads">0</span>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="content-area">
      <!-- Dashboard Tab -->
      <div id="dashboard-tab" class="tab-content active">
        <div class="content-header">
          <h2>üìä Dashboard</h2>
          <p>Overview of your books library</p>
        </div>
        
        <div class="dashboard-stats">
          <div class="dashboard-card">
            <h3 id="dash-total">0</h3>
            <p>üìö Total Books</p>
          </div>
          <div class="dashboard-card">
            <h3 id="dash-authors">0</h3>
            <p>‚úçÔ∏è Unique Authors</p>
          </div>
          <div class="dashboard-card">
            <h3 id="dash-size">0 MB</h3>
            <p>üíæ Library Size</p>
          </div>
          <div class="dashboard-card">
            <h3 id="dash-downloads">0</h3>
            <p>üì• Total Downloads</p>
          </div>
        </div>
        
        <div class="info-box">
          <strong>Quick Guide:</strong> Use Upload tab to add new books, Manage tab for bulk operations, and Statistics for detailed breakdowns. All changes are saved to GitHub automatically.
        </div>
      </div>

      <!-- Upload Tab -->
      <div id="upload-tab" class="tab-content">
        <div class="content-header">
          <h2>‚ûï Upload New Book</h2>
          <p>Add a new book to your library</p>
        </div>
        
        <form id="upload-form" onsubmit="uploadBook(event)">
          <div class="form-grid">
            <div class="form-group">
              <label for="categoryGroup">üìÇ Category Group/Sector *</label>
              <select id="categoryGroup" required onchange="updateBookCategoriesFromGroup('category')">
                <option value="">Select sector first...</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="category">üìÅ Specific Category *</label>
              <select id="category" required disabled>
                <option value="">Select sector first...</option>
              </select>
            </div>
          </div>
            
            <div class="form-group full-width">
              <label for="title">Book Title *</label>
              <input type="text" id="title" placeholder="Enter book title" required>
            </div>
            
            <div class="form-group full-width">
              <label for="summary">Summary / Description *</label>
              <textarea id="summary" placeholder="Brief description of the book" required></textarea>
            </div>
            
            <div class="form-group">
              <label for="author">Author * <span style="font-size: 12px; color: #999;">(suggestions available)</span></label>
              <input type="text" id="author" placeholder="Author name" list="author-list" required>
              <datalist id="author-list"></datalist>
            </div>
            
            <div class="form-group">
              <label for="pages">Pages</label>
              <input type="number" id="pages" placeholder="Number of pages">
            </div>
            
            <div class="form-group">
              <label for="size">Size</label>
              <input type="text" id="size" placeholder="e.g., 5.2 MB">
            </div>
            
            <div class="form-group">
              <label for="format">Format *</label>
              <select id="format" required>
                <option value="PDF">PDF</option>
                <option value="EPUB">EPUB</option>
                <option value="MOBI">MOBI</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="language">Language *</label>
              <select id="language" required>
                <option value="en">üá¨üáß English</option>
                <option value="bn">üáßüá© ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
                <option value="hi">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="isbn">ISBN (Optional)</label>
              <input type="text" id="isbn" placeholder="ISBN number">
            </div>
            
            <div class="form-group">
              <label for="publisher">Publisher (Optional)</label>
              <input type="text" id="publisher" placeholder="Publisher name">
            </div>
            
            <div class="form-group">
              <label for="publicationDate">Publication Date (Optional)</label>
              <input type="date" id="publicationDate">
            </div>
            
            <div class="form-group full-width">
              <label for="tags">Tags (comma-separated)</label>
              <input type="text" id="tags" placeholder="e.g., arduino, programming, beginner">
            </div>
            
            <div class="form-group full-width">
              <label for="downloadUrl">Download URL / File Path *</label>
              <input type="text" id="downloadUrl" placeholder="../../Content Storage/books/..." required>
            </div>
            
            <div class="form-group full-width">
              <label for="coverUpload">Cover Image</label>
              <input type="file" id="coverUpload" accept="image/*" onchange="previewCover(event)">
              <div id="coverPreview" class="cover-preview" style="display: none;">
                <img id="coverPreviewImg" src="" alt="Cover Preview">
              </div>
            </div>
          </div>
          
          <button type="submit" class="btn-primary">üì§ Upload Book</button>
          
          <div id="upload-progress" class="progress">
            <div class="progress-bar">
              <div id="upload-progress-fill" class="progress-fill"></div>
            </div>
            <div id="upload-progress-text" class="progress-text"></div>
          </div>
          
          <div id="upload-success" class="success-message">
            ‚úÖ Book uploaded successfully!
          </div>
        </form>
      </div>

      <!-- Manage Tab -->
      <div id="manage-tab" class="tab-content">
        <div class="content-header">
          <h2>üìö Manage Books</h2>
          <p>View, edit, and delete books</p>
        </div>
        
        <!-- Bulk Operations Toolbar -->
        <div id="bulk-toolbar" class="bulk-toolbar">
          <strong>üìã <span id="selected-count">0</span> selected</strong>
          <button class="btn btn-select-all" onclick="selectAllBooks()">‚úÖ Select All</button>
          <button class="btn btn-deselect-all" onclick="deselectAllBooks()">‚ùå Deselect All</button>
          <button class="btn btn-bulk-delete" onclick="bulkDeleteBooks()">üóëÔ∏è Delete Selected</button>
        </div>
        
        <!-- Filters Bar -->
        <div class="filters-bar" style="grid-template-columns: 2fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;">
          <div style="flex: 2; min-width: 300px;">
            <label>üîç Search:</label>
            <input type="text" id="search-input" placeholder="Search by title, author, tags..." oninput="applyFilters()">
          </div>
          
          <div>
            <label>üìÇ Sector:</label>
            <select id="filterCategoryGroup" onchange="updateFilterCategoriesFromGroup(); applyFilters();">
              <option value="">All Sectors</option>
            </select>
          </div>
          
          <div>
            <label>Category:</label>
            <select id="filter-category" onchange="updateSubcategories(); applyFilters();" style="flex: 1;">
              <option value="">All Categories</option>
            </select>
          </div>
          
          <div>
            <label>Subcategory:</label>
            <select id="filter-subcategory" onchange="applyFilters()">
              <option value="">All Subcategories</option>
            </select>
          </div>
          
          <div>
            <label>üìÖ From Date:</label>
            <input type="date" id="filter-date-from" onchange="applyFilters()">
          </div>
          
          <div>
            <label>üìÖ To Date:</label>
            <input type="date" id="filter-date-to" onchange="applyFilters()">
          </div>
          
          <div>
            <label>Format:</label>
            <select id="filter-format" onchange="applyFilters()">
              <option value="">All Formats</option>
              <option value="PDF">üìÑ PDF</option>
              <option value="EPUB">üìó EPUB</option>
              <option value="MOBI">üìï MOBI</option>
            </select>
          </div>
          
          <div>
            <label>Language:</label>
            <select id="filter-language" onchange="applyFilters()">
              <option value="">All Languages</option>
              <option value="en">üá¨üáß English</option>
              <option value="bn">üáßüá© ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
              <option value="hi">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
            </select>
          </div>
          
          <div>
            <label>Sort By:</label>
            <select id="sort-by" onchange="applyFilters()">
              <option value="date-desc">Date (Newest)</option>
              <option value="date-asc">Date (Oldest)</option>
              <option value="title-asc">Title (A-Z)</option>
              <option value="title-desc">Title (Z-A)</option>
              <option value="author-asc">Author (A-Z)</option>
              <option value="downloads-desc">Most Downloaded</option>
              <option value="pages-desc">Longest</option>
            </select>
          </div>
        </div>
        
        <!-- Books Grid -->
        <div id="books-grid" class="books-grid">
          <!-- Books will be loaded here -->
        </div>
        
        <div id="no-results" class="no-results" style="display: none;">
          <h3>üì≠ No books found</h3>
          <p>Try adjusting your filters or search query</p>
        </div>
        
        <!-- Pagination -->
        <div id="pagination" class="pagination-controls">
          <button id="prev-btn" onclick="previousPage()">‚¨ÖÔ∏è Previous</button>
          <span id="page-info">Page 1 of 1</span>
          <button id="next-btn" onclick="nextPage()">Next ‚û°Ô∏è</button>
        </div>
        
        <!-- Bulk Delete Progress -->
        <div id="bulk-progress" class="progress">
          <div class="progress-bar">
            <div id="bulk-progress-fill" class="progress-fill"></div>
          </div>
          <div id="bulk-progress-text" class="progress-text"></div>
        </div>
      </div>

      <!-- Statistics Tab -->
      <div id="statistics-tab" class="tab-content">
        <div class="content-header">
          <h2>üìà Statistics</h2>
          <p>Detailed library analytics</p>
        </div>
        
        <div class="stats-grid">
          <div class="stat-card">
            <h3 id="stat-total">0</h3>
            <p>Total Books</p>
          </div>
          <div class="stat-card">
            <h3 id="stat-categories">0</h3>
            <p>Categories</p>
          </div>
          <div class="stat-card">
            <h3 id="stat-avg-pages">0</h3>
            <p>Avg Pages</p>
          </div>
          <div class="stat-card">
            <h3 id="stat-total-size">0 MB</h3>
            <p>Total Size</p>
          </div>
        </div>
        
        <div class="breakdown-section">
          <h3>üìï Books by Format</h3>
          <div id="format-breakdown"></div>
        </div>
        
        <div class="breakdown-section">
          <h3>üåç Books by Language</h3>
          <div id="language-breakdown"></div>
        </div>
        
        <div class="breakdown-section">
          <h3>üèÜ Top 10 Most Downloaded</h3>
          <div id="top-downloads"></div>
        </div>
      </div>

      <!-- JSON Editor Tab -->
      <div id="json-tab" class="tab-content">
        <div class="content-header">
          <h2>üîß JSON Editor</h2>
          <p>Direct JSON file editing (Advanced)</p>
        </div>
        
        <div class="json-toolbar">
          <button class="btn-validate" onclick="validateJSON()">‚úÖ Validate</button>
          <button class="btn-format" onclick="formatJSON()">üìù Format</button>
          <button class="btn-primary" onclick="saveJSON()">üíæ Save</button>
        </div>
        
        <div class="json-editor-area">
          <textarea id="json-editor"></textarea>
        </div>
        
        <div id="json-success" class="success-message">
          ‚úÖ JSON saved successfully!
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div id="edit-modal" class="modal">
    <div class="modal-content">
      <button class="modal-close" onclick="closeEditModal()">√ó</button>
      <h2 style="color: #8B4513; margin-bottom: 25px;">‚úèÔ∏è Edit Book</h2>
      
      <form id="edit-form" onsubmit="saveEdit(event)">
        <input type="hidden" id="edit-id">
        
        <div class="form-grid">
          <div class="form-group">
            <label for="edit-categoryGroup">üìÇ Category Group/Sector *</label>
            <select id="edit-categoryGroup" required onchange="updateBookCategoriesFromGroup('edit-category', 'edit-')">
              <option value="">Select sector...</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="edit-category">üìÅ Specific Category *</label>
            <select id="edit-category" required disabled>
              <option value="">Select sector first...</option>
            </select>
          </div>
        </div>
          
          <div class="form-group full-width">
            <label for="edit-title">Book Title *</label>
            <input type="text" id="edit-title" required>
          </div>
          
          <div class="form-group full-width">
            <label for="edit-summary">Summary *</label>
            <textarea id="edit-summary" required></textarea>
          </div>
          
          <div class="form-group">
            <label for="edit-author">Author *</label>
            <input type="text" id="edit-author" required>
          </div>
          
          <div class="form-group">
            <label for="edit-pages">Pages</label>
            <input type="number" id="edit-pages">
          </div>
          
          <div class="form-group">
            <label for="edit-size">Size</label>
            <input type="text" id="edit-size">
          </div>
          
          <div class="form-group">
            <label for="edit-format">Format *</label>
            <select id="edit-format" required>
              <option value="PDF">PDF</option>
              <option value="EPUB">EPUB</option>
              <option value="MOBI">MOBI</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="edit-language">Language *</label>
            <select id="edit-language" required>
              <option value="en">üá¨üáß English</option>
              <option value="bn">üáßüá© ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
              <option value="hi">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="edit-downloads">Downloads</label>
            <input type="number" id="edit-downloads">
          </div>
          
          <div class="form-group">
            <label for="edit-isbn">ISBN</label>
            <input type="text" id="edit-isbn">
          </div>
          
          <div class="form-group">
            <label for="edit-publisher">Publisher</label>
            <input type="text" id="edit-publisher">
          </div>
          
          <div class="form-group full-width">
            <label for="edit-tags">Tags (comma-separated)</label>
            <input type="text" id="edit-tags">
          </div>
          
          <div class="form-group full-width">
            <label for="edit-downloadUrl">Download URL *</label>
            <input type="text" id="edit-downloadUrl" required>
          </div>
        </div>
        
        <button type="submit" class="btn-primary">üíæ Save Changes</button>
      </form>
    </div>
  </div>

  <!-- Scripts -->
  <script src="content-manager.js"></script>
  <script src="github-content-uploader.js"></script>
  <script>
    // Hardcoded categories for immediate display
    const BOOK_CATEGORIES = {
      'Programming & Development': ['Python', 'JavaScript', 'Web Development', 'Mobile Development', 'Data Science', 'AI & ML', 'DevOps', 'Cloud Computing'],
      'Engineering': ['Electrical Engineering', 'Mechanical Engineering', 'Civil Engineering', 'Arduino & IoT', 'MATLAB', 'SolidWorks', 'Embedded Systems', 'Robotics'],
      'Science & Mathematics': ['Physics', 'Chemistry', 'Biology', 'Mathematics', 'Statistics', 'Astronomy', 'Environmental Science'],
      'Business & Finance': ['Entrepreneurship', 'Marketing', 'Finance', 'Accounting', 'Management', 'Economics', 'Investment'],
      'Design & Creative': ['Graphic Design', 'UI/UX Design', 'Photography', 'Video Production', '3D Modeling', 'Animation'],
      'Academic & Research': ['Research Methods', 'Academic Writing', 'Thesis Writing', 'Literature Review', 'Data Analysis'],
      'Personal Development': ['Productivity', 'Leadership', 'Communication', 'Time Management', 'Career Development'],
      'Technology & Computing': ['Networking', 'Cybersecurity', 'Operating Systems', 'Database', 'Hardware', 'Software Engineering']
    };
    
    // Global variables
    let booksData = { categoryGroups: [], books: [] };
    let contentManager;
    let selectedBooks = new Set();
    let currentPage = 1;
    const booksPerPage = 12;
    let filteredBooks = [];
    
    // Initialize
    document.addEventListener('DOMContentLoaded', async () => {
      contentManager = new ContentManager();
      await loadBooks();
      loadCategories();
      loadFilterCategories();
      updateDashboard();
      renderBooks();
      updateStatistics();
    });
    
    // Tab switching
    function switchTab(tabName) {
      document.querySelectorAll('.tab-item').forEach(item => item.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
      
      event.target.classList.add('active');
      document.getElementById(tabName + '-tab').classList.add('active');
      
      if (tabName === 'json') {
        loadJSONEditor();
      }
    }
    
    // Load books data
    async function loadBooks() {
      try {
        const data = await contentManager.loadJSON('Content Studio/books-pdfs/books.json');
        booksData = data || { categoryGroups: [], books: [] };
        filteredBooks = [...booksData.books];
        console.log('Books loaded:', booksData.books.length);
      } catch (error) {
        console.error('Error loading books:', error);
        booksData = { categoryGroups: [], books: [] };
        filteredBooks = [];
      }
    }
    
    // Update book categories based on selected group
    function updateBookCategoriesFromGroup(targetSelectId, editPrefix = '') {
      const groupSelect = document.getElementById(editPrefix + 'categoryGroup');
      const categorySelect = document.getElementById(targetSelectId);
      const selectedGroup = groupSelect.value;
      
      categorySelect.innerHTML = '<option value="">Select category...</option>';
      
      if (selectedGroup && BOOK_CATEGORIES[selectedGroup]) {
        categorySelect.disabled = false;
        BOOK_CATEGORIES[selectedGroup].forEach(cat => {
          const option = document.createElement('option');
          option.value = cat;
          option.textContent = cat;
          categorySelect.appendChild(option);
        });
      } else {
        categorySelect.disabled = true;
      }
    }

    // Update filter categories when sector changes
    function updateFilterCategoriesFromGroup() {
      const groupSelect = document.getElementById('filterCategoryGroup');
      const categorySelect = document.getElementById('filter-category');
      const selectedGroup = groupSelect.value;
      
      categorySelect.innerHTML = '<option value="">All Categories</option>';
      
      if (selectedGroup && BOOK_CATEGORIES[selectedGroup]) {
        BOOK_CATEGORIES[selectedGroup].forEach(cat => {
          const option = document.createElement('option');
          option.value = cat;
          option.textContent = cat;
          categorySelect.appendChild(option);
        });
      } else {
        // Show all categories from all groups if "All Sectors" selected
        Object.values(BOOK_CATEGORIES).flat().sort().forEach(cat => {
          const option = document.createElement('option');
          option.value = cat;
          option.textContent = cat;
          categorySelect.appendChild(option);
        });
      }
    }

    // Load categories into dropdowns
    function loadCategories() {
      const categoryGroupSelects = [
        document.getElementById('categoryGroup'),
        document.getElementById('edit-categoryGroup'),
        document.getElementById('filterCategoryGroup')
      ];
      
      const categorySelect = document.getElementById('category');
      const editCategorySelect = document.getElementById('edit-category');
      const filterCategorySelect = document.getElementById('filter-category');
      
      // Populate Category Group dropdowns
      categoryGroupSelects.forEach((select, index) => {
        if (!select) return;
        const isFilter = index === 2;
        select.innerHTML = isFilter ? '<option value="">All Sectors</option>' : '<option value="">Select sector...</option>';
        
        Object.keys(BOOK_CATEGORIES).forEach(groupName => {
          const option = document.createElement('option');
          option.value = groupName;
          option.textContent = groupName;
          select.appendChild(option);
        });
      });
      
      // Initialize category selects
      categorySelect.innerHTML = '<option value="">Select sector first...</option>';
      categorySelect.disabled = true;
      editCategorySelect.innerHTML = '<option value="">Select sector first...</option>';
      editCategorySelect.disabled = true;
      if (filterCategorySelect) {
        filterCategorySelect.innerHTML = '<option value="">All Categories</option>';
      }
      
      // Try to load from JSON (will be overridden if available)
      if (booksData.categoryGroups && booksData.categoryGroups.length > 0) {
        categorySelect.innerHTML = '<option value="">Select Category</option>';
        editCategorySelect.innerHTML = '<option value="">Select Category</option>';
        if (filterCategorySelect) {
          filterCategorySelect.innerHTML = '<option value="">All Categories</option>';
        }
        
        booksData.categoryGroups.forEach(group => {
          const optgroup = document.createElement('optgroup');
          optgroup.label = `${group.icon || ''} ${group.name}`;
          const editOptgroup = document.createElement('optgroup');
          editOptgroup.label = `${group.icon || ''} ${group.name}`;
          const filterOptgroup = filterCategorySelect ? document.createElement('optgroup') : null;
          if (filterOptgroup) filterOptgroup.label = `${group.icon || ''} ${group.name}`;
          
          group.categories.forEach(cat => {
            const option = document.createElement('option');
            option.value = cat;
            option.textContent = cat;
            optgroup.appendChild(option);
            
            const editOption = document.createElement('option');
            editOption.value = cat;
            editOption.textContent = cat;
            editOptgroup.appendChild(editOption);
            
            if (filterOptgroup) {
              const filterOption = document.createElement('option');
              filterOption.value = cat;
              filterOption.textContent = cat;
              filterOptgroup.appendChild(filterOption);
            }
          });
          
          categorySelect.appendChild(optgroup);
          editCategorySelect.appendChild(editOptgroup);
          if (filterCategorySelect && filterOptgroup) {
            filterCategorySelect.appendChild(filterOptgroup);
          }
        });
      }
      
      // Load author suggestions
      loadAuthorSuggestions();
    }
    
    // Load author suggestions from existing books
    function loadAuthorSuggestions() {
      const authorDatalist = document.getElementById('author-list');
      authorDatalist.innerHTML = '';
      
      // Get unique authors
      const uniqueAuthors = [...new Set(booksData.books.map(b => b.author).filter(a => a))];
      uniqueAuthors.sort().forEach(author => {
        const option = document.createElement('option');
        option.value = author;
        authorDatalist.appendChild(option);
      });
    }
    
    // Load filter categories from all books
    function loadFilterCategories() {
      const filterCategorySelect = document.getElementById('filter-category');
      if (!filterCategorySelect) return;
      
      // Get all unique categories from books
      const categories = [...new Set(booksData.books.map(b => b.category))].sort();
      
      // Clear existing options except first one
      while (filterCategorySelect.children.length > 1) {
        filterCategorySelect.removeChild(filterCategorySelect.lastChild);
      }
      
      // Add options for each category
      categories.forEach(category => {
        const option = document.createElement('option');
        option.value = category;
        option.textContent = category;
        filterCategorySelect.appendChild(option);
      });
    }
    
    // Update dashboard stats
    function updateDashboard() {
      const totalBooks = booksData.books.length;
      const uniqueAuthors = new Set(booksData.books.map(b => b.author)).size;
      const totalSize = booksData.books.reduce((sum, book) => {
        const size = parseFloat(book.size) || 0;
        return sum + size;
      }, 0).toFixed(1);
      const totalDownloads = booksData.books.reduce((sum, book) => sum + (book.downloads || 0), 0);
      
      // Sidebar stats
      document.getElementById('sidebar-total').textContent = totalBooks;
      document.getElementById('sidebar-authors').textContent = uniqueAuthors;
      document.getElementById('sidebar-size').textContent = totalSize + ' MB';
      document.getElementById('sidebar-downloads').textContent = totalDownloads;
      
      // Dashboard cards
      document.getElementById('dash-total').textContent = totalBooks;
      document.getElementById('dash-authors').textContent = uniqueAuthors;
      document.getElementById('dash-size').textContent = totalSize + ' MB';
      document.getElementById('dash-downloads').textContent = totalDownloads;
    }
    
    // Upload book
    async function uploadBook(event) {
      event.preventDefault();
      
      // Validation
      const category = document.getElementById('category').value;
      if (!category) {
        alert('‚ö†Ô∏è Please select a category');
        return;
      }
      
      const newBook = {
        id: 'book-' + Date.now(),
        category: category,
        type: 'book',
        title: document.getElementById('title').value,
        summary: document.getElementById('summary').value,
        author: document.getElementById('author').value,
        pages: parseInt(document.getElementById('pages').value) || 0,
        size: document.getElementById('size').value,
        format: document.getElementById('format').value,
        downloadUrl: document.getElementById('downloadUrl').value,
        downloads: 0,
        language: document.getElementById('language').value,
        cover: '',
        tags: document.getElementById('tags').value.split(',').map(t => t.trim()).filter(t => t),
        isbn: document.getElementById('isbn').value || '',
        publisher: document.getElementById('publisher').value || '',
        publicationDate: document.getElementById('publicationDate').value || '',
        dateAdded: new Date().toISOString().split('T')[0]
      };
      
      // Validation: Required fields
      if (!newBook.title.trim() || !newBook.author.trim() || !newBook.downloadUrl.trim() || !newBook.summary.trim()) {
        alert('‚ö†Ô∏è Please fill all required fields (Title, Author, Summary, Download URL)');
        return;
      }
      
      // Validation: Format
      if (!['PDF', 'EPUB', 'MOBI'].includes(newBook.format)) {
        alert('‚ö†Ô∏è Invalid format selected');
        return;
      }
      
      // Show progress
      const progress = document.getElementById('upload-progress');
      const progressFill = document.getElementById('upload-progress-fill');
      const progressText = document.getElementById('upload-progress-text');
      progress.classList.add('active');
      
      progressFill.style.width = '30%';
      progressText.textContent = 'Uploading book data...';
      
      // Add to books array
      booksData.books.unshift(newBook);
      
      progressFill.style.width = '70%';
      progressText.textContent = 'Saving to GitHub...';
      
      // Save to GitHub
      await contentManager.saveJSON('Content Studio/books-pdfs/books.json', booksData);
      
      progressFill.style.width = '100%';
      progressText.textContent = 'Upload complete!';
      
      // Show success
      setTimeout(() => {
        progress.classList.remove('active');
        document.getElementById('upload-success').classList.add('active');
        document.getElementById('upload-form').reset();
        
        setTimeout(() => {
          document.getElementById('upload-success').classList.remove('active');
        }, 3000);
        
        // Update UI
        filteredBooks = [...booksData.books];
        updateDashboard();
        renderBooks();
      }, 1000);
    }
    
    // Cover preview
    function previewCover(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (e) => {
          document.getElementById('coverPreviewImg').src = e.target.result;
          document.getElementById('coverPreview').style.display = 'block';
        };
        reader.readAsDataURL(file);
      }
    }
    
    // Apply filters
    function applyFilters() {
      const search = document.getElementById('search-input').value.toLowerCase();
      const categoryFilter = document.getElementById('filter-category')?.value || '';
      const subcategoryFilter = document.getElementById('filter-subcategory')?.value || '';
      const dateFrom = document.getElementById('filter-date-from')?.value || '';
      const dateTo = document.getElementById('filter-date-to')?.value || '';
      const formatFilter = document.getElementById('filter-format').value;
      const languageFilter = document.getElementById('filter-language').value;
      const sortBy = document.getElementById('sort-by').value;
      
      // Filter
      filteredBooks = booksData.books.filter(book => {
        const matchSearch = !search || 
          book.title.toLowerCase().includes(search) ||
          book.author.toLowerCase().includes(search) ||
          book.summary.toLowerCase().includes(search) ||
          (book.tags && book.tags.join(' ').toLowerCase().includes(search));
        
        const matchCategory = !categoryFilter || book.category === categoryFilter;
        const matchSubcategory = !subcategoryFilter || book.subcategory === subcategoryFilter;
        const matchFormat = !formatFilter || book.format === formatFilter;
        const matchLanguage = !languageFilter || book.language === languageFilter;
        
        // Date range filtering
        let matchDateRange = true;
        if (dateFrom || dateTo) {
          const bookDate = book.dateAdded || book.date || book.id; // Fallback to ID if no date
          if (dateFrom && bookDate < dateFrom) matchDateRange = false;
          if (dateTo && bookDate > dateTo) matchDateRange = false;
        }
        
        return matchSearch && matchCategory && matchSubcategory && matchFormat && matchLanguage && matchDateRange;
      });
      
      // Sort
      if (sortBy === 'date-desc') {
        filteredBooks.sort((a, b) => b.id.localeCompare(a.id));
      } else if (sortBy === 'date-asc') {
        filteredBooks.sort((a, b) => a.id.localeCompare(b.id));
      } else if (sortBy === 'title-asc') {
        filteredBooks.sort((a, b) => a.title.localeCompare(b.title));
      } else if (sortBy === 'title-desc') {
        filteredBooks.sort((a, b) => b.title.localeCompare(a.title));
      } else if (sortBy === 'author-asc') {
        filteredBooks.sort((a, b) => a.author.localeCompare(b.author));
      } else if (sortBy === 'downloads-desc') {
        filteredBooks.sort((a, b) => (b.downloads || 0) - (a.downloads || 0));
      } else if (sortBy === 'pages-desc') {
        filteredBooks.sort((a, b) => (b.pages || 0) - (a.pages || 0));
      } else if (sortBy === 'category-asc') {
        filteredBooks.sort((a, b) => (a.category || '').localeCompare(b.category || ''));
      }
      
      currentPage = 1;
      renderBooks();
    }
    
    // Update subcategories based on selected category
    function updateSubcategories() {
      const categorySelect = document.getElementById('filter-category');
      const subcategorySelect = document.getElementById('filter-subcategory');
      const selectedCategory = categorySelect?.value;
      
      subcategorySelect.innerHTML = '<option value="">All Subcategories</option>';
      
      if (selectedCategory && booksData.books) {
        const subcategories = [...new Set(
          booksData.books
            .filter(book => book.category === selectedCategory && book.subcategory)
            .map(book => book.subcategory)
        )].sort();
        
        subcategories.forEach(sub => {
          subcategorySelect.innerHTML += `<option value="${sub}">${sub}</option>`;
        });
      }
    }
    
    // Render books
    function renderBooks() {
      const grid = document.getElementById('books-grid');
      const noResults = document.getElementById('no-results');
      
      if (filteredBooks.length === 0) {
        grid.innerHTML = '';
        noResults.style.display = 'block';
        document.getElementById('pagination').classList.remove('active');
        return;
      }
      
      noResults.style.display = 'none';
      
      // Pagination
      const totalPages = Math.ceil(filteredBooks.length / booksPerPage);
      const startIndex = (currentPage - 1) * booksPerPage;
      const endIndex = startIndex + booksPerPage;
      const booksToShow = filteredBooks.slice(startIndex, endIndex);
      
      // Render books
      grid.innerHTML = booksToShow.map(book => {
        const languageFlags = { en: 'üá¨üáß', bn: 'üáßüá©', hi: 'üáÆüá≥' };
        const formatClass = book.format.toLowerCase();
        const isSelected = selectedBooks.has(book.id);
        
        return `
          <div class="book-card" data-id="${book.id}">
            <input type="checkbox" class="book-card-checkbox" ${isSelected ? 'checked' : ''} 
                   onchange="toggleBookSelection('${book.id}')">
            <img src="${book.cover || 'data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%238B4513%22 width=%22200%22 height=%22200%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 fill=%22white%22 text-anchor=%22middle%22 dy=%22.3em%22%3Eüìö%3C/text%3E%3C/svg%3E'}" 
                 class="book-cover" alt="${book.title}">
            <div class="book-body">
              <div class="book-title">${book.title}</div>
              <div class="book-author">by ${book.author}</div>
              <div class="book-meta">
                ${book.pages ? `<span class="meta-badge badge-pages">üìÑ ${book.pages} pages</span>` : ''}
                ${book.size ? `<span class="meta-badge badge-size">üíæ ${book.size}</span>` : ''}
                <span class="meta-badge badge-${formatClass}">üìï ${book.format}</span>
                <span class="meta-badge flag-badge">${languageFlags[book.language] || 'üåç'}</span>
                <span class="meta-badge badge-downloads">üì• ${book.downloads || 0}</span>
              </div>
              <div class="book-actions">
                <button class="btn-edit" onclick="editBook('${book.id}')">‚úèÔ∏è Edit</button>
                <button class="btn-delete" onclick="deleteBook('${book.id}')">üóëÔ∏è Delete</button>
              </div>
            </div>
          </div>
        `;
      }).join('');
      
      // Update pagination
      if (totalPages > 1) {
        document.getElementById('pagination').classList.add('active');
        document.getElementById('page-info').textContent = `Page ${currentPage} of ${totalPages}`;
        document.getElementById('prev-btn').disabled = currentPage === 1;
        document.getElementById('next-btn').disabled = currentPage === totalPages;
      } else {
        document.getElementById('pagination').classList.remove('active');
      }
      
      // Update bulk toolbar
      updateBulkToolbar();
    }
    
    // Pagination
    function previousPage() {
      if (currentPage > 1) {
        currentPage--;
        renderBooks();
      }
    }
    
    function nextPage() {
      const totalPages = Math.ceil(filteredBooks.length / booksPerPage);
      if (currentPage < totalPages) {
        currentPage++;
        renderBooks();
      }
    }
    
    // Selection
    function toggleBookSelection(id) {
      if (selectedBooks.has(id)) {
        selectedBooks.delete(id);
      } else {
        selectedBooks.add(id);
      }
      updateBulkToolbar();
    }
    
    function selectAllBooks() {
      filteredBooks.forEach(book => selectedBooks.add(book.id));
      renderBooks();
    }
    
    function deselectAllBooks() {
      selectedBooks.clear();
      renderBooks();
    }
    
    function updateBulkToolbar() {
      const toolbar = document.getElementById('bulk-toolbar');
      const count = selectedBooks.size;
      
      if (count > 0) {
        toolbar.classList.add('active');
        document.getElementById('selected-count').textContent = count;
      } else {
        toolbar.classList.remove('active');
      }
    }
    
    // Bulk delete
    async function bulkDeleteBooks() {
      if (selectedBooks.size === 0) return;
      
      if (!confirm(`Delete ${selectedBooks.size} selected books? This cannot be undone.`)) {
        return;
      }
      
      const progress = document.getElementById('bulk-progress');
      const progressFill = document.getElementById('bulk-progress-fill');
      const progressText = document.getElementById('bulk-progress-text');
      
      progress.classList.add('active');
      
      const total = selectedBooks.size;
      let completed = 0;
      
      for (const id of selectedBooks) {
        booksData.books = booksData.books.filter(b => b.id !== id);
        completed++;
        const percent = (completed / total) * 100;
        progressFill.style.width = percent + '%';
        progressText.textContent = `Deleting ${completed} of ${total}...`;
        await new Promise(resolve => setTimeout(resolve, 100));
      }
      
      progressText.textContent = 'Saving changes...';
      await contentManager.saveJSON('Content Studio/books-pdfs/books.json', booksData);
      
      progressText.textContent = 'Complete!';
      
      setTimeout(() => {
        progress.classList.remove('active');
        selectedBooks.clear();
        filteredBooks = [...booksData.books];
        updateDashboard();
        renderBooks();
        updateStatistics();
      }, 1000);
    }
    
    // Edit book
    function editBook(id) {
      const book = booksData.books.find(b => b.id === id);
      if (!book) return;
      
      document.getElementById('edit-id').value = book.id;
      
      // Find which sector contains this category
      let bookSector = '';
      for (const [sector, categories] of Object.entries(BOOK_CATEGORIES)) {
        if (categories.includes(book.category)) {
          bookSector = sector;
          break;
        }
      }
      
      // Set sector first, which will enable and populate category dropdown
      if (bookSector) {
        document.getElementById('edit-categoryGroup').value = bookSector;
        updateBookCategoriesFromGroup('edit-category', 'edit-');
        // Then set the specific category
        setTimeout(() => {
          document.getElementById('edit-category').value = book.category;
        }, 50);
      }
      
      document.getElementById('edit-title').value = book.title;
      document.getElementById('edit-summary').value = book.summary;
      document.getElementById('edit-author').value = book.author;
      document.getElementById('edit-pages').value = book.pages || '';
      document.getElementById('edit-size').value = book.size || '';
      document.getElementById('edit-format').value = book.format;
      document.getElementById('edit-language').value = book.language;
      document.getElementById('edit-downloads').value = book.downloads || 0;
      document.getElementById('edit-isbn').value = book.isbn || '';
      document.getElementById('edit-publisher').value = book.publisher || '';
      document.getElementById('edit-tags').value = book.tags ? book.tags.join(', ') : '';
      document.getElementById('edit-downloadUrl').value = book.downloadUrl;
      
      document.getElementById('edit-modal').classList.add('active');
    }
    
    function closeEditModal() {
      document.getElementById('edit-modal').classList.remove('active');
    }
    
    async function saveEdit(event) {
      event.preventDefault();
      
      const id = document.getElementById('edit-id').value;
      const bookIndex = booksData.books.findIndex(b => b.id === id);
      
      if (bookIndex === -1) return;
      
      booksData.books[bookIndex] = {
        ...booksData.books[bookIndex],
        category: document.getElementById('edit-category').value,
        title: document.getElementById('edit-title').value,
        summary: document.getElementById('edit-summary').value,
        author: document.getElementById('edit-author').value,
        pages: parseInt(document.getElementById('edit-pages').value) || 0,
        size: document.getElementById('edit-size').value,
        format: document.getElementById('edit-format').value,
        language: document.getElementById('edit-language').value,
        downloads: parseInt(document.getElementById('edit-downloads').value) || 0,
        isbn: document.getElementById('edit-isbn').value,
        publisher: document.getElementById('edit-publisher').value,
        tags: document.getElementById('edit-tags').value.split(',').map(t => t.trim()).filter(t => t),
        downloadUrl: document.getElementById('edit-downloadUrl').value
      };
      
      await contentManager.saveJSON('Content Studio/books-pdfs/books.json', booksData);
      
      closeEditModal();
      filteredBooks = [...booksData.books];
      updateDashboard();
      renderBooks();
      updateStatistics();
      
      alert('‚úÖ Book updated successfully!');
    }
    
    // Delete book
    async function deleteBook(id) {
      if (!confirm('Delete this book? This cannot be undone.')) return;
      
      booksData.books = booksData.books.filter(b => b.id !== id);
      await contentManager.saveJSON('Content Studio/books-pdfs/books.json', booksData);
      
      filteredBooks = [...booksData.books];
      updateDashboard();
      renderBooks();
      updateStatistics();
      
      alert('‚úÖ Book deleted successfully!');
    }
    
    // Statistics
    function updateStatistics() {
      const total = booksData.books.length;
      const categories = new Set(booksData.books.map(b => b.category)).size;
      const avgPages = total > 0 ? Math.round(booksData.books.reduce((sum, b) => sum + (b.pages || 0), 0) / total) : 0;
      const totalSize = booksData.books.reduce((sum, b) => sum + (parseFloat(b.size) || 0), 0).toFixed(1);
      
      document.getElementById('stat-total').textContent = total;
      document.getElementById('stat-categories').textContent = categories;
      document.getElementById('stat-avg-pages').textContent = avgPages;
      document.getElementById('stat-total-size').textContent = totalSize + ' MB';
      
      // Format breakdown
      const formatCounts = {};
      booksData.books.forEach(book => {
        formatCounts[book.format] = (formatCounts[book.format] || 0) + 1;
      });
      
      const formatHtml = Object.entries(formatCounts)
        .map(([format, count]) => {
          const percent = ((count / total) * 100).toFixed(1);
          return `<div class="breakdown-item"><strong>${format}</strong><span>${count} (${percent}%)</span></div>`;
        }).join('');
      document.getElementById('format-breakdown').innerHTML = formatHtml || '<p style="color: #999;">No data</p>';
      
      // Language breakdown
      const languageCounts = {};
      const languageNames = { en: 'English', bn: '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ', hi: '‡§π‡§ø‡§Ç‡§¶‡•Ä' };
      booksData.books.forEach(book => {
        languageCounts[book.language] = (languageCounts[book.language] || 0) + 1;
      });
      
      const languageHtml = Object.entries(languageCounts)
        .map(([lang, count]) => {
          const percent = ((count / total) * 100).toFixed(1);
          return `<div class="breakdown-item"><strong>${languageNames[lang] || lang}</strong><span>${count} (${percent}%)</span></div>`;
        }).join('');
      document.getElementById('language-breakdown').innerHTML = languageHtml || '<p style="color: #999;">No data</p>';
      
      // Top downloads
      const topBooks = [...booksData.books]
        .sort((a, b) => (b.downloads || 0) - (a.downloads || 0))
        .slice(0, 10);
      
      const topHtml = topBooks
        .map(book => `<div class="breakdown-item"><strong>${book.title}</strong><span>üì• ${book.downloads || 0}</span></div>`)
        .join('');
      document.getElementById('top-downloads').innerHTML = topHtml || '<p style="color: #999;">No downloads yet</p>';
    }
    
    // JSON Editor
    function loadJSONEditor() {
      document.getElementById('json-editor').value = JSON.stringify(booksData, null, 2);
    }
    
    function validateJSON() {
      try {
        JSON.parse(document.getElementById('json-editor').value);
        alert('‚úÖ JSON is valid!');
      } catch (error) {
        alert('‚ùå Invalid JSON: ' + error.message);
      }
    }
    
    function formatJSON() {
      try {
        const json = JSON.parse(document.getElementById('json-editor').value);
        document.getElementById('json-editor').value = JSON.stringify(json, null, 2);
        alert('‚úÖ JSON formatted!');
      } catch (error) {
        alert('‚ùå Cannot format invalid JSON');
      }
    }
    
    async function saveJSON() {
      try {
        const newData = JSON.parse(document.getElementById('json-editor').value);
        booksData = newData;
        await contentManager.saveJSON('Content Studio/books-pdfs/books.json', booksData);
        
        document.getElementById('json-success').classList.add('active');
        setTimeout(() => {
          document.getElementById('json-success').classList.remove('active');
        }, 3000);
        
        filteredBooks = [...booksData.books];
        loadCategories();
        updateDashboard();
        renderBooks();
        updateStatistics();
      } catch (error) {
        alert('‚ùå Error: ' + error.message);
      }
    }
    
    // Save to GitHub
    async function saveToGitHub() {
      try {
        await contentManager.saveJSON('Content Studio/books-pdfs/books.json', booksData);
        alert('‚úÖ Changes saved to GitHub successfully!');
      } catch (error) {
        alert('‚ùå Error saving: ' + error.message);
      }
    }
  </script>
</body>
</html>