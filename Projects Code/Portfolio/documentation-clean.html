<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>Portfolio Development Documentation</title>
  <meta name="description" content="Complete development documentation for Md. Akhinoor Islam's portfolio website. Learn about architecture, challenges solved, and technical decisions." />
  <meta name="author" content="Md. Akhinoor Islam" />
  <meta name="keywords" content="portfolio, web development, flask, javascript, python, documentation, akhinoor14" />
  <link rel="icon" href="../../images/favicon.svg" type="image/svg+xml" />
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Fira+Code:wght@400;500;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css">
  <link rel="stylesheet" href="../../Optimization/styles.css">
  <link rel="stylesheet" href="../../Optimization/navbar/desktop-navbar.css">
  <link rel="stylesheet" href="../../Optimization /Background/background-system.css">
  <link rel="stylesheet" href="../../Optimization /mobile-top-nav.css">
  
  <!-- Marked.js for Markdown Parsing -->
  <script src="https://cdn.jsdelivr.net/npm/marked@11.0.0/marked.min.js"></script>
  
  <!-- html2pdf.js for PDF Export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  
  <!-- Performance hints: preconnect/prefetch for faster loads -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
  <!-- Prefetch both language markdown files (local) -->
  <link rel="prefetch" href="portfoliodocement/portfolio-documentation-en.md" as="fetch">
  <link rel="prefetch" href="portfoliodocement/portfolio-documentation-bn.md" as="fetch">
  
  <style>
    /* Documentation Viewer: Clean & Professional Styling */
    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #0a0a0a 0%, #140000 100%);
      color: #e0e0e0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      line-height: 1.65;
      overflow-x: hidden;
    }
    
    /* Header Toolbar */
    .doc-header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(10,10,10,0.95);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(255,255,255,0.1);
      padding: 12px 16px;
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }
    .doc-back-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 14px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.15);
      background: rgba(255,255,255,0.05);
      color: #fff;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s;
    }
    .doc-back-btn:hover { background: rgba(255,255,255,0.1); transform: translateX(-2px); }
    
    .reading-progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      height: 3px;
      background: linear-gradient(90deg, #ff0000, #ff5555);
      width: 0%;
      z-index: 200;
      transition: width 0.1s ease-out;
    }
    
    .doc-header-controls {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-left: auto;
      flex-wrap: wrap;
    }
    .lang-switcher {
      display: inline-flex;
      gap: 4px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.12);
      padding: 3px;
      border-radius: 999px;
    }
    .lang-btn {
      border: 0;
      background: transparent;
      color: rgba(255,255,255,0.7);
      padding: 6px 12px;
      border-radius: 999px;
      cursor: pointer;
      font-weight: 700;
      font-size: 0.85rem;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }
    .lang-btn.active {
      color: #fff;
      background: linear-gradient(135deg, #ff0000, #cc0000);
    }
    .lang-btn:hover:not(.active) { background: rgba(255,255,255,0.08); }
    
    .toc-toggle-btn, .download-pdf-btn, .fullscreen-toggle {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 38px;
      height: 38px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.05);
      color: #fff;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .toc-toggle-btn {
      display: none; /* Hidden on desktop */
    }
    
    .toc-toggle-btn:hover, .download-pdf-btn:hover, .fullscreen-toggle:hover {
      background: linear-gradient(135deg, #ff0000, #cc0000);
      border-color: rgba(255,255,255,0.2);
    }
    
    .toc-toggle-btn.active {
      background: linear-gradient(135deg, #ff0000, #cc0000);
    }
    
    .reading-stats {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.05);
      color: rgba(255,255,255,0.7);
      font-size: 0.85rem;
    }
    
    /* Sidebar */
    .doc-sidebar {
      position: fixed;
      left: 0;
      top: 60px;
      width: 260px;
      height: calc(100vh - 60px);
      background: rgba(0,0,0,0.9);
      backdrop-filter: blur(10px);
      border-right: 1px solid rgba(255,255,255,0.1);
      overflow-y: auto;
      padding: 16px;
      z-index: 50;
      transition: transform 0.3s ease;
    }
    
    .doc-sidebar.hidden {
      transform: translateX(-100%);
    }
    .sidebar-header { margin-bottom: 16px; }
    .sidebar-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 1rem;
      font-weight: 700;
      color: #fff;
      margin: 0;
    }
    .sidebar-toc { 
      display: flex; 
      flex-direction: column; 
      gap: 2px;
      max-height: calc(100vh - 200px);
      overflow-y: auto;
      padding-right: 4px;
    }
    
    .sidebar-toc::-webkit-scrollbar { width: 4px; }
    .sidebar-toc::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); border-radius: 2px; }
    .sidebar-toc::-webkit-scrollbar-thumb { background: rgba(255,0,0,0.3); border-radius: 2px; }
    .sidebar-toc::-webkit-scrollbar-thumb:hover { background: rgba(255,0,0,0.5); }
    
    .toc-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 6px;
      text-decoration: none;
      color: rgba(255,255,255,0.7);
      font-size: 0.85rem;
      transition: all 0.2s;
      border-left: 3px solid transparent;
    }
    
    .toc-item.toc-h1 {
      font-weight: 600;
      margin-top: 4px;
    }
    
    .toc-item.toc-h2 {
      font-size: 0.8rem;
      padding-left: 24px;
      opacity: 0.85;
    }
    
    .toc-item:hover { 
      background: rgba(255,255,255,0.08); 
      color: #fff; 
    }
    
    .toc-item.active {
      background: rgba(255,0,0,0.15);
      color: #ff5555;
      border-left-color: #ff0000;
    }
    
    .toc-num {
      font-weight: 700;
      opacity: 0.6;
      min-width: 24px;
      font-size: 0.75rem;
    }
    
    .toc-loading, .toc-empty {
      padding: 16px;
      text-align: center;
      color: rgba(255,255,255,0.5);
      font-size: 0.85rem;
    }
    
    .toc-loading i {
      margin-right: 8px;
      color: #ff5555;
    }
    
    /* Main Content */
    .doc-content {
      margin-left: 280px;
      padding: 24px 32px 80px;
      max-width: 1000px;
      min-height: 100vh;
    }
    
    .doc-loading, .doc-error {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 60px 20px;
      text-align: center;
      color: rgba(255,255,255,0.85);
    }
    .doc-loading i { font-size: 2rem; margin-bottom: 12px; }
    .doc-error {
      border: 1px solid rgba(255,0,0,0.3);
      border-radius: 12px;
      background: rgba(255,0,0,0.08);
      color: #ff5555;
    }
    
    /* ===================================== */
    /* ENHANCED MARKDOWN STYLES - FULL POWER */
    /* ===================================== */
    .markdown-body {
      color: #e8e8e8;
      line-height: 1.8;
      font-size: 16px;
      word-wrap: break-word;
    }
    
    /* HEADINGS - Professional & Eye-Catching */
    .markdown-body h1, .markdown-body h2, .markdown-body h3, .markdown-body h4, .markdown-body h5, .markdown-body h6 {
      color: #ffffff;
      font-weight: 700;
      margin-top: 2.5rem;
      margin-bottom: 1.2rem;
      line-height: 1.3;
      letter-spacing: -0.02em;
      scroll-margin-top: 80px; /* For smooth anchor scrolling */
    }
    .markdown-body h1 {
      font-size: 2.5rem;
      background: linear-gradient(135deg, #ff0000, #ff5555);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      border-bottom: 3px solid rgba(255,0,0,0.3);
      padding-bottom: 0.6rem;
      margin-bottom: 1.5rem;
    }
    .markdown-body h2 {
      font-size: 2rem;
      color: #fff;
      border-bottom: 2px solid rgba(255,255,255,0.15);
      padding-bottom: 0.5rem;
      margin-top: 3rem;
    }
    .markdown-body h3 {
      font-size: 1.5rem;
      color: #ff6b6b;
      position: relative;
      padding-left: 12px;
    }
    .markdown-body h3::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 4px;
      height: 70%;
      background: linear-gradient(180deg, #ff0000, #ff5555);
      border-radius: 2px;
    }
    .markdown-body h4 {
      font-size: 1.25rem;
      color: #ffa8a8;
    }
    .markdown-body h5, .markdown-body h6 {
      font-size: 1.1rem;
      color: rgba(255,255,255,0.9);
    }
    
    /* PARAGRAPHS - Comfortable Reading */
    .markdown-body p {
      margin: 1.2rem 0;
      color: rgba(255,255,255,0.88);
      line-height: 1.85;
    }
    
    /* LINKS - Interactive & Beautiful */
    .markdown-body a {
      color: #5eb3ff;
      text-decoration: none;
      border-bottom: 1.5px solid rgba(94,179,255,0.35);
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      font-weight: 500;
    }
    .markdown-body a:hover {
      color: #8fcdff;
      border-bottom-color: #8fcdff;
      background: rgba(94,179,255,0.08);
      padding: 2px 4px;
      margin: -2px -4px;
      border-radius: 3px;
    }
    
    /* INLINE CODE - Highlighted & Clear */
    .markdown-body code {
      background: rgba(255,100,100,0.12);
      padding: 3px 7px;
      border-radius: 5px;
      font-family: 'Fira Code', 'SF Mono', 'Monaco', 'Inconsolata', monospace;
      font-size: 0.88em;
      color: #ffb3b3;
      font-weight: 500;
      border: 1px solid rgba(255,100,100,0.2);
    }
    
    /* CODE BLOCKS - Professional Syntax Highlighting */
    .markdown-body pre {
      background: linear-gradient(135deg, rgba(0,0,0,0.6), rgba(20,0,0,0.4));
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 10px;
      padding: 20px;
      overflow-x: auto;
      margin: 2rem 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      position: relative;
    }
    .markdown-body pre code {
      background: transparent;
      padding: 0;
      color: inherit;
      font-size: 0.92rem;
      border: none;
      line-height: 1.6;
      display: block;
    }
    .markdown-body pre:hover {
      border-color: rgba(255,0,0,0.3);
      box-shadow: 0 6px 16px rgba(255,0,0,0.15);
    }
    
    /* LISTS - Clean & Organized */
    .markdown-body ul, .markdown-body ol {
      margin: 1.2rem 0;
      padding-left: 2rem;
      color: rgba(255,255,255,0.88);
    }
    .markdown-body li {
      margin: 0.7rem 0;
      padding-left: 0.3rem;
    }
    .markdown-body ul li::marker {
      color: #ff5555;
      font-weight: bold;
    }
    .markdown-body ol li::marker {
      color: #ff8888;
      font-weight: bold;
    }
    .markdown-body li > ul, .markdown-body li > ol {
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
    }
    
    /* BLOCKQUOTES - Highlighted Citations */
    .markdown-body blockquote {
      border-left: 5px solid #ff5555;
      padding: 1rem 1.2rem;
      margin: 2rem 0;
      background: rgba(255,85,85,0.08);
      border-radius: 0 8px 8px 0;
      color: rgba(255,255,255,0.85);
      font-style: italic;
      position: relative;
    }
    .markdown-body blockquote::before {
      content: '"';
      position: absolute;
      top: -10px;
      left: 10px;
      font-size: 3rem;
      color: rgba(255,85,85,0.3);
      font-family: Georgia, serif;
    }
    .markdown-body blockquote p {
      margin: 0.5rem 0;
    }
    
    /* TABLES - Professional Data Display */
    .markdown-body table {
      width: 100%;
      border-collapse: collapse;
      margin: 2rem 0;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    .markdown-body th, .markdown-body td {
      border: 1px solid rgba(255,255,255,0.12);
      padding: 12px 16px;
      text-align: left;
    }
    .markdown-body th {
      background: linear-gradient(135deg, rgba(255,0,0,0.2), rgba(255,85,85,0.15));
      font-weight: 700;
      color: #fff;
      text-transform: uppercase;
      font-size: 0.85rem;
      letter-spacing: 0.5px;
    }
    .markdown-body tr:nth-child(even) {
      background: rgba(255,255,255,0.03);
    }
    .markdown-body tr:hover {
      background: rgba(255,85,85,0.08);
    }
    .markdown-body td {
      color: rgba(255,255,255,0.85);
    }
    
    /* HORIZONTAL RULES - Section Dividers */
    .markdown-body hr {
      border: none;
      height: 2px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      margin: 3rem 0;
      border-radius: 1px;
    }
    
    /* IMAGES - Responsive & Styled */
    .markdown-body img {
      max-width: 100%;
      height: auto;
      border-radius: 10px;
      margin: 1.5rem 0;
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .markdown-body img:hover {
      transform: scale(1.02);
      box-shadow: 0 8px 24px rgba(255,0,0,0.2);
    }
    
    /* EMOJI SUPPORT - Larger & Clear */
    .markdown-body h1 img.emoji, 
    .markdown-body h2 img.emoji, 
    .markdown-body h3 img.emoji {
      display: inline-block;
      width: 1.2em;
      height: 1.2em;
      margin: 0 0.1em;
      vertical-align: -0.2em;
    }
    
    /* STRONG/BOLD TEXT - Emphasized */
    .markdown-body strong, .markdown-body b {
      color: #fff;
      font-weight: 700;
      background: linear-gradient(135deg, rgba(255,85,85,0.15), rgba(255,0,0,0.1));
      padding: 2px 6px;
      border-radius: 3px;
    }
    
    /* EMPHASIS/ITALIC TEXT - Styled */
    .markdown-body em, .markdown-body i {
      color: #ffc9c9;
      font-style: italic;
    }
    
    /* STRIKETHROUGH TEXT */
    .markdown-body del, .markdown-body s {
      color: rgba(255,255,255,0.5);
      text-decoration: line-through;
    }
    
    /* TASK LISTS - Checkbox Styling */
    .markdown-body input[type="checkbox"] {
      appearance: none;
      width: 18px;
      height: 18px;
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 4px;
      margin-right: 8px;
      vertical-align: middle;
      cursor: pointer;
      transition: all 0.2s;
    }
    .markdown-body input[type="checkbox"]:checked {
      background: linear-gradient(135deg, #ff0000, #ff5555);
      border-color: #ff0000;
      position: relative;
    }
    .markdown-body input[type="checkbox"]:checked::after {
      content: 'âœ“';
      position: absolute;
      color: white;
      font-size: 14px;
      font-weight: bold;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    
    /* KEYBOARD KEYS - Code-style */
    .markdown-body kbd {
      background: rgba(0,0,0,0.4);
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: 5px;
      padding: 3px 8px;
      font-family: 'Fira Code', monospace;
      font-size: 0.85em;
      color: #ffa8a8;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    /* DEFINITION LISTS */
    .markdown-body dl dt {
      font-weight: 700;
      color: #ff8888;
      margin-top: 1rem;
    }
    .markdown-body dl dd {
      margin-left: 2rem;
      color: rgba(255,255,255,0.85);
      margin-bottom: 0.8rem;
    }
    
    /* DETAILS/SUMMARY - Collapsible Sections */
    .markdown-body details {
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 8px;
      padding: 1rem;
      margin: 1.5rem 0;
      background: rgba(255,255,255,0.03);
    }
    .markdown-body summary {
      cursor: pointer;
      font-weight: 700;
      color: #ff8888;
      user-select: none;
      margin: -1rem;
      padding: 1rem;
      border-radius: 8px;
      transition: background 0.2s;
    }
    .markdown-body summary:hover {
      background: rgba(255,85,85,0.08);
    }
    .markdown-body details[open] summary {
      margin-bottom: 1rem;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    /* SPECIAL CALLOUTS - Alert Boxes */
    .markdown-body blockquote p:first-child strong:first-child {
      display: block;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    /* TL;DR / Note / Warning patterns */
    .markdown-body blockquote:has(p:first-child strong:first-child:contains("TL;DR")),
    .markdown-body blockquote:has(p:first-child strong:first-child:contains("Note")) {
      border-left-color: #4dabf7;
      background: rgba(77,171,247,0.08);
    }
    .markdown-body blockquote:has(p:first-child strong:first-child:contains("Warning")) {
      border-left-color: #ffa94d;
      background: rgba(255,169,77,0.08);
    }
    
    /* FOOTNOTES - Superscript Links */
    .markdown-body sup a {
      color: #ffa8a8;
      text-decoration: none;
      font-weight: 700;
    }
    .markdown-body sup a:hover {
      color: #ffcaca;
    }
    
    /* CODE LANGUAGE BADGE - Show language in pre blocks */
    .markdown-body pre[class*="language-"]::before {
      content: attr(class);
      position: absolute;
      top: 8px;
      right: 12px;
      font-size: 0.7rem;
      color: rgba(255,255,255,0.5);
      text-transform: uppercase;
      font-family: 'Inter', sans-serif;
      letter-spacing: 0.5px;
    }
    
    /* COPY CODE BUTTON - Interactive */
    .copy-code-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      padding: 6px 10px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 6px;
      color: rgba(255,255,255,0.7);
      cursor: pointer;
      font-size: 0.85rem;
      transition: all 0.2s;
      opacity: 0;
      z-index: 10;
    }
    .markdown-body pre:hover .copy-code-btn {
      opacity: 1;
    }
    .copy-code-btn:hover {
      background: rgba(255,85,85,0.2);
      border-color: rgba(255,85,85,0.4);
      color: #fff;
    }
    .copy-code-btn:active {
      transform: scale(0.95);
    }
    
    /* HEADING ANCHORS - Hover Links */
    .heading-anchor {
      opacity: 0;
      margin-left: 8px;
      color: rgba(255,255,255,0.4);
      text-decoration: none;
      font-size: 0.8em;
      transition: all 0.2s;
      border-bottom: none !important;
    }
    .markdown-body h1:hover .heading-anchor,
    .markdown-body h2:hover .heading-anchor,
    .markdown-body h3:hover .heading-anchor,
    .markdown-body h4:hover .heading-anchor {
      opacity: 1;
    }
    .heading-anchor:hover {
      color: #ff5555 !important;
      background: transparent !important;
    }
    
    /* TABLE WRAPPER - Mobile Scroll */
    .table-wrapper {
      overflow-x: auto;
      margin: 2rem 0;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    
    /* EMOJI STYLING - Proper Display */
    .markdown-body .emoji {
      display: inline-block;
      font-size: 1.2em;
      vertical-align: -0.15em;
      margin: 0 0.1em;
    }
    
    /* Scroll to Top Button */
    .scroll-to-top {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ff0000, #cc0000);
      border: 1px solid rgba(255,255,255,0.2);
      color: #fff;
      display: none;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 150;
      box-shadow: 0 4px 12px rgba(255,0,0,0.3);
      transition: all 0.3s;
    }
    .scroll-to-top.show { display: flex; }
    .scroll-to-top:hover { transform: translateY(-4px); box-shadow: 0 6px 20px rgba(255,0,0,0.5); }
    
    /* Fullscreen Exit Button */
    .floating-exit-btn {
      position: fixed;
      top: 16px;
      right: 16px;
      z-index: 200;
      display: none;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      border-radius: 999px;
      background: rgba(0,0,0,0.9);
      border: 1px solid rgba(255,255,255,0.2);
      color: #fff;
      cursor: pointer;
      opacity: 0;
      transform: translateY(-20px);
      transition: all 0.3s;
    }
    .floating-exit-btn.show { opacity: 1; transform: translateY(0); }
    
    /* Double-tap Hint */
    .double-tap-hint {
      position: fixed;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 250;
      display: none;
      padding: 12px 20px;
      border-radius: 12px;
      background: rgba(0,0,0,0.95);
      border: 1px solid rgba(255,255,255,0.2);
      color: #fff;
      font-size: 0.9rem;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .double-tap-hint.show { opacity: 1; }
    .hint-content { display: flex; align-items: center; gap: 10px; }
    
    /* Fullscreen Mode */
    body.fullscreen-mode .doc-sidebar { transform: translateX(-100%); }
    body.fullscreen-mode .doc-content { margin-left: 0; padding-top: 40px; }
    
    /* ===================================== */
    /* SMOOTH ANIMATIONS & INTERACTIONS */
    /* ===================================== */
    html {
      scroll-behavior: smooth;
    }
    
    /* Fade-in animation for content */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .markdown-body > * {
      animation: fadeIn 0.6s ease-out;
    }
    
    /* Pulse animation for loading */
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    .doc-loading i {
      animation: pulse 1.5s ease-in-out infinite;
    }
    
    /* Slide animations for notifications */
    @keyframes slideDown {
      from { 
        opacity: 0; 
        transform: translateX(-50%) translateY(-20px); 
      }
      to { 
        opacity: 1; 
        transform: translateX(-50%) translateY(0); 
      }
    }
    @keyframes slideUp {
      from { 
        opacity: 1; 
        transform: translateX(-50%) translateY(0); 
      }
      to { 
        opacity: 0; 
        transform: translateX(-50%) translateY(-20px); 
      }
    }
    
    /* TOC Overlay Backdrop (Mobile) */
    .toc-overlay {
      position: fixed;
      top: 60px;
      left: 0;
      width: 100%;
      height: calc(100vh - 60px);
      background: rgba(0,0,0,0.7);
      backdrop-filter: blur(4px);
      z-index: 49;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .toc-overlay.show {
      opacity: 1;
      visibility: visible;
    }
    
    /* Selection styling */
    ::selection {
      background: rgba(255,85,85,0.3);
      color: #fff;
    }
    ::-moz-selection {
      background: rgba(255,85,85,0.3);
      color: #fff;
    }
    
    /* Scrollbar styling */
    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }
    ::-webkit-scrollbar-track {
      background: rgba(0,0,0,0.3);
    }
    ::-webkit-scrollbar-thumb {
      background: rgba(255,85,85,0.5);
      border-radius: 5px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: rgba(255,85,85,0.7);
    }
    
    /* Mobile Navigation - Hide by default on desktop */
    .mobile-top-nav {
      display: none;
    }
    
    /* ===================================== */
    /* MOBILE RESPONSIVE - ENHANCED */
    /* ===================================== */
    @media (max-width: 768px) {
      /* Show mobile navbar, hide desktop */
      .mobile-top-nav {
        display: flex !important;
      }
      
      /* Adjust page spacing for mobile navbar */
      body {
        padding-top: calc(60px + env(safe-area-inset-top));
        padding-bottom: calc(60px + env(safe-area-inset-bottom));
      }
      
      /* Show TOC toggle button on mobile */
      .toc-toggle-btn { display: inline-flex !important; }
      
      /* Hide sidebar by default on mobile */
      .doc-sidebar { 
        transform: translateX(-100%); 
        width: 280px;
        background: rgba(0,0,0,0.95);
        box-shadow: 4px 0 20px rgba(0,0,0,0.5);
      }
      
      /* Show sidebar when toggled */
      .doc-sidebar.show { 
        transform: translateX(0); 
      }
      
      /* Full-width content */
      .doc-content {
        margin-left: 0;
        padding: 16px 12px calc(60px + env(safe-area-inset-bottom));
        max-width: 100%;
      }
      
      /* Compact header */
      .doc-header {
        padding: 8px 10px;
        gap: 8px;
      }
      .doc-back-btn {
        padding: 6px 10px;
        font-size: 0.9rem;
      }
      .doc-back-btn span { display: none; }
      
      /* Stack controls */
      .doc-header-controls {
        width: 100%;
        justify-content: flex-end;
        gap: 6px;
      }
      
      /* Hide reading stats on mobile */
      .reading-stats { display: none; }
      
      /* Smaller buttons */
      .download-pdf-btn, .fullscreen-toggle {
        width: 34px;
        height: 34px;
      }
      
      /* Mobile typography adjustments */
      .markdown-body {
        font-size: 15px;
        line-height: 1.7;
      }
      .markdown-body h1 {
        font-size: 1.8rem;
        margin-top: 1.5rem;
      }
      .markdown-body h2 {
        font-size: 1.5rem;
        margin-top: 2rem;
      }
      .markdown-body h3 {
        font-size: 1.25rem;
      }
      .markdown-body h4 {
        font-size: 1.1rem;
      }
      
      /* Mobile code blocks */
      .markdown-body pre {
        padding: 12px;
        font-size: 0.85rem;
        border-radius: 6px;
      }
      .markdown-body pre code {
        font-size: 0.85rem;
      }
      
      /* Mobile tables - horizontal scroll */
      .markdown-body table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
      }
      
      /* Touch-friendly scroll to top */
      .scroll-to-top {
        bottom: 16px;
        right: 16px;
        width: 44px;
        height: 44px;
      }
    }
    
    /* ===================================== */
    /* PRINT STYLES - PDF EXPORT */
    /* ===================================== */
    @media print {
      body {
        background: white;
        color: black;
      }
      .doc-header, .doc-sidebar, .scroll-to-top, .floating-exit-btn {
        display: none !important;
      }
      .doc-content {
        margin-left: 0;
        max-width: 100%;
        padding: 20px;
      }
      .markdown-body {
        color: black;
      }
      .markdown-body h1, .markdown-body h2, .markdown-body h3 {
        color: #000;
        page-break-after: avoid;
      }
      .markdown-body pre {
        page-break-inside: avoid;
        border: 1px solid #ddd;
        background: #f5f5f5;
      }
      .markdown-body a {
        color: #0066cc;
        text-decoration: underline;
      }
    }
  </style>
</head>
<body>

  <!-- Desktop Navigation -->
  <nav class="desktop-navbar" id="desktopNavbar">
    <div class="desktop-nav-container">
      <a href="../../Home/index.html" class="desktop-nav-logo" title="A3KM Studio - Home">
        <img src="../../images/logo.svg" alt="A3KM Studio Logo" class="desktop-nav-logo-img" width="55" height="55">
        <div class="desktop-nav-brand">
          <span class="desktop-nav-brand-name">A3KM Studio</span>
          <span class="desktop-nav-brand-tagline">Engineering Â· Innovation</span>
        </div>
      </a>
      <ul class="desktop-nav-menu">
        <li class="desktop-nav-item">
          <a href="../../About me/about.html" class="desktop-nav-link" id="nav-about">
            <i class="fas fa-user-circle"></i>
            <span>About</span>
          </a>
        </li>
        <li class="desktop-nav-item">
          <a href="../projects.html" class="desktop-nav-link active" id="nav-projects">
            <i class="fas fa-folder-open"></i>
            <span>Projects</span>
          </a>
        </li>
        <li class="desktop-nav-item">
          <a href="../../Blog/blog.html" class="desktop-nav-link" id="nav-blog">
            <i class="fas fa-pen-fancy"></i>
            <span>Blog</span>
          </a>
        </li>
        <li class="desktop-nav-item">
          <a href="../../Contact/contact.html" class="desktop-nav-link" id="nav-contact">
            <i class="fas fa-envelope"></i>
            <span>Contact</span>
          </a>
        </li>
        <li class="desktop-nav-item">
          <a href="/About%20me/CV/2313014%20CV.pdf" class="desktop-nav-link desktop-nav-cv-btn" download="Md_Akhinoor_Islam_CV.pdf" title="Download CV">
            <i class="fas fa-download"></i>
            <span>CV</span>
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Mobile Top Navigation (Auto-shows on mobile) -->
  <nav class="mobile-top-nav">
    <a href="../../Home/home-mobile.html" class="nav-icon" title="Home">
      <i class="fas fa-home"></i>
    </a>
    <a href="../projects-mobile.html" class="nav-icon active" title="Projects">
      <i class="fas fa-briefcase"></i>
    </a>
    <a href="../../About me/about-mobile.html" class="nav-icon" title="About">
      <i class="fas fa-user"></i>
    </a>
    <a href="../../Blog/blog-mobile.html" class="nav-icon" title="Blog">
      <i class="fas fa-rss"></i>
    </a>
    <a href="../../Contact/contact-mobile.html" class="nav-icon" title="Contact">
      <i class="fas fa-envelope"></i>
    </a>
  </nav>

  <!-- Header with Controls -->
  <header class="doc-header" id="doc-header">
    <!-- Back Button -->
    <button class="doc-back-btn" onclick="if(window.innerWidth <= 768) { window.location.href='../projects-mobile.html'; } else { window.location.href='../projects.html#web-dev'; } return false;">
      <i class="fas fa-arrow-left"></i>
      <span>Back</span>
    </button>

    <!-- Reading Progress Bar -->
    <div class="reading-progress-bar" id="reading-progress-bar"></div>

    <!-- Header Controls -->
    <div class="doc-header-controls">
      <!-- TOC Toggle Button (Mobile) -->
      <button class="toc-toggle-btn" id="toc-toggle-btn" onclick="toggleTOC()" title="Table of Contents">
        <i class="fas fa-list"></i>
      </button>
      
      <!-- Language Switcher -->
      <div class="lang-switcher">
        <button id="lang-en" class="lang-btn active" data-lang="en" onclick="switchLanguage('en')">
          <span class="lang-flag">ðŸ‡¬ðŸ‡§</span>
          <span class="lang-text">EN</span>
        </button>
        <button id="lang-bn" class="lang-btn" data-lang="bn" onclick="switchLanguage('bn')">
          <span class="lang-flag">ðŸ‡§ðŸ‡©</span>
          <span class="lang-text">à¦¬à¦¾à¦‚</span>
        </button>
      </div>

      <!-- Download PDF Button -->
      <button class="download-pdf-btn" id="download-pdf-btn" onclick="downloadAsPDF()" title="Download as PDF">
        <i class="fas fa-file-pdf"></i>
      </button>

      <!-- Fullscreen Toggle -->
      <button class="fullscreen-toggle" id="fullscreen-toggle" onclick="toggleFullscreenMode()" title="Fullscreen Reading Mode">
        <i class="fas fa-expand"></i>
      </button>

      <!-- Reading Stats -->
      <div class="reading-stats" id="reading-stats">
        <span class="reading-time"><i class="fas fa-clock"></i> <span id="reading-time-value">0 min</span></span>
      </div>
    </div>
  </header>

  <!-- Fullscreen Exit Button (Hidden by default) -->
  <button class="floating-exit-btn" id="floating-exit-btn" onclick="exitFullscreenMode()" style="display: none;">
    <i class="fas fa-times"></i>
    <span>Exit Fullscreen</span>
  </button>

  <!-- Double-Tap Hint (First-time only) -->
  <div class="double-tap-hint" id="double-tap-hint" style="display: none;">
    <div class="hint-content">
      <i class="fas fa-hand-pointer"></i>
      <p>Double-tap top area to show exit button</p>
    </div>
  </div>

  <!-- TOC Overlay Backdrop (Mobile) -->
  <div class="toc-overlay" id="toc-overlay" onclick="closeTOC()"></div>

  <!-- Sidebar Navigation -->
  <nav class="doc-sidebar" id="doc-sidebar">
    <div class="sidebar-header">
      <h2 class="sidebar-title">
        <i class="fas fa-book-open"></i>
        <span>Documentation</span>
      </h2>
    </div>
    
    <!-- Search box will be added here by enhancement script -->
    
    <!-- Dynamic TOC - Auto-generated from markdown headings -->
    <div class="sidebar-toc" id="sidebar-toc">
      <div class="toc-loading">
        <i class="fas fa-spinner fa-spin"></i>
        <span>Building TOC...</span>
      </div>
    </div>
  </nav>

  <!-- Main Content Area -->
  <main class="doc-content" id="doc-content">
    <div class="doc-loading">
      <i class="fas fa-spinner fa-spin"></i>
      <p>Loading comprehensive documentation...</p>
      <small>15 sections â€¢ 2,000+ lines â€¢ Personal development story</small>
    </div>
  </main>

  <!-- Scroll to Top Button -->
  <button class="scroll-to-top" id="scroll-to-top" onclick="scrollToTop()" style="display: none;">
    <i class="fas fa-arrow-up"></i>
  </button>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
  
  <!-- Documentation Base Script -->
  <script>
    // Language toggle functionality
    const urlParams = new URLSearchParams(location.search);
    let currentLanguage = (urlParams.get('lang') || localStorage.getItem('doc_lang') || 'en').toLowerCase() === 'bn' ? 'bn' : 'en';
    let isFullscreen = false;
    let lastTapTime = 0;
    let floatingBtnTimeout = null;
    const DOC_PATHS = {
      en: './portfoliodocement/portfolio-documentation-en.md',
      bn: './portfoliodocement/portfolio-documentation-bn.md'
    };
    // Configure marked
    marked.setOptions({ gfm: true, breaks: true, headerIds: true, mangle: false });
    
    async function loadDocumentation() {
      const container = document.getElementById('doc-content');
      if (!container) {
        console.error('[DOC] Container not found!');
        return;
      }
      
      // Check if marked.js is loaded
      if (typeof marked === 'undefined') {
        console.error('[DOC] marked.js library not loaded!');
        container.innerHTML = `
          <div class="doc-error">
            <i class="fas fa-exclamation-triangle"></i>
            <h2>Library Loading Error</h2>
            <p>Markdown parser (marked.js) failed to load from CDN.</p>
            <p>Please check your internet connection and try again.</p>
            <button onclick="location.reload()" class="doc-back-btn">
              <i class="fas fa-redo"></i> Reload Page
            </button>
          </div>`;
        return;
      }
      
      container.innerHTML = `
        <div class="doc-loading">
          <i class="fas fa-spinner fa-spin"></i>
          <p>Loading documentationâ€¦</p>
        </div>`;
      
      try {
        const docPath = DOC_PATHS[currentLanguage];
        console.log('[DOC] Loading from:', docPath);
        console.log('[DOC] Current language:', currentLanguage);
        
        const res = await fetch(docPath, { 
          cache: 'no-store',
          headers: {
            'Content-Type': 'text/markdown'
          }
        });
        
        console.log('[DOC] Fetch response status:', res.status, res.statusText);
        
        if (!res.ok) {
          throw new Error(`HTTP ${res.status} - ${res.statusText}`);
        }
        
        let text = await res.text();
        console.log('[DOC] Content loaded, length:', text.length, 'chars');
        
        if (!text || text.trim().length === 0) {
          throw new Error('Markdown file is empty');
        }
        
        console.log('[DOC] Starting markdown parsing...');
        // ===== ENHANCED MARKDOWN PROCESSING =====
        // 1. Parse with marked.js
        const html = marked.parse(text);
        console.log('[DOC] Parsing complete, HTML length:', html.length, 'chars');
        
        console.log('[DOC] Rendering to container...');
        // 2. Render content
        container.innerHTML = `<article class="markdown-body md-narrow md-wrap">${html}</article>`;
        console.log('[DOC] Content rendered successfully');
        
        // 3. Enhanced Syntax Highlighting
        try {
          if (window.Prism) {
            // Prism highlighting
            Prism.highlightAll();
          } else if (window.hljs) {
            // Fallback to highlight.js
            container.querySelectorAll('pre code').forEach(block => {
              hljs.highlightElement(block);
            });
          }
        } catch(e) {
          console.warn('Syntax highlighting failed:', e);
        }
        
        // 4. Add copy buttons to code blocks
        container.querySelectorAll('pre').forEach(pre => {
          const copyBtn = document.createElement('button');
          copyBtn.className = 'copy-code-btn';
          copyBtn.innerHTML = '<i class="fas fa-copy"></i>';
          copyBtn.title = 'Copy code';
          copyBtn.onclick = function() {
            const code = pre.querySelector('code').textContent;
            navigator.clipboard.writeText(code).then(() => {
              copyBtn.innerHTML = '<i class="fas fa-check"></i>';
              setTimeout(() => {
                copyBtn.innerHTML = '<i class="fas fa-copy"></i>';
              }, 2000);
            });
          };
          pre.style.position = 'relative';
          pre.appendChild(copyBtn);
        });
        
        // 5. Process special elements
        console.log('[DOC] Enhancing markdown elements...');
        enhanceMarkdownElements(container);
        
        // 6. Generate Table of Contents dynamically
        console.log('[DOC] Generating table of contents...');
        generateTableOfContents(container);
        console.log('[DOC] TOC generation complete');
        
        // 7. External links open in new tab
        container.querySelectorAll('a[href^="http"]').forEach(a => {
          a.target = '_blank';
          a.rel = 'noopener noreferrer';
        });
        
        // 8. Persist language choice
        localStorage.setItem('doc_lang', currentLanguage);
        
        // 9. Update reading time
        calculateReadingTime();
        
        // 9. Smooth scroll to hash
        if (location.hash) {
          setTimeout(() => {
            const el = document.querySelector(location.hash);
            if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }, 100);
        } else {
          window.scrollTo({ top: 0, behavior: 'instant' });
        }
        
        console.log('[DOC] âœ… Documentation loaded successfully!');
        
      } catch (err) {
        console.error('[DOC ERROR] Failed:', err);
        container.innerHTML = `
          <div class="doc-error">
            <i class="fas fa-exclamation-triangle"></i>
            <h2>Documentation Loading Error</h2>
            <p>Failed to load documentation: ${err.message}</p>
            <p>Please check if the markdown file exists at: <code>${DOC_PATHS[currentLanguage]}</code></p>
            <button onclick="location.reload()" class="doc-back-btn">
              <i class="fas fa-redo"></i> Retry
            </button>
          </div>
        `;
      }
    }
    
    // ===== ENHANCE MARKDOWN ELEMENTS =====
    function enhanceMarkdownElements(container) {
      // Add IDs to headings for TOC
      container.querySelectorAll('h1, h2, h3, h4, h5, h6').forEach((heading, index) => {
        if (!heading.id) {
          const text = heading.textContent.trim();
          const id = text.toLowerCase()
            .replace(/[^\w\s-]/g, '')
            .replace(/\s+/g, '-')
            .substring(0, 50);
          heading.id = id || `heading-${index}`;
        }
        
        // Add anchor link icon
        const anchor = document.createElement('a');
        anchor.href = '#' + heading.id;
        anchor.className = 'heading-anchor';
        anchor.innerHTML = '<i class="fas fa-link"></i>';
        anchor.title = 'Link to this section';
        heading.appendChild(anchor);
      });
      
      // Style emoji properly
      container.querySelectorAll('.markdown-body').forEach(body => {
        body.innerHTML = body.innerHTML.replace(
          /([\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}])/gu,
          '<span class="emoji">$1</span>'
        );
      });
      
      // Enhance tables with wrapper for mobile scroll
      container.querySelectorAll('table').forEach(table => {
        if (!table.parentElement.classList.contains('table-wrapper')) {
          const wrapper = document.createElement('div');
          wrapper.className = 'table-wrapper';
          table.parentNode.insertBefore(wrapper, table);
          wrapper.appendChild(table);
        }
      });
    }
    
    // ===== GENERATE TABLE OF CONTENTS =====
    function generateTableOfContents(container) {
      const tocContainer = document.getElementById('sidebar-toc');
      if (!tocContainer) return;
      
      // Get all H1 and H2 headings from markdown
      const headings = container.querySelectorAll('h1, h2');
      
      if (headings.length === 0) {
        tocContainer.innerHTML = '<div class="toc-empty">No headings found</div>';
        return;
      }
      
      let tocHTML = '';
      let h1Counter = 0;
      let h2Counter = 0;
      
      headings.forEach((heading) => {
        const level = heading.tagName.toLowerCase();
        const text = heading.textContent.trim().replace(/ðŸ”—/g, '').trim(); // Remove anchor icon
        const id = heading.id;
        
        if (!id) return; // Skip if no ID
        
        if (level === 'h1') {
          h1Counter++;
          h2Counter = 0; // Reset h2 counter for new section
          
          tocHTML += `
            <a href="#${id}" class="toc-item toc-h1 ${h1Counter === 1 ? 'active' : ''}" data-id="${id}">
              <span class="toc-num">${h1Counter}</span>
              <span class="toc-text">${text}</span>
            </a>`;
        } else if (level === 'h2') {
          h2Counter++;
          
          tocHTML += `
            <a href="#${id}" class="toc-item toc-h2" data-id="${id}">
              <span class="toc-num">${h1Counter}.${h2Counter}</span>
              <span class="toc-text">${text}</span>
            </a>`;
        }
      });
      
      tocContainer.innerHTML = tocHTML;
      
      // Add click handlers for smooth scroll
      tocContainer.querySelectorAll('.toc-item').forEach(item => {
        item.addEventListener('click', (e) => {
          e.preventDefault();
          const targetId = item.getAttribute('data-id');
          const targetElement = document.getElementById(targetId);
          
          if (targetElement) {
            targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            // Update active state
            tocContainer.querySelectorAll('.toc-item').forEach(i => i.classList.remove('active'));
            item.classList.add('active');
            
            // Update URL hash without jumping
            history.pushState(null, null, `#${targetId}`);
          }
        });
      });
      
      // Highlight active section on scroll
      setupScrollSpy(headings, tocContainer);
    }
    
    // ===== SCROLL SPY FOR TOC =====
    function setupScrollSpy(headings, tocContainer) {
      const observerOptions = {
        root: null,
        rootMargin: '-20% 0px -80% 0px',
        threshold: 0
      };
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const id = entry.target.id;
            const activeItem = tocContainer.querySelector(`.toc-item[data-id="${id}"]`);
            
            if (activeItem) {
              tocContainer.querySelectorAll('.toc-item').forEach(item => {
                item.classList.remove('active');
              });
              activeItem.classList.add('active');
              
              // Scroll TOC to show active item
              activeItem.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
          }
        });
      }, observerOptions);
      
      headings.forEach(heading => observer.observe(heading));
    }
    
    function switchLanguage(lang) {
      currentLanguage = lang;
      
      // Update button states
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
      });
      
      // Reload content for selected language
      loadDocumentation();
    }
    
    // ===== TOC TOGGLE FUNCTIONS (MOBILE) =====
    function toggleTOC() {
      const sidebar = document.getElementById('doc-sidebar');
      const overlay = document.getElementById('toc-overlay');
      const toggleBtn = document.getElementById('toc-toggle-btn');
      
      const isOpen = sidebar.classList.contains('show');
      
      if (isOpen) {
        closeTOC();
      } else {
        // Open TOC
        sidebar.classList.add('show');
        overlay.classList.add('show');
        toggleBtn.classList.add('active');
        document.body.style.overflow = 'hidden'; // Prevent background scroll
      }
    }
    
    function closeTOC() {
      const sidebar = document.getElementById('doc-sidebar');
      const overlay = document.getElementById('toc-overlay');
      const toggleBtn = document.getElementById('toc-toggle-btn');
      
      sidebar.classList.remove('show');
      overlay.classList.remove('show');
      toggleBtn.classList.remove('active');
      document.body.style.overflow = ''; // Restore scroll
    }
    
    // Close TOC when clicking a TOC item (mobile)
    document.addEventListener('DOMContentLoaded', () => {
      const tocContainer = document.getElementById('sidebar-toc');
      if (tocContainer) {
        tocContainer.addEventListener('click', (e) => {
          if (e.target.closest('.toc-item') && window.innerWidth <= 768) {
            setTimeout(() => closeTOC(), 300); // Small delay for smooth scroll
          }
        });
      }
    });
    
    // ========== PDF DOWNLOAD - COMPLETE WORKING VERSION ==========
    async function downloadAsPDF() {
      // Check if html2pdf is loaded
      if (typeof html2pdf === 'undefined') {
        alert('PDF library not loaded. Please refresh the page and try again.');
        console.error('html2pdf library not found');
        return;
      }
      
      const content = document.querySelector('.markdown-body');
      if (!content || content.querySelector('.doc-loading')) {
        alert('Content not loaded yet. Please wait...');
        return;
      }
      
      // Additional check: ensure content has text
      const contentText = content.textContent || '';
      if (contentText.trim().length < 100) {
        alert('Content is too short or not fully loaded. Please wait a moment and try again.');
        console.error('[PDF] Content length:', contentText.length);
        return;
      }
      
      console.log('[PDF] Starting PDF generation, content length:', contentText.length);
      
      // Show loading indicator
      const pdfBtn = document.getElementById('download-pdf-btn');
      const originalHTML = pdfBtn.innerHTML;
      pdfBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
      pdfBtn.disabled = true;
      
      try {
        // Get filename based on current language
        const filename = currentLanguage === 'bn' 
          ? 'Portfolio-Documentation-Bangla.pdf' 
          : 'Portfolio-Documentation-English.pdf';
        
        // Clone content for PDF
        const clonedContent = content.cloneNode(true);
        console.log('[PDF] Content cloned successfully');
        
        // Remove interactive elements (copy buttons, anchors)
        clonedContent.querySelectorAll('.copy-code-btn, .heading-anchor').forEach(el => el.remove());
        
        // Create wrapper for PDF with proper styling
        const pdfWrapper = document.createElement('div');
        pdfWrapper.style.cssText = `
          padding: 40px;
          background: white !important;
          color: black !important;
          font-family: 'Inter', sans-serif;
          line-height: 1.6;
          max-width: 800px;
          margin: 0 auto;
          position: relative;
          visibility: visible !important;
          opacity: 1 !important;
        `;
        console.log('[PDF] Wrapper created');
        
        // Add title page
        const titlePage = document.createElement('div');
        titlePage.style.cssText = 'page-break-after: always; text-align: center; padding: 60px 20px;';
        titlePage.innerHTML = `
          <h1 style="font-size: 36px; color: #ff0000; margin-bottom: 20px; font-weight: 700;">
            Portfolio Development Documentation
          </h1>
          <div style="height: 3px; width: 200px; background: linear-gradient(90deg, #ff0000, #ff5555); margin: 20px auto;"></div>
          <p style="font-size: 20px; color: #333; margin: 30px 0 10px; font-weight: 600;">Md. Akhinoor Islam (Rafid)</p>
          <p style="font-size: 14px; color: #666; margin: 5px 0;">Energy Science & Engineering, KUET</p>
          <p style="font-size: 14px; color: #666; margin: 5px 0;">GitHub: @Akhinoor14</p>
          <div style="margin-top: 60px; padding: 20px; background: #f5f5f5; border-left: 4px solid #ff0000;">
            <p style="font-size: 16px; color: #333; margin: 5px 0;">
              <strong>Language:</strong> ${currentLanguage === 'bn' ? 'à¦¬à¦¾à¦‚à¦²à¦¾ (Bangla)' : 'English'}
            </p>
            <p style="font-size: 16px; color: #333; margin: 5px 0;">
              <strong>Generated:</strong> ${new Date().toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
              })}
            </p>
            <p style="font-size: 16px; color: #333; margin: 5px 0;">
              <strong>Total Pages:</strong> ${Math.ceil(content.textContent.split(' ').length / 400)} (approx.)
            </p>
          </div>
          <p style="font-size: 12px; color: #999; margin-top: 80px; font-style: italic;">
            "From Zero to Production - The Complete Journey"
          </p>
        `;
        
        pdfWrapper.appendChild(titlePage);
        
        // Style markdown content for PDF
        clonedContent.style.cssText = `
          color: #000 !important;
          background: white !important;
          font-size: 11pt;
          line-height: 1.6;
          visibility: visible !important;
          opacity: 1 !important;
        `;
        console.log('[PDF] Content styled for PDF');
        
        // Style headings
        clonedContent.querySelectorAll('h1').forEach(h => {
          h.style.cssText = 'color: #ff0000; font-size: 24pt; margin: 30px 0 15px; page-break-after: avoid; font-weight: 700; border-bottom: 2px solid #ff0000; padding-bottom: 8px;';
        });
        clonedContent.querySelectorAll('h2').forEach(h => {
          h.style.cssText = 'color: #333; font-size: 18pt; margin: 25px 0 12px; page-break-after: avoid; font-weight: 700; border-bottom: 1px solid #ddd; padding-bottom: 6px;';
        });
        clonedContent.querySelectorAll('h3').forEach(h => {
          h.style.cssText = 'color: #ff5555; font-size: 14pt; margin: 20px 0 10px; page-break-after: avoid; font-weight: 700; border-left: 4px solid #ff0000; padding-left: 10px;';
        });
        clonedContent.querySelectorAll('h4, h5, h6').forEach(h => {
          h.style.cssText = 'color: #666; font-size: 12pt; margin: 15px 0 8px; page-break-after: avoid; font-weight: 600;';
        });
        
        // Style paragraphs and text
        clonedContent.querySelectorAll('p, span, div').forEach(p => {
          p.style.cssText = 'color: #333 !important; margin: 10px 0; line-height: 1.7; visibility: visible !important; opacity: 1 !important;';
        });
        
        // Force all text nodes to be visible
        clonedContent.querySelectorAll('*').forEach(el => {
          const currentColor = window.getComputedStyle(el).color;
          // If text is white/transparent, make it black
          if (currentColor === 'rgb(255, 255, 255)' || currentColor === 'rgba(0, 0, 0, 0)') {
            el.style.color = '#333 !important';
          }
        });
        
        // Style links
        clonedContent.querySelectorAll('a').forEach(a => {
          a.style.cssText = 'color: #0066cc; text-decoration: underline;';
        });
        
        // Style code blocks
        clonedContent.querySelectorAll('pre').forEach(pre => {
          pre.style.cssText = 'background: #f5f5f5; border: 1px solid #ddd; border-radius: 4px; padding: 12px; margin: 15px 0; page-break-inside: avoid; overflow: hidden;';
        });
        clonedContent.querySelectorAll('code').forEach(code => {
          if (!code.parentElement || code.parentElement.tagName !== 'PRE') {
            code.style.cssText = 'background: #f0f0f0; padding: 2px 6px; border-radius: 3px; font-family: "Courier New", monospace; font-size: 10pt; color: #d63384;';
          } else {
            code.style.cssText = 'font-family: "Courier New", monospace; font-size: 9pt; color: #000; line-height: 1.5;';
          }
        });
        
        // Style lists
        clonedContent.querySelectorAll('ul, ol').forEach(list => {
          list.style.cssText = 'margin: 10px 0; padding-left: 25px;';
        });
        clonedContent.querySelectorAll('li').forEach(li => {
          li.style.cssText = 'margin: 6px 0; color: #333;';
        });
        
        // Style tables
        clonedContent.querySelectorAll('table').forEach(table => {
          table.style.cssText = 'border-collapse: collapse; width: 100%; margin: 15px 0; page-break-inside: avoid;';
        });
        clonedContent.querySelectorAll('th').forEach(th => {
          th.style.cssText = 'background: #ff0000; color: white; padding: 8px; border: 1px solid #ddd; font-weight: 600; text-align: left;';
        });
        clonedContent.querySelectorAll('td').forEach(td => {
          td.style.cssText = 'padding: 8px; border: 1px solid #ddd; color: #333;';
        });
        
        // Style blockquotes
        clonedContent.querySelectorAll('blockquote').forEach(bq => {
          bq.style.cssText = 'border-left: 4px solid #ff0000; padding-left: 15px; margin: 15px 0; background: #fff5f5; padding: 10px 15px; font-style: italic; color: #555;';
        });
        
        // Style horizontal rules
        clonedContent.querySelectorAll('hr').forEach(hr => {
          hr.style.cssText = 'border: none; border-top: 2px solid #ddd; margin: 25px 0;';
        });
        
        // Style strong/bold text
        clonedContent.querySelectorAll('strong, b').forEach(el => {
          el.style.cssText = 'font-weight: 700; color: #000;';
        });
        
        pdfWrapper.appendChild(clonedContent);
        
        console.log('[PDF] Wrapper final structure:', {
          wrapperHTML: pdfWrapper.innerHTML.substring(0, 200),
          textLength: pdfWrapper.textContent.length,
          childrenCount: pdfWrapper.children.length
        });
        
        // PDF generation options
        const opt = {
          margin: [10, 10, 10, 10],
          filename: filename,
          image: { type: 'jpeg', quality: 0.95 },
          html2canvas: { 
            scale: 2,
            useCORS: true,
            letterRendering: true,
            logging: false,
            scrollY: -window.scrollY,
            scrollX: 0,
            windowWidth: 800
          },
          jsPDF: { 
            unit: 'mm', 
            format: 'a4', 
            orientation: 'portrait',
            compress: true
          },
          pagebreak: { 
            mode: ['avoid-all', 'css', 'legacy'],
            before: 'h1, h2',
            after: '.page-break',
            avoid: 'pre, table, img'
          }
        };
        
        // Generate PDF
        console.log('ðŸ”„ Generating PDF...');
        await html2pdf().set(opt).from(pdfWrapper).save();
        
        console.log('âœ… PDF downloaded successfully!');
        
        // Show success message
        const successMsg = document.createElement('div');
        successMsg.style.cssText = `
          position: fixed;
          top: 80px;
          left: 50%;
          transform: translateX(-50%);
          background: linear-gradient(135deg, #00c853, #00e676);
          color: white;
          padding: 12px 24px;
          border-radius: 8px;
          box-shadow: 0 4px 12px rgba(0,200,83,0.3);
          z-index: 1000;
          font-weight: 600;
          animation: slideDown 0.3s ease-out;
        `;
        successMsg.innerHTML = '<i class="fas fa-check-circle"></i> PDF Downloaded Successfully!';
        document.body.appendChild(successMsg);
        
        setTimeout(() => {
          successMsg.style.animation = 'slideUp 0.3s ease-out';
          setTimeout(() => successMsg.remove(), 300);
        }, 3000);
        
      } catch (error) {
        console.error('âŒ PDF generation failed:', error);
        alert('Failed to generate PDF: ' + error.message + '\nPlease try again or contact support.');
      } finally {
        // Restore button
        pdfBtn.innerHTML = originalHTML;
        pdfBtn.disabled = false;
      }
    }
    
    // ========== FULLSCREEN READING MODE ==========
    function toggleFullscreenMode() {
      if (!isFullscreen) {
        enterFullscreenMode();
      } else {
        exitFullscreenMode();
      }
    }
    
    function enterFullscreenMode() {
      isFullscreen = true;
      document.body.classList.add('fullscreen-mode');
      
      // Hide header and sidebar
      const header = document.getElementById('doc-header');
      const sidebar = document.querySelector('.doc-sidebar');
      if (header) header.style.transform = 'translateY(-100%)';
      if (sidebar) sidebar.style.transform = 'translateX(-100%)';
      
      // Update button icon
      const icon = document.querySelector('#fullscreen-toggle i');
      if (icon) icon.className = 'fas fa-compress';
      
      // Show first-time hint (only once)
      showDoubleTapHint();
      
      console.log('ðŸ“– Entered fullscreen reading mode');
    }
    
    function exitFullscreenMode() {
      isFullscreen = false;
      document.body.classList.remove('fullscreen-mode');
      
      // Show header and sidebar
      const header = document.getElementById('doc-header');
      const sidebar = document.querySelector('.doc-sidebar');
      if (header) header.style.transform = 'translateY(0)';
      if (sidebar) sidebar.style.transform = 'translateX(0)';
      
      // Update button icon
      const icon = document.querySelector('#fullscreen-toggle i');
      if (icon) icon.className = 'fas fa-expand';
      
      // Hide floating exit button
      hideFloatingExitButton();
      
      console.log('ðŸ“– Exited fullscreen reading mode');
    }
    
    // ========== FLOATING EXIT BUTTON ==========
    function showFloatingExitButton() {
      const btn = document.getElementById('floating-exit-btn');
      if (!btn) return;
      
      btn.style.display = 'flex';
      requestAnimationFrame(() => {
        btn.classList.add('show');
      });
      
      // Auto-hide after 5 seconds
      clearTimeout(floatingBtnTimeout);
      floatingBtnTimeout = setTimeout(() => {
        hideFloatingExitButton();
      }, 5000);
    }
    
    function hideFloatingExitButton() {
      const btn = document.getElementById('floating-exit-btn');
      if (!btn) return;
      
      btn.classList.remove('show');
      setTimeout(() => {
        btn.style.display = 'none';
      }, 300);
    }
    
    // ========== DOUBLE-TAP DETECTION ==========
    function showDoubleTapHint() {
      const hasSeenHint = localStorage.getItem('docHasSeenDoubleTapHint');
      if (hasSeenHint) return;
      
      const hint = document.getElementById('double-tap-hint');
      if (!hint) return;
      
      hint.style.display = 'flex';
      setTimeout(() => {
        hint.classList.add('show');
      }, 500);
      
      setTimeout(() => {
        hint.classList.remove('show');
        setTimeout(() => {
          hint.style.display = 'none';
        }, 300);
      }, 4000);
      
      localStorage.setItem('docHasSeenDoubleTapHint', 'true');
    }
    
    // Double-tap top 30% to show exit button
    document.addEventListener('click', (e) => {
      if (!isFullscreen) return;
      
      const viewportHeight = window.innerHeight;
      const clickY = e.clientY;
      
      // Check if click is in top 30%
      if (clickY > viewportHeight * 0.3) return;
      
      const currentTime = Date.now();
      const timeDiff = currentTime - lastTapTime;
      
      if (timeDiff < 300 && timeDiff > 0) {
        // Double-tap detected!
        showFloatingExitButton();
        lastTapTime = 0; // Reset
      } else {
        lastTapTime = currentTime;
      }
    });
    
    // ========== READING PROGRESS BAR ==========
    function updateReadingProgress() {
      const docContent = document.getElementById('doc-content');
      if (!docContent) return;
      
      const scrollTop = window.scrollY;
      const docHeight = docContent.scrollHeight - window.innerHeight;
      const progress = (scrollTop / docHeight) * 100;
      
      const progressBar = document.getElementById('reading-progress-bar');
      if (progressBar) {
        progressBar.style.width = Math.min(progress, 100) + '%';
      }
    }
    
    // ========== SCROLL TO TOP BUTTON ==========
    function scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }
    
    function toggleScrollToTopBtn() {
      const btn = document.getElementById('scroll-to-top');
      if (!btn) return;
      
      if (window.scrollY > 500) {
        btn.style.display = 'flex';
        requestAnimationFrame(() => {
          btn.classList.add('show');
        });
      } else {
        btn.classList.remove('show');
        setTimeout(() => {
          btn.style.display = 'none';
        }, 300);
      }
    }
    
    // ========== READING TIME CALCULATOR ==========
    function calculateReadingTime() {
      const docContent = document.getElementById('doc-content');
      if (!docContent) return;
      
      const text = docContent.textContent || '';
      const wordCount = text.split(/\s+/).length;
      const readingTime = Math.ceil(wordCount / 200); // 200 words per minute
      
      const readingTimeEl = document.getElementById('reading-time-value');
      if (readingTimeEl) {
        readingTimeEl.textContent = `${readingTime} min`;
      }
    }
    
    // ========== EVENT LISTENERS ==========
    window.addEventListener('scroll', () => {
      updateReadingProgress();
      toggleScrollToTopBtn();
      
      // TOC sync
      const sections = document.querySelectorAll('.doc-content h1, .doc-content h2, .doc-content h3');
      let currentSection = '';
      
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        if (window.scrollY >= sectionTop - 100) {
          currentSection = section.id || section.textContent;
        }
      });
      
      // Update active TOC item
      document.querySelectorAll('.toc-item').forEach(item => {
        item.classList.remove('active');
      });
    });
    
    // ESC key to exit fullscreen
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && isFullscreen) {
        exitFullscreenMode();
      }
    });
    
    // ========== SMART BACK NAVIGATION ==========
    function goBack() {
      const referrer = document.referrer;
      
      // Check if coming from internal page
      if (referrer) {
        if (referrer.includes('projects.html')) {
          window.location.href = 'projects.html';
        }
        else if (referrer.includes('portfolio-mobile.html')) {
          window.location.href = 'portfolio-mobile.html';
        }
        // Generic back if from other internal page
        else if (window.history.length > 1) {
          window.history.back();
        }
        // Fallback to projects
        else {
          window.location.href = 'projects.html';
        }
      }
      // If no referrer or external, use browser back or fallback
      else if (window.history.length > 1) {
        window.history.back();
      }
      // Ultimate fallback
      else {
        window.location.href = 'projects.html';
      }
    }
    
    // Calculate reading time after content loads
    window.addEventListener('DOMContentLoaded', () => {
      // set initial lang buttons
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === currentLanguage);
      });
      // load markdown
      loadDocumentation();
    });
  </script>


<script>
(function() {
  window.addEventListener('scroll', function() {
    const navbar = document.getElementById('desktopNavbar');
    if (navbar) {
      if (window.scrollY > 50) {
        navbar.classList.add('scrolled');
      } else {
        navbar.classList.remove('scrolled');
      }
    }
  });
})();
</script>
</body>
</html>
